/*
 Guriddo jqGrid JS Trial - v5.8.10 - 2025-04-03
 Copyright(c) 2008, Tony Tomov, tony@trirand.com

 License: http://guriddo.net/?page_id=103334
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){a.jgrid=a.jgrid||{};a.jgrid.hasOwnProperty("defaults")||(a.jgrid.defaults={});a.extend(a.jgrid,{version:"5.8.10",isNull:function(c,e){return e&&!0===e?null===c:null==c},trim:function(c){return"string"===typeof c?c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):c},isFunction:function(c){return"function"===typeof c},type:function(c,e){if(e)return null===c?"[object Null]":Object.prototype.toString.call(c);
if(null==c)return(c+"").toLowerCase();e=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();return"generatorfunction"===e?"function":e.match(/^(array|bigint|date|error|function|generator|regexp|symbol)$/)?e:"object"===typeof c||"function"===typeof c?"object":typeof c},floatNum:function(c,e){void 0===e&&(e=0);c=parseFloat(c);return isNaN(c)?e:c},htmlDecode:function(c){return c&&("&nbsp;"===c||"&#160;"===c||1===c.length&&160===c.charCodeAt(0))?"":c?String(c).replace(/&gt;/g,">").replace(/&lt;/g,
"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):c},htmlEncode:function(c){return c?String(c).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):c},template:function(c){var e=a.makeArray(arguments).slice(1),d,f=e.length;a.jgrid.isNull(c)&&(c="");return c.replace(/\{([\w\-]+)(?::([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(h,g){if(!isNaN(parseInt(g,10)))return e[parseInt(g,10)];for(d=0;d<f;d++)if(Array.isArray(e[d])){h=e[d];for(var b=h.length;b--;)if(g===h[b].nm)return h[b].v}else if("object"===
typeof e[d]&&e[d][g])return a.jgrid.isFunction(e[d][g])?e[d][g]():e[d][g]})},msie:function(){return 0<a.jgrid.msiever()},msiever:function(){var c=0,e=window.navigator.userAgent,d=e.indexOf("MSIE");0<d?c=parseInt(e.substring(d+5,e.indexOf(".",d))):navigator.userAgent.match(/Trident\/7\./)&&(c=11);return c},getCellIndex:function(c){c=a(c);if(c.is("tr"))return-1;c=(c.is("td")||c.is("th")?c:c.closest("td,th"))[0];return a.jgrid.msie()?a.inArray(c,c.parentNode.cells):c.cellIndex},stripHtml:function(c){c=
String(c);var e=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return c?(c=c.replace(e,""))&&"&nbsp;"!==c&&"&#160;"!==c?c.replace(/"/g,"'"):"":c},stripPref:function(c,e){var d=a.jgrid.type(c);if("string"===d||"number"===d)c=String(c),e=""!==c?String(e).replace(String(c),""):e;return e},stripScript:function(c){return c.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi," ")},useJSON:!0,runCode:function(c){return Function('"use strict";return ('+c+")")()},parse:function(c){"while(1);"===c.slice(0,9)&&(c=
c.slice(9));"/*"===c.slice(0,2)&&(c=c.slice(2,c.length-2));c||="{}";return!0===a.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(c):a.jgrid.runCode(c)},dateToOADate:function(c){var e=new Date(c),d=Math.round((e.setHours(0,0,0,0)-new Date(1899,11,30))/864E5);c=(Math.abs((c-e)%864E5)/864E5).toFixed(10);return d+c.slice(1)},parseDate:function(c,e,d,f){var h=RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),g="string"===typeof e?e.match(h):null;h=function(n,
x){n=String(n);for(x=parseInt(x,10)||2;n.length<x;)n="0"+n;return n};var b={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},k=0,l;k=function(n,x){0===n?12===x&&(x=0):12!==x&&(x+=12);return x};var m=0;void 0===f&&(f=a.jgrid.getRegional(this,"formatter.date"));void 0===f&&(f={});void 0===f.parseRe&&(f.parseRe=/[#%\\\/:_;.,\t\s-]/);void 0===f.AmPm&&(f.AmPm=["am","pm","AM","PM"]);f.masks&&f.masks.hasOwnProperty(c)&&(c=f.masks[c]);if(e&&!a.jgrid.isNull(e))if(isNaN(e-0)||"u"!==String(c).toLowerCase())if(e.constructor===
Date)k=e,f.validate=!1;else if(null!==g)k=new Date(parseInt(g[1],10)),g[3]&&(m=60*Number(g[5])+Number(g[6]),m*="-"===g[4]?1:-1,m-=k.getTimezoneOffset(),k.setTime(Number(Number(k)+6E4*m))),f.validate=!1;else{"ISO8601Long"===f.srcformat&&"Z"===e.charAt(e.length-1)&&(m-=(new Date).getTimezoneOffset());e=String(e).replace(/T/g,"#").replace(/\t/,"%").split(f.parseRe);c=c.replace(/T/g,"#").replace(/\t/,"%").split(f.parseRe);var q=0;for(l=c.length;q<l;q++){switch(c[q]){case "M":g=a.inArray(e[q],f.monthNames);
-1!==g&&12>g&&(e[q]=g+1,b.m=e[q]);break;case "F":g=a.inArray(e[q],f.monthNames,12);-1!==g&&11<g&&(e[q]=g+1-12,b.m=e[q]);break;case "n":c[q]="m";break;case "j":c[q]="d";break;case "a":g=a.inArray(e[q],f.AmPm);-1!==g&&2>g&&e[q]===f.AmPm[g]&&(e[q]=g,b.h=k(e[q],b.h));break;case "A":g=a.inArray(e[q],f.AmPm);-1!==g&&1<g&&e[q]===f.AmPm[g]&&(e[q]=g-2,b.h=k(e[q],b.h));break;case "g":b.h=parseInt(e[q],10)}void 0!==e[q]&&(b[c[q].toLowerCase()]=parseInt(e[q],10))}b.f&&(b.m=b.f);if(0===b.m&&0===b.y&&0===b.d)return"&#160;";
b.m=parseInt(b.m,10)-1;k=b.y;70<=k&&99>=k?b.y=1900+b.y:0<=k&&69>=k&&(b.y=2E3+b.y);k=new Date(b.y,b.m,b.d,b.h,b.i,b.s,b.u);0!==m&&k.setTime(Number(Number(k)+6E4*m))}else k=new Date(1E3*parseFloat(e)),f.validate=!1;else k=new Date(b.y,b.m,b.d,b.h,b.i,b.s,b.u);if(f&&!0===f.validate)return d=new Date(b.y,+b.m,b.d,b.h,b.i),!!+d&&d.getDate()===b.d&&d.getHours()===b.h&&d.getMinutes()===b.i;f.userLocalTime&&0===m&&(m-=(new Date).getTimezoneOffset(),0!==m&&k.setTime(Number(Number(k)+6E4*m)));if(void 0===d)return k;
f.masks&&f.masks.hasOwnProperty(d)?d=f.masks[d]:d||="Y-m-d";b=k.getHours();c=k.getMinutes();e=k.getDate();m=k.getMonth()+1;g=k.getTimezoneOffset();q=k.getSeconds();l=k.getMilliseconds();var r=k.getDay(),p=k.getFullYear(),v=(r+6)%7+1,t=(new Date(p,m-1,e)-new Date(p,0,1))/864E5,u={d:h(e),D:f.dayNames[r],j:e,l:f.dayNames[r+7],N:v,S:f.S(e),w:r,z:t,W:5>v?Math.floor((t+v-1)/7)+1:Math.floor((t+v-1)/7)||(4>((new Date(p-1,0,1)).getDay()+6)%7?53:52),F:f.monthNames[m-1+12],m:h(m),M:f.monthNames[m-1],n:m,t:"?",
L:"?",o:"?",Y:p,y:String(p).substring(2),a:12>b?f.AmPm[0]:f.AmPm[1],A:12>b?f.AmPm[2]:f.AmPm[3],B:"?",g:b%12||12,G:b,h:h(b%12||12),H:h(b),i:h(c),s:h(q),u:l,e:"?",I:"?",O:(0<g?"-":"+")+h(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),P:(0<g?"-":"+")+function(n,x,w){n=String(n);return n.slice(0,x)+w+n.slice(x)}(h(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),-2,":"),T:(String(k).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||
[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(k/1E3)};return d.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return u.hasOwnProperty(n)?u[n]:n.substring(1)})},jqID:function(c){return String(c).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(c){return(c||a.jgrid.uidPref)+a.jgrid.guid++},getAccessor:function(c,e){var d=[],f;if("function"===typeof e)return e(c);var h=c[e];if(void 0===h)try{if("string"===typeof e&&
(d=e.split(".")),f=d.length)for(h=c;h&&f--;){var g=d.shift();h=h[g]}}catch(b){}return h},getXmlData:function(c,e,d){var f="string"===typeof e?e.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof e)return e(c);if(f&&f[2])return f[1]?a(f[1],c).attr(f[2]):a(c).attr(f[2]);c=a(e,c);return d?c:0<c.length?a(c).text():void 0},cellWidth:function(){var c=a("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),
e=c.appendTo("body").find("td").width();c.remove();return.1<Math.abs(e-5)},isLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(c){return!1}},getRegional:function(c,e,d){var f;if(void 0!==d)return d;c.p&&c.p.regional&&a.jgrid.regional&&(f=a.jgrid.getAccessor(a.jgrid.regional[c.p.regional]||{},e));void 0===f&&(f=a.jgrid.getAccessor(a.jgrid,e));return f},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)?
!0:!1}catch(c){return!1}},cell_width:!0,scrollbarWidth:function(){var c=a('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');a("body").append(c);var e=a("div",c).innerWidth();c.css("overflow-y","scroll");var d=a("div",c).innerWidth();a(c).remove();return 0>e-d?18:e-d},scrollbarHeight:function(){var c=a('<div style="width:50px;overflow-x:scroll;position:absolute;top:-200px;left:-200px;"<span>1234567890</span></div>');a("body").append(c);
var e=a(c).outerHeight(),d=a(c)[0].scrollHeight;a(c).remove();return 0>e-d?18:e-d},ajaxOptions:{},from:function(c){var e=this;return new function(d,f){"string"===typeof d&&(d=a.data(d));var h=this,g=d,b=!0,k=!1,l=f,m=/[\$,%]/g,q=null,r=null,p=0,v=!1,t="",u=[],n=!0;if("object"===typeof d&&d.push)0<d.length&&(n="object"!==typeof d[0]?!1:!0);else throw"data provides is not an array";this._hasData=function(){return null===g?!1:0===g.length?!1:!0};this._getStr=function(x){var w=[];k&&w.push("$.jgrid.trim(");
w.push("String("+x+")");k&&w.push(")");b||w.push(".toLowerCase()");return w.join("")};this._strComp=function(x){return"string"===typeof x?".toString()":""};this._group=function(x,w){return{field:x.toString(),unique:w,items:[]}};this._toStr=function(x){k&&(x=a.jgrid.trim(x));x=x.toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"');return b?x:x.toLowerCase()};this._funcLoop=function(x){var w=[];a.each(g,function(A,H){w.push(x(H))});return w};this._append=function(x){var w;l=null===l?"":l+(""===t?" && ":
t);for(w=0;w<p;w++)l+="(";v&&(l+="!");l+="("+x+")";v=!1;t="";p=0};this._setCommand=function(x,w){q=x;r=w};this._resetNegate=function(){v=!1};this._repeatCommand=function(x,w){return null===q?h:null!==x&&null!==w?q(x,w):null!==r&&n?q(r,x):q(x)};this._equals=function(x,w){return 0===h._compare(x,w,1)};this._compare=function(x,w,A){var H=Object.prototype.toString;void 0===A&&(A=1);void 0===x&&(x=null);void 0===w&&(w=null);if(null===x&&null===w)return 0;if(null===x&&null!==w)return 1;if(null!==x&&null===
w)return-1;if("[object Date]"===H.call(x)&&"[object Date]"===H.call(w)||"number"===typeof x&&"number"===typeof w)return x>w?A:x<w?-A:0;x=String(x).localeCompare(String(w));return 0>x?-A:0<x?A:0};this._performSort=function(){0!==u.length&&(g=h._doSort(g,0))};this._doSort=function(x,w){var A=u[w].by,H=u[w].dir,F=u[w].type,B=u[w].datefmt,E=u[w].sfunc;if(w===u.length-1)return h._getOrder(x,A,H,F,B,E);w++;x=h._getGroup(x,A,H,F,B);A=[];for(H=0;H<x.length;H++)for(B=h._doSort(x[H].items,w),F=0;F<B.length;F++)A.push(B[F]);
return A};this._getOrder=function(x,w,A,H,F,B){var E=[],R=[],z="a"===A?1:-1,O;void 0===H&&(H="text");var U="float"===H||"number"===H||"currency"===H||"numeric"===H?function(K){K=parseFloat(String(K).replace(m,""));return isNaN(K)?Number.NEGATIVE_INFINITY:K}:"int"===H||"integer"===H?function(K){return K?parseFloat(String(K).replace(m,"")):Number.NEGATIVE_INFINITY}:"date"===H||"datetime"===H?function(K){return a.jgrid.parseDate.call(e,F,K).getTime()}:a.jgrid.isFunction(H)?H:function(K){K=K?a.jgrid.trim(String(K)):
"";return b?K:K.toLowerCase()};a.each(x,function(K,ba){O=""!==w?a.jgrid.getAccessor(ba,w):ba;void 0===O&&(O="");O=U(O,ba);R.push({vSort:O,index:K})});a.jgrid.isFunction(B)?R.sort(function(K,ba){return B.call(this,K.vSort,ba.vSort,z,K,ba)}):R.sort(function(K,ba){return h._compare(K.vSort,ba.vSort,z)});H=0;for(var S=x.length;H<S;)A=R[H].index,E.push(x[A]),H++;return E};this._getGroup=function(x,w,A,H,F){var B=[],E=null,R=null,z;a.each(h._getOrder(x,w,A,H,F),function(O,U){z=a.jgrid.getAccessor(U,w);
a.jgrid.isNull(z)&&(z="");h._equals(R,z)||(R=z,null!==E&&B.push(E),E=h._group(w,z));E.items.push(U)});null!==E&&B.push(E);return B};this.ignoreCase=function(){b=!1;return h};this.useCase=function(){b=!0;return h};this.trim=function(){k=!0;return h};this.noTrim=function(){k=!1;return h};this.execute=function(){var x=l,w=[];if(null===x)return h;const A=RegExp("a_d_d_t_h_i_s","g");a.each(g,function(){a.jgrid.runCode.call(e,x.replace(A,JSON.stringify(this)))&&w.push(this)});g=w;return h};this.data=function(){return g};
this.select=function(x){h._performSort();if(!h._hasData())return[];h.execute();if(a.jgrid.isFunction(x)){var w=[];a.each(g,function(A,H){w.push(x(H))});return w}return g};this.hasMatch=function(){if(!h._hasData())return!1;h.execute();return 0<g.length};this.andNot=function(x,w,A){v=!v;return h.and(x,w,A)};this.orNot=function(x,w,A){v=!v;return h.or(x,w,A)};this.not=function(x,w,A){return h.andNot(x,w,A)};this.and=function(x,w,A){t=" && ";return void 0===x?h:h._repeatCommand(x,w,A)};this.or=function(x,
w,A){t=" || ";return void 0===x?h:h._repeatCommand(x,w,A)};this.orBegin=function(){p++;return h};this.orEnd=function(){null!==l&&(l+=")");return h};this.isNot=function(x){v=!v;return h.is(x)};this.is=function(x){h._append("a_d_d_t_h_i_s."+x);h._resetNegate();return h};this._compareValues=function(x,w,A,H,F){var B=n?"jQuery.jgrid.getAccessor(a_d_d_t_h_i_s,'"+w+"')":"a_d_d_t_h_i_s";void 0===A&&(A=null);var E=A,R=void 0===F.stype?"text":F.stype;if(null!==A)switch(R){case "int":case "integer":E=isNaN(Number(E))||
""===E?Number.NEGATIVE_INFINITY:E;B="parseInt("+B+",10)";E="parseInt("+E+",10)";break;case "float":case "number":case "numeric":E=String(E).replace(m,"");E=isNaN(Number(E))||""===E?Number.NEGATIVE_INFINITY:Number(E);B="parseFloat("+B+")";E="parseFloat("+E+")";break;case "date":case "datetime":E=String(a.jgrid.parseDate.call(e,F.srcfmt||"Y-m-d",E).getTime());B='jQuery.jgrid.parseDate.call(jQuery("#'+a.jgrid.jqID(e.p.id)+'")[0],"'+F.srcfmt+'",'+B+").getTime()";break;default:B=h._getStr(B),E=h._getStr('"'+
h._toStr(E)+'"')}h._append(B+" "+H+" "+E);h._setCommand(x,w);h._resetNegate();return h};this.equals=function(x,w,A){return h._compareValues(h.equals,x,w,"==",A)};this.notEquals=function(x,w,A){return h._compareValues(h.equals,x,w,"!==",A)};this.isNull=function(x,w,A){return h._compareValues(h.equals,x,null,"===",A)};this.greater=function(x,w,A){return h._compareValues(h.greater,x,w,">",A)};this.less=function(x,w,A){return h._compareValues(h.less,x,w,"<",A)};this.greaterOrEquals=function(x,w,A){return h._compareValues(h.greaterOrEquals,
x,w,">=",A)};this.lessOrEquals=function(x,w,A){return h._compareValues(h.lessOrEquals,x,w,"<=",A)};this.startsWith=function(x,w){n?h._append(h._getStr("jQuery.jgrid.getAccessor(a_d_d_t_h_i_s,'"+x+"')")+".startsWith("+h._getStr('"'+h._toStr(w)+'"')+")"):h._append(h._getStr("a_d_d_t_h_i_s")+".startsWith("+h._getStr('"'+h._toStr(x)+'"')+")");h._setCommand(h.startsWith,x);h._resetNegate();return h};this.endsWith=function(x,w){n?h._append(h._getStr("jQuery.jgrid.getAccessor(a_d_d_t_h_i_s,'"+x+"')")+".endsWith("+
h._getStr('"'+h._toStr(w)+'"')+")"):h._append(h._getStr("a_d_d_t_h_i_s")+".endsWith("+h._getStr('"'+h._toStr(x)+'"')+")");h._setCommand(h.endsWith,x);h._resetNegate();return h};this.contains=function(x,w){n?h._append(h._getStr("jQuery.jgrid.getAccessor(a_d_d_t_h_i_s,'"+x+"')")+'.indexOf("'+h._toStr(w)+'",0) > -1'):h._append(h._getStr("a_d_d_t_h_i_s")+'.indexOf("'+h._toStr(x)+'",0) > -1');h._setCommand(h.contains,x);h._resetNegate();return h};this.user=function(x,w,A){var H='$("#'+e.p.id+'")[0]';h._append(H+
".p.customFilterDef."+x+".action.call("+H+' ,{rowItem:a_d_d_t_h_i_s, searchName:"'+w+'",searchValue:"'+A+'"})');h._setCommand(h.user,w);h._resetNegate();return h};this.inData=function(x,w,A){w=void 0===w?"":h._getStr('"'+h._toStr(w)+'"');n?h._append(w+".split(',').indexOf( jQuery.jgrid.getAccessor(a_d_d_t_h_i_s,'"+x+"') ) > -1"):h._append(w+".split(',').indexOf(a_d_d_t_h_i_s."+x+") > -1");h._setCommand(h.inData,x);h._resetNegate();return h};this.groupBy=function(x,w,A,H){return h._hasData()?h._getGroup(g,
x,w,A,H):null};this.orderBy=function(x,w,A,H,F){w=a.jgrid.isNull(w)?"a":a.jgrid.trim(w.toString().toLowerCase());a.jgrid.isNull(A)&&(A="text");a.jgrid.isNull(H)&&(H="Y-m-d");a.jgrid.isNull(F)&&(F=!1);if("desc"===w||"descending"===w)w="d";if("asc"===w||"ascending"===w)w="a";u.push({by:x,dir:w,type:A,datefmt:H,sfunc:F});return h};return h}(c,null)},getMethod:function(c){return this.getAccessor(a.fn.jqGrid,c)},extend:function(c){a.extend(a.fn.jqGrid,c);this.no_legacy_api||a.fn.extend(c)},clearBeforeUnload:function(c){c=
a("#"+a.jgrid.jqID(c))[0];if(c.grid){var e=c.grid;a.jgrid.isFunction(e.emptyRows)&&e.emptyRows.call(c,!0,!0);a(document).off("mouseup.jqGrid"+c.p.id);a(e.hDiv).off("mousemove");a(c).off();var d,f=e.headers.length,h="formatCol sortData updatepager refreshIndex setHeadCheckBox constructTr formatter addXmlData addJSONData grid p addLocalData".split(" ");for(d=0;d<f;d++)e.headers[d].el=null;for(d in e)e.hasOwnProperty(d)&&(e[d]=null);for(d in c.p)c.p.hasOwnProperty(d)&&(c.p[d]=Array.isArray(c.p[d])?[]:
null);f=h.length;for(d=0;d<f;d++)c.hasOwnProperty(h[d])&&(c[h[d]]=null,delete c[h[d]])}},gridUnload:function(c){if(c){c=a.jgrid.trim(c);0===c.indexOf("#")&&(c=c.substring(1));var e=a("#"+a.jgrid.jqID(c))[0];if(e.grid){var d=a(e).attr("id"),f=a(e).attr("class");e.p.pager&&a(e.p.pager).off().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var h=document.createElement("table");h.className=f;f=a.jgrid.jqID(e.id);a(h).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+
f);1===a(e.p.pager).parents("#gbox_"+f).length&&a(e.p.pager).insertBefore("#gbox_"+f);a.jgrid.clearBeforeUnload(c);a("#gbox_"+f).remove();a(h).attr({id:d});a("#alertmod_"+a.jgrid.jqID(c)).remove()}}},gridDestroy:function(c){if(c){c=a.jgrid.trim(c);0===c.indexOf("#")&&(c=c.substring(1));var e=a("#"+a.jgrid.jqID(c))[0];if(e&&e.grid){e.p.pager&&a(e.p.pager).remove();try{a.jgrid.clearBeforeUnload(c),a("#gbox_"+a.jgrid.jqID(c)).remove()}catch(d){}}}},isElementInViewport:function(c){c=c.getBoundingClientRect();
return 0<=c.left&&c.right<=(window.innerWidth||document.documentElement.clientWidth)},getTextWidth:function(c,e){if(!jQuery._cacheCanvas){var d=document.createElement("canvas");document.createDocumentFragment().appendChild(d);jQuery._cacheCanvas=d.getContext("2d")}e&&(jQuery._cacheCanvas.font=e);return jQuery._cacheCanvas.measureText(a.jgrid.stripHtml(c)).width},getFont:function(c){c=window.getComputedStyle(c,null);return c.getPropertyValue("font-style")+" "+c.getPropertyValue("font-variant")+" "+
c.getPropertyValue("font-weight")+" "+c.getPropertyValue("font-size")+" "+c.getPropertyValue("font-family")},setSelNavIndex:function(c,e){var d=a(".ui-pg-button",c.p.pager);a.each(d,function(f,h){if(e===h)return c.p.navIndex=f,!1});a(e).attr("tabindex","0")},splitSearch:function(c){var e='{"groupOp":"'+c.mergeOper+'","groups":[',d=0,f;for(f in c)c.hasOwnProperty(f)&&"mergeOper"!==f&&(e+=null!==c[f]&&""!==c[f]&&"boolean"!==typeof c[f]?c[f]+",":"",d++);-1===e.indexOf("[",e.length-1)&&(e=e.slice(0,-1));
return e+"]}"},getElemByAttrVal:function(c,e,d,f){"boolean"!==typeof f&&(f=!1);var h=Array.isArray(c)?c.length:0,g=0,b={},k=-1;if(0<h)for(;g<h;){if(c[g][e]===d){b=c[g];k=g;break}g++}return f?k:b},searchColOnEnter:function(c,e,d,f){function h(v){var t=a(g).jqGrid("getRowData",v),u=[];if(t&&m){for(var n in t)if(!r.has(n)&&t.hasOwnProperty(n)){var x=m;k.useCase||(t[n]=t[n].toLowerCase(),x=m.toLowerCase());if(k.aOperands.includes(k.operand))switch(k.operand){case "cn":l=-1!==t[n].search(x);break;case "eq":l=
t[n]===x;break;case "ne":l=t[n]!==x;break;case "bw":l=t[n].substring(0,x.length)===x;break;case "ew":var w=t[n].length;l=t[n].substring(w-x.length,w)===x}l&&u.push(n)}g.p._results[v]={v:m,r:u}}else t&&""===m&&g.p._results[v]&&delete g.p._results[v]}var g=a("#"+c)[0],b;if(g.grid){var k=g.p.searchColOptions,l;c=!1;try{var m=d.value}catch(v){m=""}g.p.frozenColumns&&(a(g).jqGrid("destroyFrozenColumns"),c=!0);if(!g.p._ftsc){g.p._ftsc=!0;g.p._fthc=[];g.p._avc=[];for(b=0;b<g.p.colModel.length;b++)g.p.colModel[b].hidden?
g.p._fthc.push(g.p.colModel[b].name):g.p._avc.push(g.p.colModel[b].name);g.p._results={}}var q=[...(new Set([...k._cnth,...k.visibleColumns]))],r=new Set([...q,...g.p._fthc]);a(g).jqGrid("hideCol",g.p._avc.filter(function(v){return!q.includes(v)}));if(!g.grid||null!==e&&void 0!==e)!g.grid||null===e&&void 0===e||h(e);else for(var p in g.p._results)g.p._results.hasOwnProperty(p)&&(m=g.p._results[p].v,h(p));e=[];d=0;for(b in g.p._results)"OR"===k.searchOp.toUpperCase()?e=[...(new Set([...e,...g.p._results[b].r]))]:
"AND"===k.searchOp.toUpperCase()&&(e=0===d?g.p._results[b].r:e.filter(function(v){return g.p._results[b].r.includes(v)}),d++);a.isEmptyObject(g.p._results)&&(e=g.p._avc);e=e.concat(q);a(g).jqGrid("showCol",e);c&&a(g).jqGrid("setFrozenColumns")}},searchColOnKey:function(c,e,d,f){switch(f.key){case "ArrowRight":case "ArrowDown":case "ArrowUp":case "ArrowLeft":case "PageUp":case "PageDown":case "Alt":case "Control":case "Tab":case "Escape":case "Shift":return}setTimeout(function(){a.jgrid.searchColOnEnter(c,
e,d,f)},50)},comboGrid:function(c,e,d){var f=a.jgrid.randId("combo"),h="div"+f,g=d.datatype;d.datatype="local";d.onSelectRow=function(k){k=a("#"+f).jqGrid("getRowData",k);a.isEmptyObject(k)||(k=a.jgrid.isFunction(e.return_fld)?e.return_fld.call(this,k):k[e.return_fld],a("#"+c).val(k),a("#"+h).hide())};d.data=[];d.scrollrows=!0;a("body").append("<div id='"+h+"'><table id='"+f+"'></table>");d.pager&&a("body").append("<div id='"+d.pager+"'></div>");a("body").append("</div>");a("#"+f).jqGrid(d);a("#"+
f).jqGrid("bindKeys",{onSelectRow:!1});a("#"+c).attr("autocomplete","off").data("comboGrid",{grid:f,divgrid:h});var b=document.getElementById(c).getBoundingClientRect();a("#"+h).css({"background-color":"inherit",position:"absolute",top:b.top+50+"px",left:b.left+10+"px",zIndex:2E4}).hide();a("#"+c).on("keydown",function(k){var l=a(this).data("comboGrid").grid,m=a(this).data("comboGrid").divgrid,q=this;a("#"+m).is(":hidden")&&(b=document.getElementById(c).getBoundingClientRect(),a("#"+m).show().css({top:b.top+
50+"px",left:b.left+10+"px"}));if(-1<a.inArray(k.key,"Enter Escape ArrowUp ArrowDown ArrowLeft ArrowRight".split(" "))){var r=a.Event("keydown");switch(k.key){case "Enter":k=a("#"+l).jqGrid("getRowData",a("#"+l)[0].p.selrow);a.isEmptyObject(k)||(this.value=k[e.return_fld],a("#"+m).hide());break;case "Escape":a("#"+m).hide();break;case "ArrowUp":r.keyCode=38;a("#"+l).trigger(r);break;case "ArrowDown":r.keyCode=40,a("#"+l).trigger(r)}}else r&&clearTimeout(r),r=setTimeout(function(){a("#"+l).jqGrid("filterInput",
q.value,{defaultSearch:e.defaultSearch||"bw",selectFirstFound:!0})},100)});e.data&&("string"===typeof e.data?a("#"+f).jqGrid("setGridParam",{url:e.data}):Array.isArray(e.data)&&a("#"+f).jqGrid("setGridParam",{data:e.data}));a("#"+f).jqGrid("setGridParam",{datatype:g})},inColumnHeader:function(c,e){var d=e.length,f;for(f=0;f<d;f++)if(e[f].startColumnName===c)return f;return-1},isServiceCol:function(c){return["cb","rn","subgrid","sc"].includes(c)},normalizeDbData:function(c,e){Array.isArray(c)||(c=
[c]);for(let d=0;d<c.length;d++)for(let f=0;f<e.length;f++){let h=e[f];if(!a.jgrid.isServiceCol(h.name)&&c[d].hasOwnProperty(h.name))switch(h.sorttype||h.stype||h.formatter||"text"){case "int":case "integer":c[d][h.name]=parseInt(c[d][h.name],10);break;case "float":case "number":case "numeric":case "currency":c[d][h.name]=parseFloat(c[d][h.name]);break;case "date":case "datetime":h.formatoptions.reformatAfterEdit=!0,c[d][h.name]=a.jgrid.parseDate.call(this,h.formatoptions.newformat,c[d][h.name],h.formatoptions.srcformat||
"Y-m-d")}}return c},isVisible:function(c){return!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length)},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content",shadow:""},
base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",stripedTable:"ui-jqgrid-table-striped",footerTable:"",footerBox:"ui-widget-content",headerRowTable:"",headerRowBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",
multiBox:"",searchBox:"ui-widget-content ui-corner-all",searchSelect:"ui-widget-content ui-corner-all",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",
icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",body:"ui-widget-content",footer:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all",selectClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",
selectClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{labelClass:"",inputClass:"ui-widget-content ui-corner-all",selectClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",
icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",
icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",
filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_search_menu:"ui-icon-grip-dotted-vertical",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4",icon_new_item:"ui-icon-newwin",icon_toolbar_menu:"ui-icon-document",icon_group_op:"ui-icon-bullet",
icon_oper_op:"ui-icon-transfer-e-w",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_close:"ui-icon-close"},clipboard:{icon_copy:"ui-icon-copy",icon_paste:"ui-icon-clipboard",icon_paste_add:"ui-icon-plusthick",icon_repeat_row:"ui-icon-arrow-1-s",icon_repeat_col:"ui-icon-arrow-1-e",icon_undo:"ui-icon-arrowreturn-1-w",icon_cancel:"ui-icon-cancel"}},Bootstrap4:{common:{disabled:"ui-disabled",highlight:"table-success",hover:"table-active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",overlay:"ui-overlay",
active:"active",error:"alert-danger",button:"btn btn-light",content:"",shadow:"shadow p-3 mb-5 bg-white rounded"},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerRowTable:"table table-bordered",headerRowBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",searchBox:"form-control",
searchSelect:"form-control form-control-sm",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:""},modal:{modal:"modal",content:"modal-content",header:"modal-header",title:"modal-title",body:"modal-body",footer:"modal-footer",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"oi-circle-x",icon_resizable:"oi-circle-x"},celledit:{inputClass:"form-control",selectClass:"form-control"},inlinedit:{inputClass:"form-control",selectClass:"form-control"},
formedit:{labelClass:"form-label",inputClass:"form-control",selectClass:"form-control"},navigator:{},grouping:{},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:""},subgrid:{},treegrid:{},fmatter:{},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control"}},Bootstrap5:{common:{disabled:"ui-disabled",highlight:"table-success",hover:"table-active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",overlay:"ui-overlay",
active:"active",error:"alert alert-danger",button:"btn btn-light",content:"",shadow:"shadow p-3 mb-5 bg-body rounded"},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerRowTable:"table table-bordered",headerRowBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",
searchBox:"form-control",searchSelect:"form-select",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-select",pgButtonBox:""},modal:{modal:"modal",header:"modal-header",title:"modal-title",content:"modal-content",body:"modal-body",footer:"modal-footer",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"oi-circle-x",icon_resizable:"oi-circle-x"},celledit:{inputClass:"form-control",selectClass:"form-select"},inlinedit:{inputClass:"form-control",selectClass:"form-select"},
formedit:{labelClass:"form-label",inputClass:"form-control",selectClass:"form-select"},navigator:{},grouping:{},filter:{table_widget:"table table-sm",srSelect:"form-select",srInput:"form-control",menu_widget:""},subgrid:{},treegrid:{},fmatter:{},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-select",filter_input:"form-control"}}},iconSet:{Iconic:{common:{icon_base:"oi"},base:{icon_first:"oi-media-step-backward",icon_prev:"oi-caret-left",icon_next:"oi-caret-right",icon_end:"oi-media-step-forward",
icon_asc:"oi-caret-top",icon_desc:"oi-caret-bottom",icon_caption_open:"oi-collapse-up",icon_caption_close:"oi-expand-down"},modal:{icon_close:"oi-circle-x",icon_resizable:"oi-plus"},inlinedit:{icon_edit_nav:"oi-pencil",icon_add_nav:"oi-plus",icon_save_nav:"oi-check",icon_cancel_nav:"oi-action-undo"},formedit:{icon_prev:"oi-chevron-left",icon_next:"oi-chevron-right",icon_save:"oi-check",icon_close:"oi-ban",icon_del:"oi-delete",icon_cancel:"oi-ban"},navigator:{icon_edit_nav:"oi-pencil",icon_add_nav:"oi-plus",
icon_del_nav:"oi-trash",icon_search_nav:"oi-zoom-in",icon_refresh_nav:"oi-reload",icon_view_nav:"oi-browser",icon_newbutton_nav:"oi-book"},grouping:{icon_plus:"oi-caret-right",icon_minus:"oi-caret-bottom"},filter:{icon_search:"oi-magnifying-glass",icon_reset:"oi-reload",icon_query:"oi-comment-square"},subgrid:{icon_plus:"oi-chevron-right",icon_minus:"oi-chevron-bottom",icon_open:"oi-expand-left"},treegrid:{icon_plus:"oi-plus",icon_minus:"oi-minus",icon_leaf:"oi-media-record"},fmatter:{icon_edit:"oi-pencil",
icon_add:"oi-plus",icon_save:"oi-check",icon_cancel:"oi-action-undo",icon_del:"oi-trash"},colmenu:{icon_menu:"oi-list",icon_sort_asc:"oi-sort-ascending",icon_sort_desc:"oi-sort-descending",icon_columns:"oi-project",icon_filter:"oi-magnifying-glass",icon_group:"oi-list-rich",icon_freeze:"oi-spreadsheet",icon_move:"oi-move",icon_new_item:"oi-external-link",icon_toolbar_menu:"oi-menu",icon_group_op:"",icon_oper_op:"",icon_reset:"oi-reload",icon_close:"oi-ban"},clipboard:{icon_copy:"oi-copy-outline",
icon_paste:"oi-clipboard-outline",icon_paste_add:"oi-download-outline",icon_repeat_row:"oi-arrow-down-outline",icon_repeat_col:"oi-arrow-forward-outline",icon_undo:"oi-arrow-undo-outline",icon_cancel:"oi-exit-outline"}},Octicons:{common:{icon_base:"octicon"},base:{icon_first:"octicon-triangle-left",icon_prev:"octicon-chevron-left",icon_next:"octicon-chevron-right",icon_end:"octicon-triangle-right",icon_asc:"octicon-triangle-up",icon_desc:"octicon-triangle-down",icon_caption_open:"octicon-triangle-up",
icon_caption_close:"octicon-triangle-down"},modal:{icon_close:"octicon-x",icon_resizable:"octicon-plus"},inlinedit:{icon_edit_nav:"octicon-pencil",icon_add_nav:"octicon-plus",icon_save_nav:"octicon-check",icon_cancel_nav:"octicon-circle-slash"},formedit:{icon_prev:"octicon-chevron-left",icon_next:"octicon-chevron-right",icon_save:"octicon-check",icon_close:"octicon-x",icon_del:"octicon-trashcan",icon_cancel:"octicon-circle-slash"},navigator:{icon_edit_nav:"octicon-pencil",icon_add_nav:"octicon-plus",
icon_del_nav:"octicon-trashcan",icon_search_nav:"octicon-search",icon_refresh_nav:"octicon-sync",icon_view_nav:"octicon-file",icon_newbutton_nav:"octicon-link-external"},grouping:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down"},filter:{icon_search:"octicon-search",icon_reset:"octicon-sync",icon_query:"octicon-file-code"},subgrid:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down",icon_open:"octicon-git-merge"},treegrid:{icon_plus:"octicon-triangle-right",
icon_minus:"octicon-triangle-down",icon_leaf:"octicon-primitive-dot"},fmatter:{icon_edit:"octicon-pencil",icon_add:"octicon-plus",icon_save:"octicon-check",icon_cancel:"octicon-circle-slash",icon_del:"octicon-trashcan"},colmenu:{icon_menu:"octicon-grabber",icon_sort_asc:"octicon-arrow-up",icon_sort_desc:"octicon-arrow-down",icon_columns:"octicon-repo",icon_filter:"octicon-search",icon_group:"octicon-list-unordered",icon_freeze:"octicon-repo",icon_move:"octicon-git-compare",icon_new_item:"octicon-link-external",
icon_toolbar_menu:"octicon-three-bars",icon_group_op:"",icon_oper_op:"",icon_reset:"octicon-sync",icon_close:"octicon-x"},clipboard:{icon_copy:"octicon-copy",icon_paste:"octicon-paste",icon_paste_add:"octicon-north-star",icon_repeat_row:"octicon-move-to-bottom",icon_repeat_col:"octicon-move-to-end",icon_undo:"octicon-undo",icon_cancel:"octicon-x"}},fontAwesome:{common:{icon_base:"fas"},base:{icon_first:"fa-step-backward",icon_prev:"fa-backward",icon_next:"fa-forward",icon_end:"fa-step-forward",icon_asc:"fa-caret-up",
icon_desc:"fa-caret-down",icon_caption_open:"fa-caret-square-up",icon_caption_close:"fa-caret-square-down "},modal:{icon_close:"fa-window-close",icon_resizable:"fa-plus"},inlinedit:{icon_edit_nav:"fa-edit",icon_add_nav:"fa-plus",icon_save_nav:"fa-save",icon_cancel_nav:"fa-replay"},formedit:{icon_prev:"fa-chevron-left",icon_next:"fa-chevron-right",icon_save:"fa-save",icon_close:"fa-window-close",icon_del:"fa-trash",icon_cancel:"fa-times"},navigator:{icon_edit_nav:"fa-edit",icon_add_nav:"fa-plus",icon_del_nav:"fa-trash",
icon_search_nav:"fa-search",icon_refresh_nav:"fa-sync",icon_view_nav:"fa-sticky-note",icon_newbutton_nav:"fa-external-link-alt"},grouping:{icon_plus:"fa-caret-right",icon_minus:"fa-caret-down"},filter:{icon_search:"fa-search",icon_reset:"fa-reply",icon_query:"fa-pen-square "},subgrid:{icon_plus:"fa-arrow-circle-right",icon_minus:"fa-arrow-circle-down",icon_open:"fa-ellipsis-v"},treegrid:{icon_plus:"fa-plus",icon_minus:"fa-minus",icon_leaf:"fa-circle"},fmatter:{icon_edit:"fa-edit",icon_add:"fa-plus",
icon_save:"fa-save",icon_cancel:"fa-undo",icon_del:"fa-trash"},colmenu:{icon_menu:"fa-ellipsis-v",icon_sort_asc:"fa-sort-amount-up",icon_sort_desc:"fa-sort-amount-down",icon_columns:"fa-columns",icon_filter:"fa-filter",icon_group:"fa-object-group",icon_freeze:"fa-snowflake",icon_move:"fa-expand-arrows-alt",icon_new_item:"fa-external-link-alt",icon_toolbar_menu:"fa-list",icon_group_op:"",icon_oper_op:"",icon_reset:"fa-reply",icon_close:"fa-window-close"},clipboard:{icon_copy:"fa-copy",icon_paste:"fa-paste",
icon_paste_add:"fa-plus",icon_repeat_row:"fa-arrow-down",icon_repeat_col:"fa-arrow-right",icon_undo:"fa-rotate-left",icon_cancel:"fa-xmark"}},Bootstrap5:{common:{icon_base:"bi"},base:{icon_first:"bi-chevron-bar-left",icon_prev:"bi-chevron-left",icon_next:"bi-chevron-right",icon_end:"bi-chevron-bar-right",icon_asc:"bi-caret-up-fill",icon_desc:"bi-caret-down-fill",icon_caption_open:"bi-arrows-collapse",icon_caption_close:"bi-arrows-expand"},modal:{icon_close:"bi-x-lg",icon_resizable:"bi-box-arrow-in-down-right"},
inlinedit:{icon_edit_nav:"bi-pencil-square",icon_add_nav:"bi-plus-square",icon_save_nav:"bi-save",icon_cancel_nav:"bi-x-square"},formedit:{icon_prev:"bi-chevron-left",icon_next:"bi-chevron-right",icon_save:"bi-save",icon_close:"bi-x-square",icon_del:"bi-trash",icon_cancel:"bi-x-octagon"},navigator:{icon_edit_nav:"bi-pencil-square",icon_add_nav:"bi-plus-square",icon_del_nav:"bi-trash",icon_search_nav:"bi-search",icon_refresh_nav:"bi-arrow-clockwise",icon_view_nav:"bi-view-list",icon_newbutton_nav:"bi-window"},
grouping:{icon_plus:"bi-caret-right",icon_minus:"bi-caret-down"},filter:{icon_search:"bi-search",icon_reset:"bi-arrow-clockwise",icon_query:"bi-journal-code"},subgrid:{icon_plus:"bi-chevron-right",icon_minus:"bi-chevron-down",icon_open:"bi-arrow-bar-right"},treegrid:{icon_plus:"bi-plus-square-dotted",icon_minus:"bi-dash-square-dotted",icon_leaf:"bi-circle"},fmatter:{icon_edit:"bi-pencil-square",icon_add:"bi-plus-square",icon_save:"bi-save",icon_cancel:"bi-x-square",icon_del:"bi-trash"},colmenu:{icon_menu:"bi-list",
icon_sort_asc:"bi-sort-alpha-down",icon_sort_desc:"bi-sort-alpha-up",icon_columns:"bi-columns",icon_filter:"bi-search",icon_group:"bi-collection-play",icon_freeze:"bi-layout-text-sidebar-reverse",icon_move:"bi-arrows-move",icon_new_item:"bi-window",icon_toolbar_menu:"bi-card-text",icon_group_op:"",icon_oper_op:"",icon_reset:"bi-arrow-clockwise",icon_close:"bi-x-square"},clipboard:{icon_copy:"bi-clipboard-fill",icon_paste:"bi-clipboard",icon_paste_add:"bi-clipboard-plus",icon_repeat_row:"bi-arrow-bar-down",
icon_repeat_col:"bi-arrow-bar-right",icon_undo:"bi-arrow-counterclockwise",icon_cancel:"bi-x"}}}});a.fn.jqGrid=function(c){if("string"===typeof c){var e=a.jgrid.getMethod(c);if(!e)throw"jqGrid - No such method: "+c;var d=a.makeArray(arguments).slice(1);return e.apply(this,d)}return this.each(function(){function f(y,D,I,C){b.p.multiselect&&b.p.multiboxonly||b.p.multimail?D?a(b).jqGrid("setSelection",y,C,I):b.p.multiboxonly&&b.p.multimail?(a(b).triggerHandler("jqGridSelectRow",[y,!1,I]),b.p.onSelectRow&&
b.p.onSelectRow.call(b,y,!1,I)):(a(b.p.selarrrow).each(function(P,N){(P=a(b).jqGrid("getGridRowById",N))&&a(P).removeClass(u);a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(N))[b.p.useProp?"prop":"attr"]("checked",!1)}),b.p.selarrrow=[],a(b).jqGrid("setSelection",y,C,I)):a(b).jqGrid("setSelection",y,C,I)}if(!this.grid){if(!a.jgrid.isNull(c)&&void 0!==c.data){var h=c.data;c.data=[]}var g=a.extend(!0,{url:"",height:150,defaultColWidth:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,
pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],preserveSelection:!1,savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,
beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,multiboxonly:!1,multimail:!1,multiselectWidth:30,onMultiSleect:null,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",
subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:a.jgrid.scrollbarWidth()+3,cellLayout:5,subGridWidth:20,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,headerrow:!1,userDataOnHeader:!1,hoverrows:!0,viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},
direction:"ltr",toppager:!1,headertitles:!1,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},groupHeaderOn:!1,ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,minGridWidth:100,maxGridWidth:3E3,scroll:!1,scrollTimeout:300,scrollPopUp:!1,scrollTopOffset:0,
scrollLeftOffset:"100%",scrollMaxBuffer:1,storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",iconSet:"Iconic",responsive:!1,forcePgButtons:!1,resizeHeight:!0,restoreCellonFail:!0,editNextRowCell:!1,colFilters:{},colMenu:!1,colMenuCustom:{},colMenuColumnDone:null,colMenuBeforeProcess:null,colSpanHeader:[],treeGrid_bigData:!1,treeGrid_rootParams:{otherData:{}},treeGrid_beforeRequest:null,treeGrid_afterLoadComplete:null,useNameForSearch:!1,formatFooterData:!1,formatHeaderData:!1,mergeSearch:!1,searchModules:{mergeOper:"AND",
filterInput:!0,filterToolbar:!0,searchGrid:!0,colMenuSearch:!0},emptyRecordRow:!0,ariaBody:!1,searchCols:!1,searchColOptions:{colWidth:90,searchOp:"OR",operand:"cn",useCase:!1,colName:"Search Col",colmenu:!0,searchOnEnter:!0,aOperands:["cn","bw","ew","eq","ne"],_cnth:["cb","rn","sc","subgrid","col_name"],visibleColumns:[]},dbconfig:{dbname:"",dbversion:-1,dbtable:"",deleteIfExists:!1,loadIfExists:!1,isKeyInData:!1,dataUrl:"",reader:null,beforeInsertData:null,fetchOptions:{}},isClipboard:!1},a.jgrid.defaults,
c);void 0!==h&&(g.data=h,c.data=h);var b=this,k={headers:[],cols:[],footers:[],hrheaders:[],dragStart:function(y,D,I){var C=a(this.bDiv).offset().left,P=parseInt(g.colModel[y].minResizeWidth?g.colModel[y].minResizeWidth:g.minColWidth,10);isNaN(P)&&(P=33);this.resizing={idx:y,startX:D.pageX,sOL:D.pageX-C,minW:P};this.hDiv.style.cursor="col-resize";this.curGbox=a("#rs_m"+a.jgrid.jqID(g.id),"#gbox_"+a.jgrid.jqID(g.id));this.curGbox.css({display:"block",left:D.pageX-C,top:I[1],height:I[2]});a(b).triggerHandler("jqGridResizeStart",
[D,y]);a.jgrid.isFunction(g.resizeStart)&&g.resizeStart.call(b,D,y);document.onselectstart=function(){return!1}},dragMove:function(y){if(this.resizing){var D=y.pageX-this.resizing.startX;y=this.headers[this.resizing.idx];var I="ltr"===g.direction?y.width+D:y.width-D;if(I>this.resizing.minW)if(this.curGbox.css({left:this.resizing.sOL+D}),!0===g.forceFit){var C=this.headers[this.resizing.idx+g.nv];D="ltr"===g.direction?C.width-D:C.width+D;D>this.resizing.minW&&(y.newWidth=I,C.newWidth=D)}else this.newWidth=
"ltr"===g.direction?g.tblwidth+D:g.tblwidth-D,y.newWidth=I}},dragEnd:function(y,D){this.hDiv.style.cursor="default";void 0===D&&(D=!0);if(this.resizing){var I=this.resizing.idx,C=this.headers[I].newWidth||this.headers[I].width;C=parseFloat(C);this.resizing=!1;a("#rs_m"+a.jgrid.jqID(g.id)).css("display","none");g.colModel[I].width=C;this.headers[I].width=C;this.headers[I].el.style.width=C+"px";this.cols[I].style.width=C+"px";0<this.footers.length&&(this.footers[I].style.width=C+"px");0<this.hrheaders.length&&
(this.hrheaders[I].style.width=C+"px");!0===g.forceFit?(C=this.headers[I+g.nv].newWidth||this.headers[I+g.nv].width,this.headers[I+g.nv].width=C,this.headers[I+g.nv].el.style.width=C+"px",this.cols[I+g.nv].style.width=C+"px",0<this.footers.length&&(this.footers[I+g.nv].style.width=C+"px"),0<this.hrheaders.length&&(this.hrheaders[I+g.nv].style.width=C+"px"),g.colModel[I+g.nv].width=C):(g.tblwidth=this.newWidth||g.tblwidth,a(this.bDiv).find("table").first().css("width",g.tblwidth+"px"),a(this.hDiv).find("table").first().css("width",
g.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,g.footerrow&&(a(this.sDiv).find("table").first().css("width",g.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft),g.headerrow&&(a(this.hrDiv).find("table").first().css("width",g.tblwidth+"px"),this.hrDiv.scrollLeft=this.bDiv.scrollLeft));y&&(a(b).triggerHandler("jqGridResizeStop",[C,I]),a.jgrid.isFunction(g.resizeStop)&&g.resizeStop.call(b,C,I));g.frozenColumns&&D&&I<=g.frozenColCount&&a("#"+a.jgrid.jqID(g.id)).jqGrid("refreshFrozenColumns")}this.curGbox=
null;document.onselectstart=function(){return!0}},populateVisible:function(){k.timer&&clearTimeout(k.timer);k.timer=null;var y=a(k.bDiv).height();if(y){var D=a(k.bDiv).find("table").first(),I;if(D[0].rows.length)try{var C=(I=D[0].rows[1])?a(I).outerHeight()||k.prevRowHeight:k.prevRowHeight}catch(oa){C=k.prevRowHeight}if(C){k.prevRowHeight=C;I=g.rowNum;var P=k.scrollTop=k.bDiv.scrollTop,N=Math.round(D.position().top)-P,aa=N+D.height(),ha=C*I;if(aa<y&&0>=N&&(void 0===g.lastpage||(parseInt((aa+P+ha-
1)/ha,10)||0)<=g.lastpage)){var V=parseInt((y-aa+ha-1)/ha,10)||1;if(0<=aa||2>V){var ca=(Math.round((aa+P)/ha)||0)+1;N=-1}else N=1}if(0<N){ca=(parseInt(P/ha,10)||0)+1;V=(parseInt((P+y)/ha,10)||0)+2-ca;var ja=!0}!V||g.lastpage&&(ca>g.lastpage||1===g.lastpage||ca===g.page&&ca===g.lastpage)||(k.hDiv.loading?k.timer=setTimeout(k.populateVisible,g.scrollTimeout):(g.page=ca,0<g.scrollMaxBuffer&&(0<I&&g.scrollMaxBuffer<I&&(g.scrollMaxBuffer=I+1),g.reccount>g.scrollMaxBuffer-(0<I?I:0)&&(ja=!0)),ja&&(k.selectionPreserver(D[0]),
k.emptyRows.call(D[0],!0,!1)),k.populate(V)),g.scrollPopUp&&!a.jgrid.isNull(g.lastpage)&&a("#scroll_g"+g.id).html(a.jgrid.template(a.jgrid.getRegional(b,"defaults.pgtext",g.pgtext),g.page,g.lastpage)).css({top:g.scrollTopOffset+P*((parseInt(g.height,10)-45)/(parseInt(C,10)*parseInt(g.records,10)))+"px",left:g.scrollLeftOffset}))}}},scrollGrid:function(){if(!k.bScroll){k.hScroll=!0;if(g.scroll){var y=k.bDiv.scrollTop;void 0===k.scrollTop&&(k.scrollTop=0);y!==k.scrollTop&&(k.scrollTop=y,k.timer&&clearTimeout(k.timer),
k.timer=setTimeout(k.populateVisible,g.scrollTimeout));g.scrollPopUp&&!a.jgrid.isNull(g.lastpage)&&a("#scroll_g"+g.id).show()}k.hDiv.scrollLeft=k.bDiv.scrollLeft;g.footerrow&&(k.sDiv.scrollLeft=k.bDiv.scrollLeft);g.headerrow&&(k.hrDiv.scrollLeft=k.bDiv.scrollLeft);try{a("#column_menu").remove()}catch(D){}}k.bScroll=!1},selectionPreserver:function(y){var D=y.p,I=D.selrow,C=D.selarrrow?a.makeArray(D.selarrrow):null,P=y.grid.bDiv.scrollLeft,N=function(){var aa;if(D.multiselect&&C&&0<C.length)for(aa=
0;aa<C.length;aa++)C[aa]&&a(y).jqGrid("setSelection",C[aa],!1,"_sp_");!D.multiselect&&I&&a(y).jqGrid("setSelection",I,!1,null);y.grid.bDiv.scrollLeft=P;a(y).off(".selectionPreserver",N)};a(y).on("jqGridGridComplete.selectionPreserver",N)},hScroll:!1,bScroll:!1};if("TABLE"!==this.tagName.toUpperCase()||a.jgrid.isNull(this.id))alert("Element is not a table or has no id!");else if(void 0!==document.documentMode&&5>=document.documentMode)alert("Grid can not be used in this ('quirks') mode!");else{var l=
0,m,q,r;for(q in a.jgrid.regional)a.jgrid.regional.hasOwnProperty(q)&&(0===l&&(m=q),l++);1===l&&m!==g.regional&&(g.regional=m);a(this).empty().attr("tabindex","0");this.p=g;this.p.useProp=!!a.fn.prop;if(0===this.p.colNames.length)for(l=0;l<this.p.colModel.length;l++)this.p.colNames[l]=this.p.colModel[l].label||this.p.colModel[l].name;if(this.p.colNames.length!==this.p.colModel.length)alert(a.jgrid.getRegional(this,"errors.model"));else{"Bootstrap4"===b.p.styleUI&&a.jgrid.iconSet.hasOwnProperty(b.p.iconSet)&&
a.extend(!0,a.jgrid.styleUI.Bootstrap4,a.jgrid.iconSet[b.p.iconSet]);"Bootstrap5"===b.p.styleUI&&a.jgrid.iconSet.hasOwnProperty(b.p.iconSet)&&a.extend(!0,a.jgrid.styleUI.Bootstrap5,a.jgrid.iconSet[b.p.iconSet]);var p=a.jgrid.getMethod("getStyleUI"),v=b.p.styleUI+".common",t=p(v,"disabled",!0),u=p(v,"highlight",!0),n=p(v,"hover",!0),x=p(v,"cornerall",!0),w=p(v,"icon_base",!0),A=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].colmenu,H=a.jgrid.msie(),F=[],B=[],E=[];v=b.p.styleUI+".base";var R=a("<div "+p(v,
"viewBox",!1,"ui-jqgrid-view")+" ></div>");b.p.direction=a.jgrid.trim(b.p.direction.toLowerCase());b.p._ald=!1;-1===a.inArray(b.p.direction,["ltr","rtl"])&&(b.p.direction="ltr");var z=b.p.direction;a(R).insertBefore(this);a(this).appendTo(R);var O=a("<div "+p(v,"entrieBox",!1,"ui-jqgrid")+"></div>");a(O).attr({id:"gbox_"+this.id,dir:z}).insertBefore(R);a(R).attr("id","gview_"+this.id).appendTo(O);a("<div "+p(b.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(R);
a("<div "+p(v,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+a.jgrid.getRegional(b,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(R);a(this).attr({role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});"indexeddb"===b.p.datatype&&a(b).jqGrid("dbInit",b.p.datatype);var U=a.jgrid.getFont(b),S=function(y,D){void 0===D&&(D=0);y=parseInt(y,10);return isNaN(y)?D:y},K=function(y,D,I,C,P,N){var aa=b.p.colModel[y],ha=aa.align,V='style="',ca=aa.classes,
ja=aa.name,oa=[];ha&&(V+="text-align:"+ha+";");!0===aa.hidden&&(V+="display:none;");if(0===D)V+="width: "+k.headers[y].width+"px;";else if(a.jgrid.isFunction(aa.cellattr)||"string"===typeof aa.cellattr&&!a.jgrid.isNull(a.jgrid.cellattr)&&a.jgrid.isFunction(a.jgrid.cellattr[aa.cellattr]))if(y=a.jgrid.isFunction(aa.cellattr)?aa.cellattr:a.jgrid.cellattr[aa.cellattr],(C=y.call(b,P,I,C,aa,N))&&"string"===typeof C)if(-1<C.indexOf("title")&&(aa.title=!1),-1<C.indexOf("class")&&(ca=void 0),C=String(C).replace(/\s+=/g,
"="),oa=C.split("style="),2===oa.length){oa[1]=a.jgrid.trim(oa[1]);if(0===oa[1].indexOf("'")||0===oa[1].indexOf('"'))oa[1]=oa[1].substring(1);V+=oa[1].replace(/'/gi,'"')}else V+='"';oa.length?2<oa.length&&(oa[0]=""):(oa[0]="",V+='"');V+=(void 0!==ca?' class="'+ca+'"':"")+(aa.title&&I?' title="'+a.jgrid.stripHtml(I)+'"':"");V+=' aria-describedby="'+b.p.id+"_"+ja+'"';return V+oa[0]},ba=function(y){return a.jgrid.isNull(y)||""===y?"&#160;":b.p.autoencode?a.jgrid.htmlEncode(y):String(y)},T=function(y,
D,I,C,P){var N=b.p.colModel[I];y=""!==String(b.p.idPrefix)?a.jgrid.stripPref(b.p.idPrefix,y):y;y={rowId:y,colModel:N,gid:b.p.id,pos:I,styleUI:b.p.styleUI};D=void 0!==N.formatter?a.jgrid.isFunction(N.formatter)?N.formatter.call(b,D,y,C,P):a.fmatter?a.fn.fmatter.call(b,N.formatter,D,y,C,P):ba(D):ba(D);b.p.autoResizing&&N.autosize&&(N._maxsize||(N._maxsize=N.canvas_width),N._maxsize=Math.max(a.jgrid.isFunction(N.sizingStringFunc)?N.sizingStringFunc.call(b,D,U,y,C):a.jgrid.getTextWidth(D,U),N._maxsize));
return D},W=function(y,D,I,C,P,N){D=T(y,D,I,P,"add");return'<td role="gridcell" '+K(I,C,D,P,y,N)+">"+D+"</td>"},qa=function(y,D,I,C,P,N){var aa=a.jgrid.getRegional(b,"defaults.selectLine");aa=aa?aa:a.jgrid.regional.en.defaults.selectLine;C='<input role="checkbox" title=\''+aa+'\' type="checkbox" id="jqg_'+b.p.id+"_"+y+'" '+P+' name="jqg_'+b.p.id+"_"+y+'"'+(C?'checked="checked"':"")+"/>";P=b.p.colModel[D];void 0!==P.formatter&&a.jgrid.isFunction(P.formatter)&&(C=P.formatter.call(b,C,{rowId:y,colModel:P,
gid:b.p.id,pos:D,styleUI:b.p.styleUI},N,"add"));return'<td role="gridcell" '+K(D,I,C,N,y,!0)+">"+C+"</td>"},va=function(y,D,I,C,P){I=(parseInt(I,10)-1)*parseInt(C,10)+1+D;y=K(y,D,I,null,D,!0);return'<td role="gridcell" '+P+" "+y+">"+I+"</td>"},ma=function(y,D,I,C){C='<input type="text" id="jqs_'+b.p.id+"_"+y+'" name="jqs_'+b.p.id+"_"+y+'" '+C+(b.p.searchColOptions.searchOnEnter?" onchange=\"$.jgrid.searchColOnEnter('"+b.p.id+"',"+y+', this)"':" onkeydown=\"$.jgrid.searchColOnKey('"+b.p.id+"',"+y+
',this, event)"')+"/>";return'<td role="gridcell" '+K(D,I,"",null,y,!0)+">"+C+"</td>"},xa=function(y){var D=[],I=0,C;for(C=0;C<b.p.colModel.length;C++){var P=b.p.colModel[C];Object.hasOwn(P,"name")&&!a.jgrid.isServiceCol(P.name)&&(D[I]="local"===y?P.name:"xml"===y||"xmlstring"===y?P.xmlmap||P.name:P.jsonmap||P.name,!1!==b.p.keyName&&!0===P.key&&(b.p.keyName=D[I],b.p.keyIndex=I),I++)}return D},ta=function(y){var D=b.p.remapColumns;D&&D.length||(D=a.map(b.p.colModel,function(I,C){return C}));y&&(D=
a.map(D,function(I){return I<y?null:I-y}));return D},ua=function(y,D){if(this.p.deepempty)a(this.rows).slice(1).remove();else{var I=0<this.rows.length?this.rows[0]:null;a(this.firstChild).empty().append(I)}y&&this.p.scroll&&(a(this.grid.bDiv.firstChild).css({height:"auto"}),a(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0));!0===D&&(this.p.data=[],this.p._index={})},fa=function(){var y=b.p,D=y.data,I=D.length,C=y.localReader,
P=y.colModel,N=C.cell,aa=(!0===y.multiselect?1:0)+(!0===y.subGrid?1:0)+(!0===y.rownumbers?1:0)+(!0===y.searchCols?1:0),ha=y.scroll?a.jgrid.randId():1;if("local"===y.datatype&&!0===C.repeatitems){var V=ta(aa);var ca=xa("local");var ja=!1===y.keyName?a.jgrid.isFunction(C.id)?C.id.call(b,D):C.id:y.keyName;for(y=0;y<I;y++){var oa=D[y];var na=a.jgrid.getAccessor(oa,ja);if(void 0===na&&("number"!==typeof ja||a.jgrid.isNull(P[ja+aa])||(na=a.jgrid.getAccessor(oa,P[ja+aa].name)),void 0===na&&(na=ha+y,N))){var ka=
a.jgrid.getAccessor(oa,N)||oa;na=a.jgrid.isNull(ka)||void 0===ka[ja]?na:ka[ja]}ka={};ka[C.id]=na;N&&(oa=a.jgrid.getAccessor(oa,N)||oa);var Q=Array.isArray(oa)?V:ca;for(na=0;na<Q.length;na++){var M=a.jgrid.getAccessor(oa,Q[na]);ka[P[na+aa].name]=M}D[y]=ka}}},Y=function(){var y=b.p.data.length,D;var I=!1!==b.p.keyName?b.p.keyName:I=b.p.localReader.id;b.p._index={};for(D=0;D<y;D++){var C=a.jgrid.getAccessor(b.p.data[D],I);void 0===C&&(C=String(D+1));b.p._index[C]=D}},G=function(y,D,I,C,P){var N="-1",
aa="",ha;D=D?"display:none;":"";var V=a(b).triggerHandler("jqGridRowAttr",[C,P,y]);"object"!==typeof V&&(V=a.jgrid.isFunction(b.p.rowattr)?b.p.rowattr.call(b,C,P,y):"string"===typeof b.p.rowattr&&!a.jgrid.isNull(a.jgrid.rowattr)&&a.jgrid.isFunction(a.jgrid.rowattr[b.p.rowattr])?a.jgrid.rowattr[b.p.rowattr].call(b,C,P,y):{});if(!a.isEmptyObject(V)){V.hasOwnProperty("id")&&(y=V.id,delete V.id);V.hasOwnProperty("tabindex")&&(N=V.tabindex,delete V.tabindex);V.hasOwnProperty("style")&&(D+=V.style,delete V.style);
V.hasOwnProperty("class")&&(I+=" "+V["class"],delete V["class"]);try{delete V.role}catch(ca){}for(ha in V)V.hasOwnProperty(ha)&&(aa+=" "+ha+"="+V[ha])}return'<tr role="row" id="'+y+'" tabindex="'+N+'" class="'+I+'"'+(""===D?"":' style="'+D+'"')+aa+">"},L=function(y,D,I,C){var P=new Date,N="local"!==b.p.datatype&&b.p.loadonce||"xmlstring"===b.p.datatype,aa=b.p.xmlReader,ha=[],V="local"===b.p.datatype?"local":"xml";N&&(b.p.data=[],b.p._index={},b.p.localReader.id="_id_");b.p.reccount=0;if(a.isXMLDoc(y)){-1!==
b.p.treeANode||b.p.scroll?D=1<D?D:1:(ua.call(b,!1,!1),D=1);var ca=a(b),ja=0,oa=0,na=[],ka,Q={},M=[],ia=p(v,"rowBox",!0,"jqgrow ui-row-"+b.p.direction),ra=!0===b.p.rownumbers?1:0,sa=!0===b.p.multiselect?1:0,Da=!0===b.p.searchCols?1:0;if(!0===b.p.subGrid){oa=1;var La=a.jgrid.getMethod("addSubGridCell")}aa.repeatitems||(na=xa(V));var Ja=!1===b.p.keyName?a.jgrid.isFunction(aa.id)?aa.id.call(b,y):aa.id:b.p.keyName;aa.repeatitems&&b.p.keyName&&isNaN(Ja)&&(Ja=b.p.keyIndex);V=-1===String(Ja).indexOf("[")?
na.length?function(ab,cb){return a(Ja,ab).text()||cb}:function(ab,cb){return a(aa.cell,ab).eq(Ja).text()||cb}:function(ab,cb){return ab.getAttribute(Ja.replace(/[\[\]]/g,""))||cb};b.p.userData={};b.p.page=S(a.jgrid.getXmlData(y,aa.page),b.p.page);b.p.lastpage=S(a.jgrid.getXmlData(y,aa.total),1);b.p.records=S(a.jgrid.getXmlData(y,aa.records));a.jgrid.isFunction(aa.userdata)?b.p.userData=aa.userdata.call(b,y)||{}:a.jgrid.getXmlData(y,aa.userdata,!0).each(function(){b.p.userData[this.getAttribute("name")]=
a(this).text()});y=a.jgrid.getXmlData(y,aa.root,!0);(y=a.jgrid.getXmlData(y,aa.row,!0))||(y=[]);var Ga=y.length,Ha=0,lb=[],Va=parseInt(b.p.rowNum,10),wb=b.p.scroll?a.jgrid.randId():1,ya=a(b).find("tbody").first(),Ra=!1,$a;if(b.p.grouping){Ra=!0===b.p.groupingView.groupCollapse;var qb=a.jgrid.getMethod("groupingPrepare")}0<Ga&&0>=b.p.page&&(b.p.page=1);if(y&&Ga){C&&(Va*=C+1);for(var xb=a.jgrid.isFunction(b.p.afterInsertRow),Ta=ra?p(v,"rownumBox",!1,"jqgrid-rownum"):"",Sa=Da?p(v,"searchBox",!1,""):
"",fb=sa?p(v,"multiBox",!1,"cbox"):"";Ha<Ga;){var Ka=y[Ha];var Na=V(Ka,wb+Ha);Na=b.p.idPrefix+Na;b.p.preserveSelection&&(b.p.multiselect?r=($a=-1!==b.p.selarrrow.indexOf(Na))?r+1:r:$a=Na===b.p.selrow);var Ma=M.length;M.push("");ra&&M.push(va(0,Ha,b.p.page,b.p.rowNum,Ta));sa&&M.push(qa(Na,ra,Ha+1,$a,fb,Ka));Da&&M.push(ma(Na,sa+ra,Ha+1,Sa));oa&&M.push(La.call(ca,sa+ra+Da,Ha+1));if(aa.repeatitems){ka||=ta(sa+oa+ra+Da);var db=a.jgrid.getXmlData(Ka,aa.cell,!0);a.each(ka,function(ab){var cb=db[this];if(!cb)return!1;
Wa=cb.textContent||cb.text||"";Q[b.p.colModel[ab+sa+oa+ra+Da].name]=Wa;M.push(W(Na,Wa,ab+sa+oa+ra+Da,Ha+D,Ka,Q))})}else for(C=0;C<na.length;C++){var Wa=a.jgrid.getXmlData(Ka,na[C]);Q[b.p.colModel[C+sa+oa+ra+Da].name]=Wa;M.push(W(Na,Wa,C+sa+oa+ra+Da,Ha+D,Ka,Q))}M[Ma]=G(Na,Ra,ia,Q,Ka);M.push("</tr>");b.p.grouping&&(lb.push(M),b.p.groupingView._locgr||qb.call(ca,Q,Ha),M=[]);if(N||!0===b.p.treeGrid&&!b.p._ald)Q._id_=a.jgrid.stripPref(b.p.idPrefix,Na),b.p.data.push(Q),b.p._index[Q._id_]=b.p.data.length-
1,-1<b.p.treeANode&&"adjacency"===b.p.treeGridModel&&ha.push(Q);!1===b.p.gridview&&(ya.append(M.join("")),ca.triggerHandler("jqGridAfterInsertRow",[Na,Q,Ka]),xb&&b.p.afterInsertRow.call(b,Na,Q,Ka),M=[]);Q={};ja++;Ha++;if(ja===Va)break}}r=0<ja&&b.p.multiselect&&b.p.preserveSelection&&ja===r;if(!0===b.p.gridview){var gb=-1<b.p.treeANode?b.p.treeANode:0;b.p.grouping?N||(ca.jqGrid("groupingRender",lb,b.p.colModel.length,b.p.page,Va),lb=null):!0===b.p.treeGrid&&0<gb?a(b.rows[gb]).after(M.join("")):(ya.append(M.join("")),
b.grid.cols=b.rows[0].cells)}b.p.totaltime=new Date-P;M=null;0<ja&&0===b.p.records&&(b.p.records=Ga);if(!0===b.p.treeGrid){try{ca.jqGrid("setTreeNode",gb+1,ja+gb+1)}catch(ab){}if(-1<b.p.treeANode&&"adjacency"===b.p.treeGridModel&&(Wa=b.rows[b.p.treeANode].id,Wa=b.p._index[Wa]+1,1<=Wa)){b.p.data.splice(-Ga,Ga);for(C=0;C<Ga;C++)b.p.data.splice(Wa+C,0,ha[C]);Y()}}b.p.reccount=ja;b.p.treeANode=-1;b.p.userDataOnFooter&&ca.jqGrid("footerData","set",b.p.userData,b.p.formatFooterData,0,!1);b.p.userDataOnHeader&&
ca.jqGrid("headerData","set",b.p.userData,b.p.formatHeaderData,0,!1);N&&(b.p.records=Ga,b.p.lastpage=Math.ceil(Ga/Va));I||b.updatepager(!1,!0);r&&la(!0);if(N){for(;ja<Ga;){Ka=y[ja];Na=V(Ka,ja+wb);Na=b.p.idPrefix+Na;if(aa.repeatitems){ka||=ta(sa+oa+ra+Da);var yb=a.jgrid.getXmlData(Ka,aa.cell,!0);a.each(ka,function(ab){var cb=yb[this];if(!cb)return!1;Wa=cb.textContent||cb.text||"";Q[b.p.colModel[ab+sa+oa+ra+Da].name]=Wa})}else for(C=0;C<na.length;C++)Wa=a.jgrid.getXmlData(Ka,na[C]),Q[b.p.colModel[C+
sa+oa+ra+Da].name]=Wa;Q._id_=a.jgrid.stripPref(b.p.idPrefix,Na);b.p.grouping&&qb.call(ca,Q,ja);b.p.data.push(Q);b.p._index[Q._id_]=b.p.data.length-1;Q={};ja++}b.p.grouping&&(b.p.groupingView._locgr=!0,ca.jqGrid("groupingRender",lb,b.p.colModel.length,b.p.page,Va),lb=null)}if(!0===b.p.subGrid)try{ca.jqGrid("addSubGrid",sa+ra)}catch(ab){}}},X=function(y,D,I,C){var P=new Date;if(y){-1!==b.p.treeANode||b.p.scroll?D=1<D?D:1:(ua.call(b,!1,!1),D=1);if("local"===b.p.datatype){var N=b.p.localReader;var aa=
"local"}else N=b.p.jsonReader,aa="json";var ha="local"!==b.p.datatype&&b.p.loadonce||"jsonstring"===b.p.datatype,V=a(b),ca=0,ja,oa=[],na,ka=b.p.multiselect?1:0,Q=!0===b.p.subGrid?1:0,M=!0===b.p.rownumbers?1:0,ia=!0===b.p.searchCols?1:0,ra=b.p.scroll&&"local"!==b.p.datatype?a.jgrid.randId():1,sa=parseInt(b.p.rowNum,10),Da=!1,La,Ja=ta(ka+Q+M+ia);aa=xa(aa);var Ga={},Ha=[],lb=[],Va=p(v,"rowBox",!0,"jqgrow ui-row-"+b.p.direction),wb=a.jgrid.isFunction(b.p.afterInsertRow),ya=[],Ra=!1,$a=a(b).find("tbody").first(),
qb=M?p(v,"rownumBox",!1,"jqgrid-rownum"):"",xb=ia?p(v,"searchBox",!1,""):"",Ta=ka?p(v,"multiBox",!1,"cbox"):"";ha&&(b.p.data=[],b.p._index={},b.p.localReader.id="_id_");b.p.reccount=0;b.p.page=S(a.jgrid.getAccessor(y,N.page),b.p.page);b.p.lastpage=S(a.jgrid.getAccessor(y,N.total),1);b.p.records=S(a.jgrid.getAccessor(y,N.records));b.p.userData=a.jgrid.getAccessor(y,N.userdata)||{};Q&&(na=a.jgrid.getMethod("addSubGridCell"));var Sa=!1===b.p.keyName?a.jgrid.isFunction(N.id)?N.id.call(b,y):N.id:b.p.keyName;
N.repeatitems&&b.p.keyName&&isNaN(Sa)&&(Sa=b.p.keyIndex);var fb=a.jgrid.getAccessor(y,N.root);a.jgrid.isNull(fb)&&Array.isArray(y)&&(fb=y);fb||=[];y=fb.length;var Ka=0;0<y&&0>=b.p.page&&(b.p.page=1);C&&(sa*=C+1);"local"!==b.p.datatype||b.p.deselectAfterSort||(Da=!0);if(b.p.grouping){Ra=!0===b.p.groupingView.groupCollapse;var Na=a.jgrid.getMethod("groupingPrepare")}for(;Ka<y;){C=fb[Ka];var Ma=a.jgrid.getAccessor(C,Sa);if(void 0===Ma&&("number"!==typeof Sa||a.jgrid.isNull(b.p.colModel[Sa+ka+Q+M+ia])||
(Ma=a.jgrid.getAccessor(C,b.p.colModel[Sa+ka+Q+M+ia].name)),void 0===Ma&&(Ma=ra+Ka,0===oa.length&&N.cell))){var db=a.jgrid.getAccessor(C,N.cell)||C;Ma=a.jgrid.isNull(db)||void 0===db[Sa]?Ma:db[Sa]}Ma=b.p.idPrefix+Ma;if(Da||b.p.preserveSelection)b.p.multiselect?r=(La=-1!==b.p.selarrrow.indexOf(Ma))?r+1:r:La=Ma===b.p.selrow;var Wa=Ha.length;Ha.push("");M&&Ha.push(va(0,Ka,b.p.page,b.p.rowNum,qb));ka&&Ha.push(qa(Ma,M,Ka+1,La,Ta,C));ia&&Ha.push(ma(Ma,ka+M,Ka+1,xb));Q&&Ha.push(na.call(V,ka+M+ia,Ka+1));
var gb=aa;N.repeatitems&&(N.cell&&(C=a.jgrid.getAccessor(C,N.cell)||C),Array.isArray(C)&&(gb=Ja));for(ja=0;ja<gb.length;ja++)db=a.jgrid.getAccessor(C,gb[ja]),Ga[b.p.colModel[ja+ka+Q+M+ia].name]=db,Ha.push(W(Ma,db,ja+ka+Q+M+ia,Ka+D,C,Ga));Ha[Wa]=G(Ma,Ra,La?Va+" "+u:Va,Ga,C);Ha.push("</tr>");b.p.grouping&&(ya.push(Ha),b.p.groupingView._locgr||Na.call(V,Ga,Ka),Ha=[]);if(ha||!0===b.p.treeGrid&&!b.p._ald)Ga._id_=a.jgrid.stripPref(b.p.idPrefix,Ma),b.p.data.push(Ga),b.p._index[Ga._id_]=b.p.data.length-1,
-1<b.p.treeANode&&"adjacency"===b.p.treeGridModel&&lb.push(Ga);!1===b.p.gridview&&($a.append(Ha.join("")),V.triggerHandler("jqGridAfterInsertRow",[Ma,Ga,C]),wb&&b.p.afterInsertRow.call(b,Ma,Ga,C),Ha=[]);Ga={};ca++;Ka++;if(ca===sa)break}r=0<ca&&b.p.multiselect&&(b.p.preserveSelection||Da)&&ca===r;if(!0===b.p.gridview){var yb=-1<b.p.treeANode?b.p.treeANode:0;b.p.grouping?ha||(V.jqGrid("groupingRender",ya,b.p.colModel.length,b.p.page,sa),ya=null):!0===b.p.treeGrid&&0<yb?a(b.rows[yb]).after(Ha.join("")):
($a.append(Ha.join("")),b.grid.cols=b.rows[0].cells)}b.p.totaltime=new Date-P;0<ca&&0===b.p.records&&(b.p.records=y);if(!0===b.p.treeGrid){try{V.jqGrid("setTreeNode",yb+1,ca+yb+1)}catch(ab){}if(-1<b.p.treeANode&&"adjacency"===b.p.treeGridModel&&(db=b.rows[b.p.treeANode].id,db=b.p._index[db]+1,1<=db)){b.p.data.splice(-y,y);for(Ka=0;Ka<y;Ka++)b.p.data.splice(db+Ka,0,lb[Ka]);Y()}}b.p.reccount=ca;b.p.treeANode=-1;b.p.userDataOnFooter&&V.jqGrid("footerData","set",b.p.userData,b.p.formatFooterData,0,!1);
b.p.userDataOnHeader&&V.jqGrid("headerData","set",b.p.userData,b.p.formatHeaderData,0,!1);ha&&(b.p.records=y,b.p.lastpage=Math.ceil(y/sa));I||b.updatepager(!1,!0);r&&la(!0);if(ha){for(;ca<y&&fb[ca];){C=fb[ca];Ma=a.jgrid.getAccessor(C,Sa);void 0===Ma&&("number"!==typeof Sa||a.jgrid.isNull(b.p.colModel[Sa+ka+Q+M+ia])||(Ma=a.jgrid.getAccessor(C,b.p.colModel[Sa+ka+Q+M+ia].name)),void 0===Ma&&(Ma=ra+ca,0===oa.length&&N.cell&&(D=a.jgrid.getAccessor(C,N.cell)||C,Ma=a.jgrid.isNull(D)||void 0===D[Sa]?Ma:D[Sa])));
if(C){Ma=b.p.idPrefix+Ma;gb=aa;N.repeatitems&&(N.cell&&(C=a.jgrid.getAccessor(C,N.cell)||C),Array.isArray(C)&&(gb=Ja));for(ja=0;ja<gb.length;ja++)Ga[b.p.colModel[ja+ka+Q+M+ia].name]=a.jgrid.getAccessor(C,gb[ja]);Ga._id_=a.jgrid.stripPref(b.p.idPrefix,Ma);b.p.grouping&&Na.call(V,Ga,ca);b.p.data.push(Ga);b.p._index[Ga._id_]=b.p.data.length-1;Ga={}}ca++}b.p.grouping&&(b.p.groupingView._locgr=!0,V.jqGrid("groupingRender",ya,b.p.colModel.length,b.p.page,sa))}if(!0===b.p.subGrid)try{V.jqGrid("addSubGrid",
ka+M+ia)}catch(ab){}}},da=async function(y){return new Promise(function(D,I){let C=b.p.sortname,P=b.p.sortorder.toLowerCase(),N=parseInt(b.p.rowNum,10),aa=0,ha,V=parseInt(b.p.page,10),ca,ja="every";const oa=b.p.ignoreCase;y&&(V=1,N=1E6);C||(C=b.p.sortname=b.p.colModel[0].index||b.p.colModel[0].name);!0===b.p.search&&(ca=b.p.postData.filters)&&("string"===typeof ca&&(ca=a.jgrid.parse(ca)),"OR"===ca.groupOp&&(ja="some"),ca.rules.map(Q=>{oa&&(Q.data=Q.data.toLowerCase());Q.type="text";let M=a(b).jqGrid("getColProp",
Q.field),ia=!("bt"===Q.op||"in"===Q.op||"ni"===Q.op);switch(M.sorttype||M.stype){case "int":case "integer":ia&&(Q.data=parseInt(Q.data,10));Q.type="num";break;case "float":case "number":case "numeric":ia&&(Q.data=parseFloat(Q.data)),Q.type="num"}}));var na={eq:function(Q,M,ia){return(ia?M[Q.field].toLowerCase():M[Q.field])===Q.data},ne:function(Q,M,ia){return(ia?M[Q.field].toLowerCase():M[Q.field])!==Q.data},lt:function(Q,M,ia){return(ia?M[Q.field].toLowerCase():M[Q.field])<Q.data},le:function(Q,
M,ia){return(ia?M[Q.field].toLowerCase():M[Q.field])<=Q.data},gt:function(Q,M,ia){return(ia?M[Q.field].toLowerCase():M[Q.field])>Q.data},ge:function(Q,M,ia){return(ia?M[Q.field].toLowerCase():M[Q.field])>=Q.data},bw:function(Q,M,ia){return 0===(ia?M[Q.field].toLowerCase():M[Q.field]).indexOf(Q.data)},bn:function(Q,M,ia){return 0!==(ia?M[Q.field].toLowerCase():M[Q.field]).indexOf(Q.data)},ew:function(Q,M,ia){return(ia?M[Q.field].toLowerCase():M[Q.field]).endsWith(Q.data)},en:function(Q,M,ia){return!(ia?
M[Q.field].toLowerCase():M[Q.field]).endsWith(Q.data)},cn:function(Q,M,ia){return-1<(ia?M[Q.field].toLowerCase():M[Q.field]).indexOf(Q.data)},nc:function(Q,M,ia){return-1< !(ia?M[Q.field].toLowerCase():M[Q.field])},"in":function(Q,M,ia){return-1<Q.data.split(",").map(ra=>ia?ra.trim().toLowerCase():ra.trim()).indexOf(M[Q.field])},ni:function(Q,M,ia){return-1===Q.data.split(",").map(ra=>ia?ra.trim().toLowerCase():ra.trim()).indexOf(M[Q.field].trim())},nu:function(Q,M,ia){return null===M[Q.field]},nn:function(Q,
M,ia){return null!==M[Q.field]},bt:function(Q,M,ia){let ra=Q.data.split("...").map(sa=>"num"===Q.type?sa-0:sa.trim());try{let sa=ia?M[Q.field].toLowerCase():M[Q.field];return sa>=ra[0]&&sa<=ra[1]}catch(sa){return!1}}};const ka=window.indexedDB.open(b.p.dbconfig.dbname);ka.onsuccess=function(Q){Q=ka.result.transaction(b.p.dbconfig.dbtable,"readonly");let M={};M[b.p.localReader.root]=[];Q.oncomplete=function(sa){("desc"===P||b.p.grouping)&&M[b.p.localReader.root].sort(function(Da,La){var Ja=[],Ga=[];
if(b.p.grouping){for(let Ha=0;Ha<b.p.groupingView.groupField.length;Ha++)"asc"===b.p.groupingView.groupOrder[Ha]?(Ja.push(Da[b.p.groupingView.groupField[Ha]]),Ga.push(La[b.p.groupingView.groupField[Ha]])):(Ja.push(La[b.p.groupingView.groupField[Ha]]),Ga.push(Da[b.p.groupingView.groupField[Ha]]));"asc"===P?(Ja.push(Da[C]),Ga.push(La[C])):(Ja.push(La[C]),Ga.push(Da[C]))}else Ja=[La[C]],Ga=[Da[C]];return indexedDB.cmp(Ja,Ga)});M[b.p.localReader.root]=M[b.p.localReader.root].slice((V-1)*N,V*N);ha=Math.ceil(aa/
N);M[b.p.localReader.total]=ha;M[b.p.localReader.page]=V;M[b.p.localReader.records]=aa;M[b.p.localReader.userdata]=b.p.userData;D(M)};Q.onerror=function(sa){pa();I(sa.target)};Q=Q.objectStore(b.p.dbconfig.dbtable).index(C);Q.count(null).onsuccess=sa=>{aa=b.p.search&&ca.rules.length?0:sa.target.result};var ia=Math.pow(2,32)-1;!1!==b.p.search||"asc"!==P||b.p.grouping||(ia=V*N);var ra=Q.getAll(null,ia);ra.onsuccess=sa=>{if(!0===b.p.search&&ca.hasOwnProperty("rules")&&ca.rules.length){sa=ra.result.length;
for(var Da=0;Da<sa;)ca.rules[ja](function(La){return na[La.op](La,ra.result[Da],oa&&"text"===La.type)})&&(aa++,M[b.p.localReader.root].push(ra.result[Da])),Da++}else M[b.p.localReader.root]=ra.result};ra.onerror=function(sa){console.log(sa)}}})},Z=function(y){function D(ya){var Ra=0,$a,qb,xb;if(!a.jgrid.isNull(ya.groups)){(qb=ya.groups.length&&"OR"===ya.groupOp.toString().toUpperCase())&&M.orBegin();for($a=0;$a<ya.groups.length;$a++){0<Ra&&qb&&M.or();try{D(ya.groups[$a])}catch(Na){alert(Na)}Ra++}qb&&
M.orEnd()}if(!a.jgrid.isNull(ya.rules))try{(xb=ya.rules.length&&"OR"===ya.groupOp.toString().toUpperCase())&&M.orBegin();for($a=0;$a<ya.rules.length;$a++){var Ta=ya.rules[$a];var Sa=ya.groupOp.toString().toUpperCase();if(Q[Ta.op]&&Ta.field){0<Ra&&Sa&&"OR"===Sa&&(M=M.or());var fb=Ta.field;b.p.useNameForSearch&&N.hasOwnProperty(Ta.field)&&(fb=N[Ta.field].name);try{var Ka=N[Ta.field];"date"===Ka.stype&&"string"===typeof Ka.srcfmt&&"string"===typeof Ka.newfmt&&(Ta.data=a.jgrid.parseDate.call(b,Ka.newfmt,
Ta.data,Ka.srcfmt));M=Q[Ta.op](M,Sa)(fb,Ta.data,Ka)}catch(Na){}}else void 0!==b.p.customFilterDef&&void 0!==b.p.customFilterDef[Ta.op]&&a.jgrid.isFunction(b.p.customFilterDef[Ta.op].action)&&(M=M.user.call(b,Ta.op,Ta.field,Ta.data));Ra++}xb&&M.orEnd()}catch(Na){alert(Na)}}var I=b.p.multiSort?[]:"",C=[],P=!1,N={},aa=[],ha=[],V,ca,ja;if(Array.isArray(b.p.data)){var oa=b.p.grouping?b.p.groupingView:!1,na,ka;a.each(b.p.colModel,function(){if("cb"===this.name||"subgrid"===this.name||"rn"===this.name||
"sc"===this.name)return!0;ca=this.sorttype||"text";ka=this.index||this.name;"date"===ca||"datetime"===ca?(this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?(V=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:a.jgrid.getRegional(b,"formatter.date.srcformat"),ja=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:a.jgrid.getRegional(b,"formatter.date.newformat")):V=ja=this.datefmt||"Y-m-d",N[ka]={stype:ca,srcfmt:V,newfmt:ja,
sfunc:this.sortfunc||null,name:this.name}):N[ka]={stype:ca,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null,name:this.name};if(b.p.grouping)for(na=0,sa=oa.groupField.length;na<sa;na++)this.name===oa.groupField[na]&&(aa[na]=N[ka],ha[na]=ka);b.p.multiSort||P||ka!==b.p.sortname||(I=ka,P=!0)});b.p.multiSort&&(I=F,C=B);if(b.p.treeGrid&&b.p._sort)a(b).jqGrid("SortTree",I,b.p.sortorder,N[I].stype||"text",N[I].srcfmt||"");else{var Q={eq:function(ya){return ya.equals},ne:function(ya){return ya.notEquals},lt:function(ya){return ya.less},
le:function(ya){return ya.lessOrEquals},gt:function(ya){return ya.greater},ge:function(ya){return ya.greaterOrEquals},cn:function(ya){return ya.contains},nc:function(ya,Ra){return"OR"===Ra?ya.orNot().contains:ya.andNot().contains},bw:function(ya){return ya.startsWith},bn:function(ya,Ra){return"OR"===Ra?ya.orNot().startsWith:ya.andNot().startsWith},en:function(ya,Ra){return"OR"===Ra?ya.orNot().endsWith:ya.andNot().endsWith},ew:function(ya){return ya.endsWith},ni:function(ya,Ra){return"OR"===Ra?ya.orNot().inData:
ya.andNot().inData},"in":function(ya){return ya.inData},nu:function(ya){return ya.isNull},nn:function(ya,Ra){return"OR"===Ra?ya.orNot().isNull:ya.andNot().isNull}},M=a.jgrid.from.call(b,b.p.data);b.p.ignoreCase&&(M=M.ignoreCase());if(!0===b.p.search){var ia=b.p.postData.filters;if(ia)"string"===typeof ia&&(ia=a.jgrid.parse(ia)),D(ia);else try{var ra=N[b.p.postData.searchField];"date"===ra.stype&&ra.srcfmt&&ra.newfmt&&ra.srcfmt!==ra.newfmt&&(b.p.postData.searchString=a.jgrid.parseDate.call(b,ra.newfmt,
b.p.postData.searchString,ra.srcfmt));Q[b.p.postData.searchOper]?M=Q[b.p.postData.searchOper](M)(b.p.postData.searchField,b.p.postData.searchString,N[b.p.postData.searchField]):void 0!==b.p.customFilterDef&&void 0!==b.p.customFilterDef[b.p.postData.searchOper]&&a.jgrid.isFunction(b.p.customFilterDef[b.p.postData.searchOper].action)&&(M=M.user.call(b,b.p.postData.searchOper,b.p.postData.searchField,b.p.postData.searchString))}catch(ya){}}b.p.treeGrid&&"nested"===b.p.treeGridModel&&M.orderBy(b.p.treeReader.left_field,
"asc","integer","",null);if(b.p.treeGrid&&"adjacency"===b.p.treeGridModel){var sa=0;I=null}if(b.p.grouping)for(na=0;na<sa;na++)M.orderBy(ha[na],oa.groupOrder[na],aa[na].stype,aa[na].srcfmt);b.p.multiSort?a.each(I,function(ya){M.orderBy(this,C[ya],N[this].stype,N[this].srcfmt,N[this].sfunc)}):I&&b.p.sortorder&&P&&("DESC"===b.p.sortorder.toUpperCase()?M.orderBy(b.p.sortname,"d",N[I].stype,N[I].srcfmt,N[I].sfunc):M.orderBy(b.p.sortname,"a",N[I].stype,N[I].srcfmt,N[I].sfunc));ra=M.select();ia=parseInt(b.p.rowNum,
10);var Da=ra.length,La=parseInt(b.p.page,10),Ja=Math.ceil(Da/ia),Ga={};if((b.p.search||b.p.resetsearch)&&b.p.grouping&&b.p.groupingView._locgr){b.p.groupingView.groups=[];var Ha,lb=a.jgrid.getMethod("groupingPrepare"),Va;if(b.p.footerrow&&b.p.userDataOnFooter){for(Va in b.p.userData)b.p.userData.hasOwnProperty(Va)&&(b.p.userData[Va]=0);var wb=!0}for(Ha=0;Ha<Da;Ha++){if(wb)for(Va in b.p.userData)b.p.userData.hasOwnProperty(Va)&&(b.p.userData[Va]+=parseFloat(ra[Ha][Va]||0));lb.call(a(b),ra[Ha],Ha,
ia)}}if(y)return ra;ra=b.p.treeGrid&&b.p.search?a(b).jqGrid("searchTree",ra):ra.slice((La-1)*ia,La*ia);N=M=null;Ga[b.p.localReader.total]=Ja;Ga[b.p.localReader.page]=La;Ga[b.p.localReader.records]=Da;Ga[b.p.localReader.root]=ra;Ga[b.p.localReader.userdata]=b.p.userData;ra=null;return Ga}}},ea=function(){b.grid.hDiv.loading=!0;b.p.hiddengrid||a(b).jqGrid("progressBar",{method:"show",loadtype:b.p.loadui,htmlcontent:a.jgrid.getRegional(b,"defaults.loadtext",b.p.loadtext)})},pa=function(){b.grid.hDiv.loading=
!1;a(b).jqGrid("progressBar",{method:"hide",loadtype:b.p.loadui})},wa=function(y,D,I){var C=a(b).triggerHandler("jqGridBeforeProcessing",[y,D,I]);C=void 0===C||"boolean"!==typeof C?!0:C;a.jgrid.isFunction(b.p.beforeProcessing)&&!1===b.p.beforeProcessing.call(b,y,D,I)&&(C=!1);return C},Aa=function(y,D){a(b).triggerHandler("jqGridLoadComplete",[y]);D&&b.p.loadComplete.call(b,y);a(b).triggerHandler("jqGridAfterLoadComplete",[y]);b.p.datatype="local";b.p.datastr=null;pa()},Ba=function(y){if(!b.grid.hDiv.loading){var D=
b.p.scroll&&!1===y,I={},C=b.p.prmNames;r=0;0>=b.p.page&&(b.p.page=Math.min(1,b.p.lastpage));a.jgrid.isNull(C.search,!0)||(I[C.search]=b.p.search);a.jgrid.isNull(C.nd,!0)||(I[C.nd]=(new Date).getTime());a.jgrid.isNull(C.rows,!0)||(I[C.rows]=b.p.rowNum);a.jgrid.isNull(C.page,!0)||(I[C.page]=b.p.page);a.jgrid.isNull(C.sort,!0)||(I[C.sort]=b.p.sortname);a.jgrid.isNull(C.order,!0)||(I[C.order]=b.p.sortorder);a.jgrid.isNull(b.p.rowTotal,!0)||a.jgrid.isNull(C.totalrows,!0)||(I[C.totalrows]=b.p.rowTotal);
var P=a.jgrid.isFunction(b.p.loadComplete),N=P?b.p.loadComplete:null,aa=0;y=y||1;1<y?a.jgrid.isNull(C.npage,!0)?N=function(ka){b.p.page++;b.grid.hDiv.loading=!1;P&&b.p.loadComplete.call(b,ka);Ba(y-1)}:(I[C.npage]=y,aa=y-1,y=1):a.jgrid.isNull(C.npage,!0)||delete b.p.postData[C.npage];if(b.p.grouping){a(b).jqGrid("groupingSetup");var ha=b.p.groupingView;var V="";var ca=[];for(V=0;V<ha.groupField.length;V++){var ja=ha.groupField[V];a.each(b.p.colModel,function(ka,Q){Q.name===ja&&Q.index&&(ja=Q.index)});
ca.push(ja+" "+ha.groupOrder[V])}V=ca.join();""!==a.jgrid.trim(I[C.sort])?I[C.sort]=""!==V?V+" ,"+I[C.sort]:I[C.sort]:(I[C.sort]=V,I[C.order]="")}a.extend(b.p.postData,I);var oa=b.p.scroll?b.rows.length-1:1;if(a.jgrid.isFunction(b.p.datatype))b.p.datatype.call(b,b.p.postData,"load_"+b.p.id,oa,y,aa);else if(I=a(b).triggerHandler("jqGridBeforeRequest"),!1!==I&&"stop"!==I){if(a.jgrid.isFunction(b.p.beforeRequest)&&(I=b.p.beforeRequest.call(b),!1===I||"stop"===I))return;a.jgrid.isFunction(b.treeGrid_beforeRequest)&&
b.treeGrid_beforeRequest.call(b);var na=b.p.datatype.toLowerCase();switch(na){case "json":case "jsonp":case "xml":case "script":a.ajax(a.extend({url:b.p.url,type:b.p.mtype,dataType:na,data:a.jgrid.isFunction(b.p.serializeGridData)?b.p.serializeGridData.call(b,b.p.postData):b.p.postData,success:function(ka,Q,M){if(wa(ka,Q,M)){"xml"===na?L(ka,oa,1<y,aa):X(ka,oa,1<y,aa);a(b).triggerHandler("jqGridLoadComplete",[ka]);N&&N.call(b,ka);a(b).triggerHandler("jqGridAfterLoadComplete",[ka]);D&&b.grid.populateVisible();
if(b.p.treeGrid_bigData)b.p.loadonce&&(b.p.datatype="local");else if(b.p.loadonce||b.p.treeGrid)b.p.datatype="local";1===y&&pa();a.jgrid.isFunction(b.treeGrid_afterLoadComplete)&&b.treeGrid_afterLoadComplete.call(b)}else pa()},error:function(ka,Q,M){a(b).triggerHandler("jqGridLoadError",[ka,Q,M]);a.jgrid.isFunction(b.p.loadError)&&b.p.loadError.call(b,ka,Q,M);1===y&&pa()},beforeSend:function(ka,Q){var M=a(b).triggerHandler("jqGridLoadBeforeSend",[ka,Q]);a.jgrid.isFunction(b.p.loadBeforeSend)&&(M=
b.p.loadBeforeSend.call(b,ka,Q));void 0===M&&(M=!0);if(!1===M)return!1;ea()}},a.jgrid.ajaxOptions,b.p.ajaxGridOptions));break;case "xmlstring":ea();I="string"!==typeof b.p.datastr?b.p.datastr:a.parseXML(b.p.datastr);if(!wa(I,200,null)){pa();return}L(I);Aa(I,P);break;case "jsonstring":ea();I="string"===typeof b.p.datastr?a.jgrid.parse(b.p.datastr):b.p.datastr;if(!wa(I,200,null)){pa();return}X(I);Aa(I,P);break;case "local":case "clientside":ea();b.p.datatype="local";b.p._ald=!0;I=Z(!1);if(!wa(I,200,
null)){pa();return}X(I,oa,1<y,aa);a(b).triggerHandler("jqGridLoadComplete",[I]);N&&N.call(b,I);a(b).triggerHandler("jqGridAfterLoadComplete",[I]);D&&b.grid.populateVisible();1===y&&pa();b.p._ald=!1;break;case "indexeddb":if(!b.p.dbconfig.ready_req)return;ea();da(!1).then(function(ka){wa(ka,200,null)?(X(ka,oa,1<y,aa),a(b).triggerHandler("jqGridLoadComplete",[ka]),N&&N.call(b,ka),a(b).triggerHandler("jqGridAfterLoadComplete",[ka]),D&&b.grid.populateVisible(),pa(),b.p._ald=!1):pa()})}b.p._sort=!1}}},
la=function(y){a("#cb_"+a.jgrid.jqID(b.p.id),b.grid.hDiv)[b.p.useProp?"prop":"attr"]("checked",y)},Ca=function(y,D){var I="<td class='ui-pg-button "+t+"'><span class='ui-separator'></span></td>",C="",P="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",N="",aa=function(M,ia){var ra=a(b).triggerHandler("jqGridPaging",[M,ia]);if("stop"===ra)return!1;a.jgrid.isFunction(b.p.onPaging)&&(ra=b.p.onPaging.call(b,M,ia));if("stop"===ra)return!1;b.p.selrow=null;b.p.multiselect&&(b.p.preserveSelection||
(b.p.selarrrow=[]),la(!1));b.p.savedRow=[];return!0};D+="_"+y;var ha="pg_"+y;var V=y+"_left";var ca=y+"_center";var ja=y+"_right";a("#"+a.jgrid.jqID(y)).append("<div id='"+ha+"' class='ui-pager-control' role='group'><table "+p(v,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+V+"' align='left'></td><td id='"+ca+"' align='center' style='white-space:pre;'></td><td id='"+ja+"' align='right'></td></tr></tbody></table></div>").attr("dir",z);if(0<b.p.rowList.length){N=
'<td dir="'+z+'">';N+="<select "+p(v,"pgSelectBox",!1,"ui-pg-selbox")+' size="1" name="pg_sel_box" role="listbox" title="'+(a.jgrid.getRegional(b,"defaults.pgrecs",b.p.pgrecs)||"")+'">';for(V=0;V<b.p.rowList.length;V++)ca=b.p.rowList[V].toString().split(":"),1===ca.length&&(ca[1]=ca[0]),N=0==ca[1].length?N+('<option role="option" value="'+ca[0]+'"'+(S(b.p.rowNum,0)===S(ca[0],0)?' aria-label="'+ca[1]+'" selected="selected"':"")+">"+ca[1]+"</option>"):N+('<option role="option" value="'+ca[0]+'"'+(S(b.p.rowNum,
0)===S(ca[0],0)?' selected="selected"':"")+">"+ca[1]+"</option>");N+="</select></td>"}"rtl"===z&&(P+=N,a("#"+ja).attr("align","left"));!0===b.p.pginput&&(C="<td id='input"+D+"' dir='"+z+"'>"+a.jgrid.template(a.jgrid.getRegional(b,"defaults.pgtext",b.p.pgtext)||"","<input "+p(v,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox' name='jqgpginput'/>","<span id='sp_1_"+a.jgrid.jqID(y)+"'></span>")+"</td>");ja=["first"+D,"prev"+D,"next"+D,"last"+D];if(!0===b.p.pgbuttons){var oa=
p(v,"pgButtonBox",!0,"ui-pg-button"),na=[a.jgrid.getRegional(b,"defaults.pgfirst",b.p.pgfirst)||"",a.jgrid.getRegional(b,"defaults.pgprev",b.p.pgprev)||"",a.jgrid.getRegional(b,"defaults.pgnext",b.p.pgnext)||"",a.jgrid.getRegional(b,"defaults.pglast",b.p.pglast)||""];"rtl"===z&&(ja.reverse(),na.reverse());V="<td id='"+ja[0]+"' class='"+oa+"' title='"+na[0]+"'><span "+p(v,"icon_first",!1,w)+"></span></td>";ca="<td id='"+ja[1]+"' class='"+oa+"'  title='"+na[1]+"'><span "+p(v,"icon_prev",!1,w)+"></span></td>";
var ka="<td id='"+ja[2]+"' class='"+oa+"' title='"+na[2]+"'><span "+p(v,"icon_next",!1,w)+"></span></td>";oa="<td id='"+ja[3]+"' class='"+oa+"' title='"+na[3]+"'><span "+p(v,"icon_end",!1,w)+"></span></td>";I=""!==C?I+C+I:"";P="ltr"===z?P+(V+ca+I+ka+oa):P+(oa+ka+I+ca+V)}else""!==C&&(P+=C);"ltr"===z&&(P+=N);P+="</tr></tbody></table>";y=a.jgrid.jqID(y);ha=a.jgrid.jqID(ha);!0===b.p.viewrecords&&a("td#"+y+"_"+b.p.recordpos,"#"+ha).append("<div dir='"+z+"' class='ui-paging-info'></div>");a("td#"+y+"_"+
b.p.pagerpos,"#"+ha).append(P);N=a("#gbox_"+a.jgrid.jqID(b.p.id)).css("font-size")||"11px";a("#gbox_"+a.jgrid.jqID(b.p.id)).append("<div id='testpg' "+p(v,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+N+";visibility:hidden;' ></div>");P=a(P).clone().appendTo("#testpg").width();a("#testpg").remove();if(0<P){""!==C&&(P+=50);var Q=P>a("td#"+y+"_"+b.p.pagerpos,"#"+ha).innerWidth();a("td#"+y+"_"+b.p.pagerpos,"#"+ha).width(P)}b.p._nvtd=[];b.p._nvtd[0]=P?Math.floor((b.p.width-P)/2):Math.floor(b.p.width/
3);b.p._nvtd[1]=0;P=null;a(".ui-pg-selbox","#"+ha).on("change",function(){if(!aa("records",this))return!1;b.p.page=Math.round(b.p.rowNum*(b.p.page-1)/this.value-.5)+1;b.p.rowNum=this.value;b.p.pager&&a(".ui-pg-selbox",b.p.pager).val(this.value);b.p.toppager&&a(".ui-pg-selbox",b.p.toppager).val(this.value);Ba();return!1});!0===b.p.pgbuttons&&(a(".ui-pg-button","#"+ha).hover(function(){a(this).hasClass(t)?this.style.cursor="default":(a(this).addClass(n),this.style.cursor="pointer")},function(){a(this).hasClass(t)||
(a(this).removeClass(n),this.style.cursor="default")}),a("#first"+a.jgrid.jqID(D)+", #prev"+a.jgrid.jqID(D)+", #next"+a.jgrid.jqID(D)+", #last"+a.jgrid.jqID(D)).click(function(){if(a(this).hasClass(t))return!1;var M=S(b.p.page,1),ia=S(b.p.lastpage,1),ra=!1,sa=!0,Da=!0,La=!0,Ja=!0;0===ia||1===ia?Ja=La=Da=sa=!1:1<ia&&1<=M?1===M?Da=sa=!1:M===ia&&(Ja=La=!1):1<ia&&0===M&&(Ja=La=!1,M=ia-1);if(!aa(this.id.split("_")[0],this))return!1;this.id==="first"+D&&sa&&(b.p.page=1,ra=!0);this.id==="prev"+D&&Da&&(b.p.page=
M-1,ra=!0);this.id==="next"+D&&La&&(b.p.page=M+1,ra=!0);this.id==="last"+D&&Ja&&(b.p.page=ia,ra=!0);ra&&Ba();a.jgrid.setSelNavIndex(b,this);return!1}));if(!0===b.p.pginput)a("#"+ha).on("keypress","input.ui-pg-input",function(M){if(13===(M.charCode||M.keyCode||0)){M.preventDefault();if(!aa("user",this))return!1;a(this).val(S(a(this).val(),1));b.p.page=0<a(this).val()?a(this).val():b.p.page;Ba();return!1}return this});Q&&b.p.responsive&&!b.p.forcePgButtons&&(a("#"+ja[0]+",#"+ja[3]+",#input"+a.jgrid.jqID(D)).hide(),
a(".ui-paging-info","td#"+y+"_"+b.p.recordpos).hide(),a(".ui-pg-selbox","td#"+y+"_"+b.p.pagerpos).hide())},za=function(y,D,I){var C=b.p.colModel,P=[];D="";P.push(b.grid.headers[y].el);a("span.ui-grid-ico-sort",P).addClass(t);a(P).attr({"aria-selected":"false","aria-sort":"none"});var N=C[y].index||C[y].name;if("undefined"===typeof I)if(C[y].lso)if("asc"===C[y].lso)C[y].lso+="-desc",D="desc";else if("desc"===C[y].lso)C[y].lso+="-asc",D="asc";else{if("asc-desc"===C[y].lso||"desc-asc"===C[y].lso)C[y].lso=
""}else C[y].lso=D=C[y].firstsortorder||"asc";else C[y].lso=D=I;D?(a("span.s-ico",P).show(),a("span.ui-icon-"+D,P).removeClass(t),a(P).attr({"aria-selected":"true","aria-sort":D+"ending"})):b.p.viewsortcols[0]||a("span.s-ico",P).hide();y=F.indexOf(N);-1===y?(F.push(N),B.push(D)):D?B[y]=D:(B.splice(y,1),F.splice(y,1));b.p.sortorder="";b.p.sortname="";y=0;for(I=F.length;y<I;y++)0<y&&(b.p.sortname+=", "),b.p.sortname+=F[y],y!==I-1&&(b.p.sortname+=" "+B[y]);b.p.sortorder=B[I-1]},Ea=function(y,D,I,C,P){if(b.p.colModel[D].sortable&&
!(0<b.p.savedRow.length)){I||(b.p.lastsort===D&&""!==b.p.sortname?"asc"===b.p.sortorder?b.p.sortorder="desc":"desc"===b.p.sortorder&&(b.p.sortorder="asc"):b.p.sortorder=b.p.colModel[D].firstsortorder||"asc",b.p.page=1);if(b.p.multiSort)za(D,P,C);else{if(C){if(b.p.lastsort===D&&b.p.sortorder===C&&!I)return;b.p.sortorder=C}I=b.grid.headers[b.p.lastsort]?b.grid.headers[b.p.lastsort].el:null;C=b.grid.headers[D].el;P="single"===b.p.viewsortcols[1]?!0:!1;var N=a(I).find("span.ui-grid-ico-sort");N.addClass(t);
P&&a(N).css("display","none");a(I).attr({"aria-selected":"false","aria-sort":"none"});N=a(C).find("span.ui-icon-"+b.p.sortorder);N.removeClass(t);P&&N.css("display","");a(C).attr({"aria-selected":"true","aria-sort":b.p.sortorder+"ending"});b.p.viewsortcols[0]||(b.p.lastsort!==D?(a("span.s-ico",I).hide(),a("span.s-ico",C).show()):""===b.p.sortname&&a("span.s-ico",C).show());y=y.substring(5+b.p.id.length+1);b.p.sortname=b.p.colModel[D].index||y}"stop"===a(b).triggerHandler("jqGridSortCol",[b.p.sortname,
D,b.p.sortorder])?b.p.lastsort=D:a.jgrid.isFunction(b.p.onSortCol)&&"stop"===b.p.onSortCol.call(b,b.p.sortname,D,b.p.sortorder)?b.p.lastsort=D:(la(!1),"local"===b.p.datatype?b.p.deselectAfterSort&&!b.p.preserveSelection&&a(b).jqGrid("resetSelection"):(b.p.selrow=null,b.p.multiselect&&!b.p.preserveSelection&&(b.p.selarrrow=[]),b.p.savedRow=[]),b.p.scroll&&(I=b.grid.bDiv.scrollLeft,ua.call(b,!0,!1),b.grid.hDiv.scrollLeft=I),b.p.subGrid&&"local"===b.p.datatype&&a("td.sgexpanded","#"+a.jgrid.jqID(b.p.id)).each(function(){a(this).trigger("click")}),
b.p._sort=!0,Ba(),b.p.lastsort=D,b.p.sortname!==y&&D&&(b.p.lastsort=D))}},Fa=function(y){var D=y,I;for(I=y+1;I<b.p.colModel.length;I++)if(!0!==b.p.colModel[I].hidden){D=I;break}return D-y},Xa=function(y){y=a(b.grid.headers[y].el);y=[y.position().left+y.outerWidth()];"rtl"===b.p.direction&&(y[0]=b.p.width-y[0]);y[0]-=b.grid.bDiv.scrollLeft;y.push(a(b.grid.hDiv).position().top);y.push(a(b.grid.bDiv).offset().top-a(b.grid.hDiv).offset().top+a(b.grid.bDiv).height());return y},Qa=function(y){var D,I=b.grid.headers,
C=a.jgrid.getCellIndex(y);for(D=0;D<I.length;D++)if(y===I[D].el){C=D;break}return C},eb=function(y,D,I,C){y=b.p.colModel;var P=y.length,N,aa=[],ha=!0,V=[],ca=a.extend([],b.p.colNames);var ja=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].common;var oa=a.jgrid.getRegional(b,"colmenu"),na=[];D='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content '+ja.shadow+'" role="menu" tabindex="0" style="left:'+D+'px;">';C.columns_selectAll&&(D+='<li class="ui-menu-item disabled" role="presentation" draggable="false"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+
oa.reorder+'"><span class="'+w+" "+A.icon_move+' notclick" style="visibility:hidden"></span></td><td class="menu_icon"><input id="chk_all" class="'+A.input_checkbox+'" type="checkbox" name="check_all"></td><td class="menu_text">Check/Uncheck</td></tr></table></a></li>');if(b.p.colSpanHeader.length)for(var ka=0;ka<b.p.colSpanHeader.length;ka++){var Q=b.p.colSpanHeader[ka];ja=a.jgrid.getElemByAttrVal(y,"name",Q.startColumnName,!0);0<=ja&&(na.push(ja),ca[ja]=Q.titleText)}if(a(b).jqGrid("isGroupHeaderOn"))for(na=
b.p.groupHeader[b.p.groupHeader.length-1],ka=0;ka<ca.length;ka++)if(ja=a.jgrid.inColumnHeader(y[ka].name,na.groupHeaders),0<=ja){ca[ka]=na.groupHeaders[ja].titleText+"::"+ca[ka];for(Q=1;Q<=na.groupHeaders[ja].numberOfColumns-1;Q++)ca[ka+Q]=na.groupHeaders[ja].titleText+"::"+ca[ka+Q];ka=ka+na.groupHeaders[ja].numberOfColumns-1}for(N=0;N<P;N++)na=y[N].hidden?"":"checked",ka=y[N].name,Q=ca[N],ja="cb"===ka||"subgrid"===ka||"rn"===ka||"sc"===ka||y[N].hidedlg?"style='display:none'":"",D+="<li "+ja+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+
oa.reorder+'"><span class="'+w+" "+A.icon_move+' notclick"></span></td><td class="menu_icon"><input class="'+A.input_checkbox+' chk_selected" type="checkbox" name="'+ka+'" '+na+'></td><td class="menu_text">'+Q+"</td></tr></table></a></li>",aa.push(N),""===ja&&V.push(ka),ha&&""===na&&(ha=!1);D+="</ul>";a(I).append(D);a("#col_menu").addClass("ui-menu "+A.menu_widget);a("#chk_all","#col_menu").prop("checked",ha);a.jgrid.isElementInViewport(a("#col_menu")[0])||a("#col_menu").css("left",-parseInt(a("#column_menu").innerWidth(),
10)+"px");if(a.fn.html5sortable())a("#col_menu").html5sortable({handle:"span",items:":not(.disabled)",forcePlaceholderSize:!0}).on("sortupdate",function(M,ia){aa.splice(ia.startindex,1);aa.splice(ia.endindex,0,ia.startindex);a(b).jqGrid("destroyFrozenColumns");a(b).jqGrid("remapColumns",aa,!0);a(b).triggerHandler("jqGridColMenuColumnDone",[aa,null,null]);a.jgrid.isFunction(b.p.colMenuColumnDone)&&b.p.colMenuColumnDone.call(b,aa,null,null);a(b).jqGrid("setFrozenColumns");for(N=0;N<P;N++)aa[N]=N});
a("#col_menu > li > a").on("click",function(M){if(!a(M.target).hasClass("notclick")){a(M.target).is(":input")?M=a(M.target).is(":checked"):(M=!a("input",this).is(":checked"),a("input",this).prop("checked",M));var ia=a("input",this).attr("name");"check_all"===ia?M?(a("input","#col_menu").prop("checked",!0),a(b).jqGrid("showCol",V)):(a("input","#col_menu").prop("checked",!1),a(b).jqGrid("hideCol",V)):(a(b).triggerHandler("jqGridColMenuColumnDone",[aa,ia,M]),a.jgrid.isFunction(b.p.colMenuColumnDone)&&
b.p.colMenuColumnDone.call(b,aa,ia,M),M?(a(b).jqGrid("showCol",ia),a(this).parent().attr("draggable","true")):(a(b).jqGrid("hideCol",ia),a(this).parent().attr("draggable","false")),C.columns_selectAll&&a("#chk_all","#col_menu").prop("checked",a(".chk_selected:checked","#col_menu").length===a(".chk_selected","#col_menu").length),a("#column_menu").remove())}}).hover(function(){a(this).addClass(n)},function(){a(this).removeClass(n)})},Ya=function(y,D,I,C){var P=b.p.colModel[y],N,aa="",ha="",V="",ca=
"";y="";var ja="",oa;var na="eq ne lt le gt ge nu nn in ni".split(" ");var ka="eq ne bw bn ew en cn nc nu nn in ni".split(" "),Q=["text","string","blob"];D=a.jgrid.getRegional(b,"search");var M=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].common,ia=a.jgrid.styleUI[g.styleUI||"jQueryUI"].modal;if(P){(N=b.p.colFilters&&b.p.colFilters[P.name]?b.p.colFilters[P.name]:!1)&&!a.isEmptyObject(N)&&(aa=N.oper1,ha=N.value1,V=N.rule,ca=N.oper2,y=N.value2);P.searchoptions||(P.searchoptions={});var ra=P.searchoptions.sopt?
P.searchoptions.sopt:-1!==a.inArray(P.sorttype,Q)?ka:na;N=P.searchoptions.groupOps?P.searchoptions.groupOps:D.groupOps;na=a("<form></form>");var sa="<a id='bs_close' aria-label='Close'><span class='"+w+" "+ia.icon_close+"'></span></a>";sa+="<div>"+a.jgrid.getRegional(b,"colmenu.searchTitle")+"</div>";sa+='<div><select size="1" id="oper1" class="'+A.filter_select+'">';a.each(D.odata,function(La,Ja){oa=Ja.oper===aa?'selected="selected"':"";-1!==a.inArray(Ja.oper,ra)&&(ja+='<option value="'+Ja.oper+
'"  aria-label="'+Ja.text+'" '+oa+">"+Ja.text+"</option>")});sa+=ja;sa+="</select></div>";na.append(sa);var Da="";P.searchoptions.defaultValue&&(Da=a.jgrid.isFunction(P.searchoptions.defaultValue)?P.searchoptions.defaultValue.call(b):P.searchoptions.defaultValue);ha&&(Da=ha);ha=a.extend(P.searchoptions,{name:P.index||P.name,id:"sval1_"+b.p.idPrefix+P.name,oper:"search"});ha=a.jgrid.createEl.call(b,P.stype,ha,Da,!1,a.extend({},a.jgrid.ajaxOptions,b.p.ajaxSelectOptions||{}));a(ha).addClass(A.filter_input);
sa=a("<div></div>").append(ha);na.append(sa);sa='<div><select size="1" id="operand" class="'+A.filter_select+'">';a.each(N,function(La,Ja){oa=Ja.op===V?'selected="selected"':"";sa+="<option value='"+Ja.op+"' "+oa+">"+Ja.text+"</option>"});sa+="</select></div>";na.append(sa);ja="";a.each(D.odata,function(La,Ja){oa=Ja.oper===ca?'selected="selected"':"";-1!==a.inArray(Ja.oper,ra)&&(ja+='<option value="'+Ja.oper+'" '+oa+">"+Ja.text+"</option>")});sa='<div><select size="1" id="oper2" class="'+A.filter_select+
'">'+ja+"</select></div>";na.append(sa);Da=y?y:"";ha=a.extend(P.searchoptions,{name:P.index||P.name,id:"sval2_"+b.p.idPrefix+P.name,oper:"search"});ha=a.jgrid.createEl.call(b,P.stype,ha,Da,!1,a.extend({},a.jgrid.ajaxOptions,b.p.ajaxSelectOptions||{}));a(ha).addClass(A.filter_input);sa=a("<div></div>").append(ha);na.append(sa);sa="<div>";sa+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+M.button+" ui-reset'>"+D.Reset+"</a></div>";sa+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+
M.button+" ui-search'>"+D.Find+"</a></div>";sa+="</div>";na.append(sa);na=a('<li class="ui-menu-item" role="presentation"></li>').append(na);na=a('<ul id="search_menu" class="ui-search-menu modal-content '+M.shadow+'" role="menu" tabindex="0" style="left:'+I+'px;"></ul>').append(na);a(C).append(na);a("#search_menu").addClass("ui-menu "+A.menu_widget);a.jgrid.isElementInViewport(a("#search_menu")[0])||a("#search_menu").css("left",-parseInt(a("#column_menu").innerWidth(),10)+"px");a("#bs_reset, #bs_search",
"#search_menu","#bs_close").hover(function(){a(this).addClass(n)},function(){a(this).removeClass(n)});a("#bs_reset",na).on("click",function(La){b.p.colFilters[P.name]={};!0===b.p.mergeSearch&&b.p.searchModules.hasOwnProperty("colMenuSearch")&&!1!==b.p.searchModules.colMenuSearch?(b.p.searchModules.colMenuSearch=jb(),a.extend(b.p.postData,{filters:a.jgrid.splitSearch(b.p.searchModules)}),b.p.search=!0):(b.p.postData.filters=jb(),b.p.search=!1,b.p.resetsearch=!0);Da="";P.searchoptions.defaultValue&&
(Da=a.jgrid.isFunction(P.searchoptions.defaultValue)?P.searchoptions.defaultValue.call(b):P.searchoptions.defaultValue);a("#sval1_"+b.p.idPrefix+P.name,"#search_menu").val(Da);a("#sval2_"+b.p.idPrefix+P.name,"#search_menu").val("");a.jgrid.isFunction(b.p.colMenuBeforeProcess)&&b.p.colMenuBeforeProcess.call(b,{module:"filtering",action:"reset",column:P.name});a(b).trigger("reloadGrid")});a("#bs_search",na).on("click",function(La){b.p.colFilters[P.name]={oper1:a("#oper1","#search_menu").val(),value1:a("#sval1_"+
b.p.idPrefix+P.name,"#search_menu").val(),rule:a("#operand","#search_menu").val(),oper2:a("#oper2","#search_menu").val(),value2:a("#sval2_"+b.p.idPrefix+P.name,"#search_menu").val()};!0===b.p.mergeSearch&&b.p.searchModules.hasOwnProperty("colMenuSearch")&&!1!==b.p.searchModules.colMenuSearch?(b.p.searchModules.colMenuSearch=jb(),a.extend(b.p.postData,{filters:a.jgrid.splitSearch(b.p.searchModules)})):b.p.postData.filters=jb();b.p.search=!0;a.jgrid.isFunction(b.p.colMenuBeforeProcess)&&b.p.colMenuBeforeProcess.call(b,
{module:"filtering",action:"search",column:P.name});a(b).trigger("reloadGrid");a("#column_menu").remove()});a("#bs_close",na).on("click",function(){a("#column_menu").remove()})}},jb=function(){var y="",D=0,I;for(I in b.p.colFilters)if(b.p.colFilters.hasOwnProperty(I)){var C=b.p.colFilters[I];if(!a.isEmptyObject(C)){if(""===C.value1&&""===C.value2)break;0<D&&(y+=",");y+='{"groupOp":"'+C.rule+'","rules":[';y+='{"field":"'+I+'",';y+='"op":"'+C.oper1+'",';C.value1+="";y+='"data":"'+C.value1.replace(/\\/g,
"\\\\").replace(/"/g,'\\"')+'"}';C.value2&&(y+=',{"field":"'+I+'",',y+='"op":"'+C.oper2+'",',C.value2+="",y+='"data":"'+C.value2.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"}');y+="]";D++}}y+="}";0===D&&(y="");return y},zb=function(y,D,I,C,P){var N=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].colmenu,aa=b.p.colMenuCustom[C].items,ha='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content '+a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].common.shadow+'" role="menu" tabindex="0" style="left:'+D+'px;">';
aa.forEach(V=>{V.icon||(V.icon=N.icon_new_item);ha="separator"==V.id?ha+'<li class="ui-menu-item divider" role="separator"></li>':ha+('<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="'+V.id+'"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+V.icon+'"></span></td><td class="menu_text">'+V.title+"</td></tr></table></a></li>")});ha+="</ul>";a(I).append(ha);a("#col_menu").addClass("ui-menu "+A.menu_widget);a.jgrid.isElementInViewport(a("#col_menu")[0])||
a("#col_menu").css("left",-parseInt(a("#column_menu").innerWidth(),10)+"px");a("#col_menu > li > a").on("click",function(V){var ca=a(this).attr("data-value");(V=aa.find(ja=>ja.id===ca))&&a.jgrid.isFunction(V.funcname)&&(V.funcname.call(b,P),V.closeOnRun&&a(this).remove())}).hover(function(){a(this).addClass(n)},function(){a(this).removeClass(n)})},Gb=function(y,D,I){I=a(k.hDiv).height();a(".ui-search-toolbar",k.hDiv)[0]&&!isNaN(a(".ui-search-toolbar",k.hDiv).height())&&(I-=a(".ui-search-toolbar",
k.hDiv).height());a(k.cDiv).is(":hidden")||(I+=a(k.cDiv).outerHeight());b.p.toolbar[1]&&"bottom"!==b.p.toolbar[2]&&!a.jgrid.isNull(a(k.uDiv),!0)&&(I+=a(k.uDiv).outerHeight());b.p.toppager&&(I+=a("#"+a.jgrid.jqID(b.p.id)+"_toppager").outerHeight());D=parseInt(D,10);var C="",P="",N=b.p.colModel[y],aa=a.extend({sorting:!0,columns:!0,filtering:!0,seraching:!0,grouping:!0,freeze:!0},N.coloptions),ha=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].common,V=a.jgrid.getRegional(b,"colmenu");P=b.p.colNames[y];var ca=
[],ja=a.jgrid.trim(N.name);ca.push(C);N.sortable&&aa.sorting&&(C='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+A.icon_sort_asc+'"></span></td><td class="menu_text">'+V.sortasc+"</td></tr></table></a></li>",C+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+
w+" "+A.icon_sort_desc+'"></span></td><td class="menu_text">'+V.sortdesc+"</td></tr></table></a></li>",ca.push(C));aa.columns&&(C='<li class="ui-menu-item divider" role="separator"></li><li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+(w+" "+A.icon_columns+'"></span></td><td class="menu_text">'+V.columns+"</td></tr></table></a></li>"),ca.push(C));aa.filtering&&
(C='<li class="ui-menu-item divider" role="separator"></li><li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+(w+" "+A.icon_filter+'"></span></td><td class="menu_text">'+V.filter+" "+P+"</td></tr></table></a></li>"),ca.push(C));if(aa.grouping){var oa=a.inArray(N.name,b.p.groupingView.groupField);C='<li class="ui-menu-item divider" role="separator"></li><li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+
(w+" "+A.icon_group+'"></span></td><td class="menu_text">'+(-1!==oa?V.ungrouping:V.grouping+" "+P)+"</td></tr></table></a></li>");ca.push(C)}if(aa.freeze&&!(b.p.subGrid||b.p.treeGrid||b.p.cellEdit)){var na=N.frozen&&b.p.frozenColumns?!1:!0;C='<li class="ui-menu-item divider" role="separator"></li><li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+(w+" "+A.icon_freeze+
'"></span></td><td class="menu_text">'+(na?V.freeze+" "+P:V.unfreeze)+"</td></tr></table></a></li>");ca.push(C)}for(var ka in b.p.colMenuCustom)b.p.colMenuCustom.hasOwnProperty(ka)&&(V=b.p.colMenuCustom[ka],a.jgrid.isFunction(b.p.colMenuBeforeProcess)&&b.p.colMenuBeforeProcess.call(b,{module:"custom",action:V,column:V.colname}),a(b).triggerHandler("jqGridcolMenuBeforeProcess",[{module:"custom",action:V,column:V.colname}]),C=V.exclude.split(","),C=a.map(C,function(Q){return a.jgrid.trim(Q)}),V.colname===
ja||"_all_"===V.colname&&-1===a.inArray(ja,C))&&(C=V.items.length?"submenu":V.id,P='<li class="ui-menu-item divider" role="separator"></li>',C='<li class="ui-menu-item" role="presentation"><a id="'+V.id+'" class="g-menu-item" tabindex="0" role="menuitem" data-value="'+C+'"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+V.icon+'"></span></td><td class="menu_text">'+V.title+"</td></tr></table></a></li>","last"===V.position?(V.separator&&ca.push(P),ca.push(C)):"first"===
V.position&&(V.separator&&ca.unshift(P),ca.unshift(C)));ca.unshift('<ul id="column_menu" role="menu" tabindex="0">');ca.push("</ul>");a("#gbox_"+b.p.id).append(ca.join(""));a("#column_menu").addClass("ui-search-menu modal-content column-menu jqgrid-column-menu ui-menu "+ha.shadow+"  "+A.menu_widget).css({left:D,top:I});"ltr"===b.p.direction&&(ka=a("#column_menu").width()+26,a("#column_menu").css("left",D-ka+"px"));a("#column_menu > li > a").hover(function(){a("#col_menu").remove();a("#search_menu").remove();
if("columns"===a(this).attr("data-value")){var Q=a(this).parent().width()+8;var M=a(this).parent().position().top-5;eb(M,Q,a(this).parent(),aa)}"filtering"===a(this).attr("data-value")&&(Q=a(this).parent().width()+8,M=a(this).parent().position().top-5,Ya(y,M,Q,a(this).parent()));"submenu"===a(this).attr("data-value")&&(Q=a(this).parent().width()+8,M=a(this).parent().position().top-5,zb(M,Q,a(this).parent(),a(this).attr("id"),ja));a(this).addClass(n)},function(){a(this).removeClass(n)}).click(function(){var Q=
a(this).attr("data-value"),M=b.grid.headers[y].el;if("sortasc"===Q||"sortdesc"===Q)a.jgrid.isFunction(b.p.colMenuBeforeProcess)&&b.p.colMenuBeforeProcess.call(b,{module:"sorting",action:"sortasc"===Q?"asc":"desc",column:N.name}),Ea("jqgh_"+b.p.id+"_"+N.name,y,!0,"sortasc"===Q?"asc":"desc",M);else if("grouping"===Q){M=oa;var ia=b.p.colModel[y],ra=b.p.groupingView;-1!==M?ra.groupField.splice(M,1):ra.groupField.push(ia.name);a.jgrid.isFunction(b.p.colMenuBeforeProcess)&&b.p.colMenuBeforeProcess.call(b,
{module:"grouping",action:-1!==M?"ungroup":"group",column:ia.name});a(b).jqGrid("groupingGroupBy",ra.groupField)}else if("freeze"===Q){M=na;ia=[];var sa=b.p.colModel.length,Da=-1,La=b.p.colModel;for(ra=0;ra<sa;ra++)La[ra].frozen&&(Da=ra),ia.push(ra);ia.splice(y,1);ia.splice(Da+(M?1:0),0,y);La[y].frozen=M;a.jgrid.isFunction(b.p.colMenuBeforeProcess)&&b.p.colMenuBeforeProcess.call(b,{module:"freeze",action:M?"freeze":"unfreeze",column:La[y].name});a(b).jqGrid("destroyFrozenColumns");a(b).jqGrid("remapColumns",
ia,!0);a(b).jqGrid("setFrozenColumns")}"grouping"!==Q&&"freeze"!==Q||a(this).remove();b.p.colMenuCustom.hasOwnProperty(Q)&&(Q=b.p.colMenuCustom[Q],a.jgrid.isFunction(Q.funcname)&&(Q.funcname.call(b,ja),Q.closeOnRun&&a(this).remove()))});0>parseFloat(a("#column_menu").css("left"))&&a("#column_menu").css("left",a(b).css("left"))};if(b.p.colMenu||b.p.menubar)a("body").on("click",function(y){if(!a(y.target).closest("#column_menu").length)try{a("#column_menu").remove()}catch(D){}if(!a(y.target).closest(".ui-jqgrid-menubar").length)try{a("#"+
b.p.id+"_menubar").hide()}catch(D){}});this.p.id=this.id;if(!0===b.p.autowidth){var Qb=a(O).parent().width();var Ia=a(window).width();b.p.width=3<Ia-Qb?Qb:Ia-1}-1===a.inArray(b.p.multikey,["shiftKey","altKey","ctrlKey"])&&(b.p.multikey=!1);b.p.keyName=!1;for(l=0;l<b.p.colModel.length;l++){var hc="string"===typeof b.p.colModel[l].template?a.jgrid.isNull(a.jgrid.cmTemplate)||"object"!==typeof a.jgrid.cmTemplate[b.p.colModel[l].template]?{}:a.jgrid.cmTemplate[b.p.colModel[l].template]:b.p.colModel[l].template;
b.p.colModel[l]=a.extend(!0,{},b.p.cmTemplate,hc||{},b.p.colModel[l]);!1===b.p.keyName&&!0===b.p.colModel[l].key&&(b.p.keyName=b.p.colModel[l].name,b.p.keyIndex=l)}b.p.sortorder=b.p.sortorder.toLowerCase();a.jgrid.cell_width=a.jgrid.cellWidth();var sb=a("<table style='visibility:hidden'><tr class='jqgrow'><td>1</td></tr></table>").addClass(p(v,"rowTable",!0,"ui-jqgrid-btable ui-common-table"));a(O).append(sb);b.p.cellLayout=a.jgrid.floatNum(a("td",sb).css("padding-left"))+a.jgrid.floatNum(a("td",
sb).css("padding-right"),10)+1;0>=b.p.cellLayout&&(b.p.cellLayout=5);a(sb).remove();sb=null;!0===b.p.grouping&&(b.p.scroll=!1,b.p.treeGrid=!1,b.p.gridview=!0);if(!0===this.p.treeGrid){try{a(this).jqGrid("setTreeGrid")}catch(y){}"local"!==b.p.datatype?b.p.localReader={id:"_id_"}:!1!==b.p.keyName&&(b.p.localReader={id:b.p.keyName})}if(this.p.subGrid)try{a(b).jqGrid("setSubGrid")}catch(y){}this.p.searchCols&&(this.p.colNames.unshift(b.p.searchColOptions.colName),this.p.colModel.unshift({name:"sc",width:b.p.searchColOptions.colWidth,
sortable:!1,hidedlg:!0,search:!1,align:"left",fixed:!0,frozen:!0,colmenu:b.p.searchColOptions.colmenu,classes:"jqgrid-searchcol",labelClasses:"jqgrid-searchcolumn",coloptions:{sorting:!1,columns:!1,filtering:!1,seraching:!1,grouping:!1,freeze:!1}}));if(this.p.multiselect){var Hb=a.jgrid.getRegional(b,"defaults.selectAllLines");Hb=Hb?Hb:a.jgrid.regional.en.defaults.selectAllLines;this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox' title='"+Hb+"'/>");this.p.colModel.unshift({name:"cb",
width:a.jgrid.cell_width?b.p.multiselectWidth+b.p.cellLayout:b.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0,classes:"jqgrid-multibox",labelClasses:"jqgrid-multibox"})}this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:b.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0,labelClasses:"jqgrid-rownumber"}));b.p.xmlReader=a.extend(!0,{root:"rows",row:"row",page:"rows>page",
total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},b.p.xmlReader);b.p.jsonReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},b.p.jsonReader);b.p.localReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",
subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},b.p.localReader);b.p.scroll&&(b.p.pgbuttons=!1,b.p.pginput=!1,b.p.rowList=[]);b.p.data.length&&(fa(),Y());var kb="<thead role='rowgroup'><tr class='ui-jqgrid-labels' role='row'>",Ib,Eb,tb="",Oa,Pa,Rb="",Sb="";if(!0===b.p.shrinkToFit&&!0===b.p.forceFit)for(l=b.p.colModel.length-1;0<=l;l--)if(!b.p.colModel[l].hidden){b.p.colModel[l].resizable=!1;break}"horizontal"===b.p.viewsortcols[1]?(Rb=" ui-i-asc",Sb=" ui-i-desc"):"single"===b.p.viewsortcols[1]&&
(Rb=" ui-single-sort-asc",Sb=" ui-single-sort-desc",tb=" style='display:none'",b.p.viewsortcols[0]=!1);var ic=H?"class='ui-th-div-ie'":"";var Tb="<span class='s-ico' style='display:none'><span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+(Rb+" ui-sort-"+z+" "+t+" "+w+" "+p(v,"icon_asc",!0)+"'"+tb+" aria-label='empty'><span style='display:none'>empty</span></span>");Tb+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+Sb+" ui-sort-"+z+" "+t+" "+w+" "+p(v,"icon_desc",!0)+"'"+tb+" aria-label='empty'><span style='display:none'>empty</span></span></span>";
if(b.p.multiSort&&b.p.sortname)for(F=b.p.sortname.split(","),l=0;l<F.length;l++)E=a.jgrid.trim(F[l]).split(" "),F[l]=a.jgrid.trim(E[0]),B[l]=E[1]?a.jgrid.trim(E[1]):b.p.sortorder||"asc";for(l=0;l<this.p.colNames.length;l++){var jc=b.p.headertitles?' title="'+(b.p.colModel[l].tooltip?b.p.colModel[l].tooltip:a.jgrid.stripHtml(b.p.colNames[l]))+'"':"";Ia=b.p.colModel[l];Ia.hasOwnProperty("colmenu")||(Ia.colmenu="rn"===Ia.name||"cb"===Ia.name||"subgrid"===Ia.name?!1:!0);kb+="<th id='"+b.p.id+"_"+Ia.name+
"' role='columnheader'  scope='col' "+p(v,"headerBox",!1,"ui-th-column ui-th-"+z+" "+(Ia.labelClasses||""))+jc+">";var $b=Ia.index||Ia.name;kb+="<div class='ui-th-div' id='jqgh_"+b.p.id+"_"+Ia.name+"' "+ic+">"+b.p.colNames[l];Ia.width=Ia.width?parseInt(Ia.width,10):b.p.defaultColWidth;"boolean"!==typeof Ia.title&&(Ia.title=!0);Ia.lso="";$b===b.p.sortname&&(b.p.lastsort=l);b.p.multiSort&&(E=a.inArray($b,F),-1!==E&&(Ia.lso=B[E]));kb+=Tb;b.p.colMenu&&Ia.colmenu&&(kb+="<a title='"+a.jgrid.getRegional(b,
"colmenu.hovermenu")+"' class='"+("ltr"===b.p.direction?"colmenu":"colmenu-rtl")+"'><span class='colmenuspan "+w+" "+A.icon_menu+"'></span></a>");kb+="</div></th>"}kb+="</tr></thead>";Ia=Tb=null;a(this).append(kb);a("thead tr",this).first().find("th").hover(function(){a(this).addClass(n)},function(){a(this).removeClass(n)});if(this.p.multiselect){var Jb=[],Ab;a("#cb_"+a.jgrid.jqID(b.p.id),this).on("click",function(){b.p.preserveSelection||(b.p.selarrrow=[]);this.checked?(a(b.rows).each(function(y){0<
y&&!(a(this).hasClass("ui-subgrid")||a(this).hasClass("jqgroup")||a(this).hasClass(t)||a(this).hasClass("jqfoot"))&&(a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id))[b.p.useProp?"prop":"attr"]("checked",!0),a(this).addClass(u).attr("aria-selected","true"),b.p.preserveSelection?-1===b.p.selarrrow.indexOf(this.id)&&b.p.selarrrow.push(this.id):b.p.selarrrow.push(this.id),b.p.selrow=this.id)}),Ab=!0,Jb=[]):(a(b.rows).each(function(y){0<y&&!(a(this).hasClass("ui-subgrid")||a(this).hasClass("jqgroup")||
a(this).hasClass(t)||a(this).hasClass("jqfoot"))&&(a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+a.jgrid.jqID(this.id))[b.p.useProp?"prop":"attr"]("checked",!1),a(this).removeClass(u).attr("aria-selected","false"),Jb.push(this.id),b.p.preserveSelection&&(y=b.p.selarrrow.indexOf(this.id),-1<y&&b.p.selarrrow.splice(y,1)))}),b.p.selrow=null,Ab=!1);a(b).triggerHandler("jqGridSelectAll",[Ab?b.p.selarrrow:Jb,Ab]);a.jgrid.isFunction(b.p.onSelectAll)&&b.p.onSelectAll.call(b,Ab?b.p.selarrrow:Jb,Ab);a.jgrid.isFunction(b.p.onMultiSelect)&&
b.p.onMultiSelect.call(b,b.p.selarrrow)})}var Kb="",Lb="",hb=-1!==b.p.styleUI.search("Bootstrap")?2:0;(function(){var y=0,D=a.jgrid.cell_width?0:S(b.p.cellLayout,0),I=0,C,P=S(b.p.scrollOffset,0),N,aa=!1,ha=0,V;a.each(b.p.colModel,function(){void 0===this.hidden&&(this.hidden=!1);if(b.p.grouping&&b.p.autowidth){var sa=a.inArray(this.name,b.p.groupingView.groupField);0<=sa&&b.p.groupingView.groupColumnShow.length>sa&&(this.hidden=!b.p.groupingView.groupColumnShow[sa])}this.widthOrg=S(this.width,0);
this.maxWidth&&S(this.width,0)>S(this.maxWidth,0)&&(this.width=this.maxWidth);N=S(this.width,0);!1===this.hidden&&(y+=N+D,this.fixed?ha+=N+D:I++)});isNaN(b.p.width)&&(b.p.width=y+(!1!==b.p.shrinkToFit||isNaN(b.p.height)?0:P));k.width=parseInt(b.p.width,10);b.p.tblwidth=y;!1===b.p.shrinkToFit&&!0===b.p.forceFit&&(b.p.forceFit=!1);if(!0===b.p.shrinkToFit&&0<I){var ca=k.width-D*I-ha;isNaN(b.p.height)||(ca-=P,aa=!0);var ja=y=0,oa=0,na=[],ka=0;a.each(b.p.colModel,function(sa){!1!==this.hidden||this.fixed||
(N=Math.round(ca*this.width/(b.p.tblwidth-D*I-ha)),this.maxWidth&&N>this.maxWidth?(ja++,oa+=N,this.width=this.maxWidth,V=sa):(this.width=N,ka+=N,na.push(sa+"")),y+=this.width,C=sa)});var Q=0;y+=oa;var M=-1;if(0<ja&&0<I){for(var ia=0,ra=0;ra<na.length;ra++)M=parseInt(na[ra],10),ia+=Math.round(b.p.colModel[M].width*oa/ka),b.p.colModel[M].width+=Math.round(b.p.colModel[M].width*oa/ka);ia!==oa&&(b.p.colModel[M].width+=oa-ia)}aa?k.width-ha-(y+D*I)!==P&&(Q=k.width-ha-(y+D*I)-P):aa||0===Math.abs(k.width-
ha-(y+D*I))||(Q=k.width-ha-(y+D*I)-hb);-1<M&&C===V&&(C=M);b.p.colModel[C].width+=Q+-1;b.p.tblwidth=y+Q+D*I+ha;b.p.tblwidth>b.p.width?(b.p.colModel[C].width-=b.p.tblwidth-parseInt(b.p.width,10),b.p.tblwidth=b.p.width):aa||b.p.tblwidth!==b.p.width||(b.p.colModel[C].width-=hb,b.p.tblwidth-=hb)}})();sb=-1!==b.p.styleUI.search("Bootstrap");a(O).css("width",k.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+b.p.id+"'>&#160;</div>");b.p.scrollPopUp&&a(O).append("<div "+p(v,"scrollBox",!1,
"loading ui-scroll-popup")+" id='scroll_g"+b.p.id+"'></div>").mouseout(function(){a("#scroll_g"+g.id).hide()});a(R).css("width",k.width+"px");kb=a(b).find("thead").first().get(0);b.p.footerrow&&(Kb+="<table role='presentation' style='width:"+b.p.tblwidth+"px' "+p(v,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+p(v,"footerBox",!1,"footrow footrow-"+z)+">");b.p.headerrow&&(Lb+="<table role='presentation' style='width:"+b.p.tblwidth+"px' "+p(v,"headerRowTable",!1,"ui-jqgrid-hrtable ui-common-table")+
"><tbody><tr role='row' "+p(v,"headerRowBox",!1,"hrheadrow hrheadrow-"+z)+">");var Ub=a(kb).find("tr").first(),Mb="<tr class='jqgfirstrow "+("rtl"===b.p.direction?"ui-row-rtl'":"'")+" role='row'>",Nb=0,kc=a.jgrid.getFont(a("th",Ub).first()[0]);b.p.disableClick=!1;a("th",Ub).each(function(y){Ia=b.p.colModel[y];Ib=Ia.width;void 0===Ia.resizable&&(Ia.resizable=!0);Ia.resizable?(Eb=document.createElement("span"),a(Eb).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+z).css("cursor","col-resize"),
a(this).addClass(b.p.resizeclass)):Eb="";a(this).css("width",Ib+"px").prepend(Eb);Eb=null;var D="",I="";Ia.hidden&&(a(this).css("display","none"),D="display:none;");Ia.labelClasses&&(I="class='"+Ia.labelClasses+"'");Mb+="<td "+I+" role='gridcell' style='height:0px;width:"+Ib+"px;"+D+"'></td>";k.headers[y]={width:Ib,el:this};tb=Ia.sortable;"boolean"!==typeof tb&&(tb=Ia.sortable=!0);D=Ia.name;"cb"!==D&&"subgrid"!==D&&"rn"!==D&&"sc"!==D&&b.p.viewsortcols[2]&&a(">div",this).addClass("ui-jqgrid-sortable");
Ia.canvas_width=Ia.autosize_headers?a.jgrid.getTextWidth(a("div",this)[0].outerText,kc)+(Ia.colmenu?a.jgrid.floatNum(a(".colmenuspan",this).parent().width()):0)+a.jgrid.floatNum(a("div",this).css("padding-left"))+a.jgrid.floatNum(a("div",this).css("padding-right"))+a.jgrid.floatNum(a(".ui-jqgrid-resize",this).width()):0;tb&&(b.p.multiSort?b.p.viewsortcols[0]?(a("div span.s-ico",this).show(),Ia.lso&&a("div span.ui-icon-"+Ia.lso,this).removeClass(t).css("display","")):Ia.lso&&(a("div span.s-ico",this).show(),
a("div span.ui-icon-"+Ia.lso,this).removeClass(t).css("display","")):b.p.viewsortcols[0]?(a("div span.s-ico",this).show(),y===b.p.lastsort&&a("div span.ui-icon-"+b.p.sortorder,this).removeClass(t).css("display","")):y===b.p.lastsort&&""!==b.p.sortname&&(a("div span.s-ico",this).show(),a("div span.ui-icon-"+b.p.sortorder,this).removeClass(t).css("display","")));b.p.footerrow&&(Kb+="<td role='gridcell' "+K(y,0,"",null,"",!1)+">&#160;</td>");b.p.headerrow&&(Lb+="<td role='gridcell' "+K(y,0,"",null,"",
!1)+">&#160;</td>")}).mousedown(function(y){if(1===a(y.target).closest("th>span.ui-jqgrid-resize").length){var D=Qa(this);y.preventDefault();Nb++;setTimeout(function(){Nb=0},400);if(2===Nb)try{if(!0===b.p.colModel[D].autosize){var I=a(b).jqGrid("getCol",D,!1,"maxwidth");a(b).jqGrid("resizeColumn",D,I+(sb?b.p.cellLayout:0)).jqGrid("refreshGroupHeaders")}}catch(C){}finally{Nb=0}else return!0===b.p.forceFit&&(b.p.nv=Fa(D)),k.dragStart(D,y,Xa(D)),!1}}).click(function(y){if(b.p.disableClick)return b.p.disableClick=
!1;var D="th>div.ui-th-div";b.p.viewsortcols[2]||(D="th>div>span>span.ui-grid-ico-sort");var I=a(y.target).closest(D);if(1===I.length)if(D=Qa(this),a(y.target).hasClass("colmenuspan")){if(a.jgrid.isNull(a("#column_menu")[0])||a("#column_menu").remove(),void 0!==D){var C=a("#gbox_"+b.p.id).offset();C=a(this).offset().left-C.left;"ltr"===b.p.direction&&(C+=a(this).outerWidth());Gb(D,C,0);!0===b.p.menubar&&a("#"+b.p.id+"_menubar").hide();y.stopPropagation()}}else{if(!b.p.viewsortcols[2]){C=!0;var P=
I.attr("sort")}y="boolean"!==a.jgrid.type(b.p.colModel[D].sortInHeader)?!0:b.p.colModel[D].sortInHeader;!a.jgrid.isNull(D)&&y&&Ea(a("div",this)[0].id,D,C,P,this);void 0!==b.p.selHeadInd&&a(k.headers[b.p.selHeadInd].el).attr("tabindex","-1");b.p.selHeadInd=D;a(this).attr("tabindex","0")}});Ia=null;jQuery._cacheCanvas=null;if(b.p.sortable&&a.fn.sortable)try{a(b).jqGrid("sortableColumns",Ub)}catch(y){}b.p.footerrow&&(Kb+="</tr></tbody></table>");b.p.headerrow&&(Lb+="</tr></tbody></table>");Mb+="</tr>";
var ac=document.createElement("tbody");a(ac).attr({role:"rowgroup"});this.appendChild(ac);a(this).addClass(p(v,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(Mb);b.p.altRows&&a(this).addClass(p(v,"stripedTable",!0,""));Mb=null;var bc=a("<table "+p(v,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+b.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"'></table>").append(kb),ib=b.p.caption&&!0===b.p.hiddengrid?!0:!1,pb=a("<div class='ui-jqgrid-hbox"+("rtl"===
z?"-rtl":"")+"'></div>");kb=null;k.hDiv=document.createElement("div");k.hDiv.style.width=k.width-hb+"px";k.hDiv.className=p(v,"headerDiv",!0,"ui-jqgrid-hdiv");a(k.hDiv).append(pb);a(pb).append(bc);bc=null;ib&&a(k.hDiv).hide();b.p.pager&&("string"===typeof b.p.pager?"#"===b.p.pager.slice(0,1)&&(b.p.pager=b.p.pager.substring(1)):b.p.pager=a(b.p.pager).attr("id"),a("#"+a.jgrid.jqID(b.p.pager)).css({width:k.width-hb+"px"}).addClass(p(v,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(O),ib&&a("#"+a.jgrid.jqID(b.p.pager)).hide(),
Ca(b.p.pager,""),b.p.pager="#"+a.jgrid.jqID(b.p.pager));if(!1===b.p.cellEdit&&!0===b.p.hoverrows)a(b).on({mouseover:function(y){Pa=a(y.target).closest("tr.jqgrow");"ui-subgrid"!==a(Pa).attr("class")&&a(Pa).addClass(n)},mouseout:function(y){Pa=a(y.target).closest("tr.jqgrow");a(Pa).removeClass(n)}});var Ua,mb,Vb;a(b).before(k.hDiv).on({click:function(y){Oa=y.target;Pa=a(Oa,b.rows).closest("tr.jqgrow");if(0===a(Pa).length||-1<Pa[0].className.indexOf(t)||(a(Oa,b).closest("table.ui-jqgrid-btable").attr("id")||
"").replace("_frozen","")!==b.id)return this;var D=a(Oa).filter(":enabled").hasClass("cbox"),I=a(b).triggerHandler("jqGridBeforeSelectRow",[Pa[0].id,y]);I=!1===I||"stop"===I?!1:!0;if(a.jgrid.isFunction(b.p.beforeSelectRow)){var C=b.p.beforeSelectRow.call(b,Pa[0].id,y);if(!1===C||"stop"===C)I=!1}D&&!1===I&&a(y.target).prop("checked",!a(y.target).prop("checked"));if("A"!==Oa.tagName&&("INPUT"!==Oa.tagName&&"TEXTAREA"!==Oa.tagName&&"OPTION"!==Oa.tagName&&"SELECT"!==Oa.tagName||D||"INPUT"===Oa.tagName&&
Oa.id.startsWith("jqs_"+b.p.id)))if(Ua=Pa[0].id,Oa=a(Oa).closest("tr.jqgrow>td"),0<Oa.length&&(mb=a.jgrid.getCellIndex(Oa)),!0!==b.p.cellEdit||b.p.ariaBody){if(0<Oa.length&&(Vb=a(Oa).closest("td,th").html(),a(b).triggerHandler("jqGridCellSelect",[Ua,mb,Vb,y]),a.jgrid.isFunction(b.p.onCellSelect)&&b.p.onCellSelect.call(b,Ua,mb,Vb,y)),I)if(b.p.multimail&&b.p.multiselect){if(y.shiftKey){if(D){I=a(b).jqGrid("getGridParam","selrow");y=a(b).jqGrid("getInd",Ua);D=a(b).jqGrid("getInd",I);var P="",N="";y>
D?(P=I,N=Ua):(P=Ua,N=I);var aa=!1,ha=!1;I=!0;-1<a.inArray(Ua,b.p.selarrrow)&&(I=!1);a.each(a(this).getDataIDs(),function(V,ca){(ha=ca===P||ha)&&a(b).jqGrid("resetSelection",ca);return ca!==N});I&&a.each(a(this).getDataIDs(),function(V,ca){(aa=ca===P||aa)&&a(b).jqGrid("setSelection",ca,!1);return ca!==N});b.p.selrow=y>D?N:P;return}window.getSelection().removeAllRanges()}f(Ua,D,y,!1)}else b.p.multikey?y[b.p.multikey]?a(b).jqGrid("setSelection",Ua,!0,y):b.p.multiselect&&D&&(D=a("#jqg_"+a.jgrid.jqID(b.p.id)+
"_"+Ua).is(":checked"),a("#jqg_"+a.jgrid.jqID(b.p.id)+"_"+Ua)[b.p.useProp?"prop":"attr"]("checked",!D)):f(Ua,D,y,!0)}else if(b.p.multiselect&&D&&I)a(b).jqGrid("setSelection",Ua,!0,y);else if(0<Oa.length)try{a(b).jqGrid("editCell",Pa[0].rowIndex,mb,!0,y)}catch(V){}},reloadGrid:function(y,D){!0===b.p.treeGrid&&(b.p.datatype=b.p.treedatatype);D=D||{};D.current&&b.grid.selectionPreserver(b);"local"===b.p.datatype?(a(b).jqGrid("resetSelection"),b.p.data.length&&(fa(),Y())):b.p.treeGrid||(b.p.selrow=null,
b.p.multiselect&&!b.p.preserveSelection&&(b.p.selarrrow=[],la(!1)),b.p.savedRow=[]);b.p.scroll&&ua.call(b,!0,!1);D.page&&(y=D.page,y>b.p.lastpage&&(y=b.p.lastpage),1>y&&(y=1),b.p.page=y,b.grid.bDiv.scrollTop=b.grid.prevRowHeight?(y-1)*b.grid.prevRowHeight*b.p.rowNum:0);b.grid.prevRowHeight&&b.p.scroll&&void 0===D.page?(delete b.p.lastpage,b.grid.populateVisible()):b.grid.populate();!0===b.p.inlineNav&&a(b).jqGrid("showAddEditButtons");b.p.searchCols&&!a.isEmptyObject(b.p._results)&&(b.p._results=
{},a.jgrid.searchColOnEnter(b.p.id,null));return!1},dblclick:function(y){Oa=y.target;Pa=a(Oa,b.rows).closest("tr.jqgrow");if(0!==a(Pa).length){Ua=Pa[0].rowIndex;mb=a.jgrid.getCellIndex(Oa);var D=a(b).triggerHandler("jqGridDblClickRow",[a(Pa).attr("id"),Ua,mb,y]);if(!a.jgrid.isNull(D)||a.jgrid.isFunction(b.p.ondblClickRow)&&(D=b.p.ondblClickRow.call(b,a(Pa).attr("id"),Ua,mb,y),!a.jgrid.isNull(D)))return D}},contextmenu:function(y){Oa=y.target;Pa=a(Oa,b.rows).closest("tr.jqgrow");if(0!==a(Pa).length){b.p.multiselect||
b.p.isClipboard||a(b).jqGrid("setSelection",Pa[0].id,!0,y);Ua=Pa[0].rowIndex;mb=a.jgrid.getCellIndex(Oa);var D=a(b).triggerHandler("jqGridRightClickRow",[a(Pa).attr("id"),Ua,mb,y]);if(!a.jgrid.isNull(D)||a.jgrid.isFunction(b.p.onRightClickRow)&&(D=b.p.onRightClickRow.call(b,a(Pa).attr("id"),Ua,mb,y),!a.jgrid.isNull(D)))return D}}});k.bDiv=document.createElement("div");H&&"auto"===String(b.p.height).toLowerCase()&&(b.p.height="100%");a(k.bDiv).append(a('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:b.p.height+
(isNaN(b.p.height)?"":"px"),width:k.width-hb+"px"}).on("scroll",k.scrollGrid);a(k.bDiv).find("table").first().css({width:b.p.tblwidth+"px"});a.support.tbody||2===a("tbody",this).length&&a("tbody",this).slice(1).remove();if(b.p.multikey)if(a.jgrid.msie())a(k.bDiv).on("selectstart",function(){return!1});else a(k.bDiv).on("mousedown",function(){return!1});ib&&a(k.bDiv).hide();var Wb=w+" "+p(v,"icon_caption_open",!0),cc=w+" "+p(v,"icon_caption_close",!0);k.cDiv=document.createElement("div");var Xb=!0===
b.p.hidegrid?a("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+x+"' title='"+(a.jgrid.getRegional(b,"defaults.showhide",b.p.showhide)||"")+"' />").hover(function(){Xb.addClass(n)},function(){Xb.removeClass(n)}).append("<span class='ui-jqgrid-headlink "+Wb+"'></span>").css("rtl"===z?"left":"right","0px"):"";a(k.cDiv).append(Xb).append("<span class='ui-jqgrid-title'>"+b.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===z?"-rtl":"")+" "+p(v,"gridtitleBox",!0));
if(!0===b.p.menubar){var lc='<ul id="'+b.p.id+'_menubar" class="ui-search-menu modal-content column-menu ui-menu jqgrid-caption-menu '+A.menu_widget+'" role="menubar" tabindex="0"></ul>';a("#gbox_"+b.p.id).append(lc);a(k.cDiv).append("<a role='link' class='ui-jqgrid-menubar menubar-"+("rtl"===z?"rtl":"ltr")+"' style=''><span class='colmenuspan "+w+" "+A.icon_toolbar_menu+"'></span></a>");a(".ui-jqgrid-menubar",k.cDiv).hover(function(){a(this).addClass(n)},function(){a(this).removeClass(n)}).on("click",
function(y){y=a(y.target).position();a("#"+b.p.id+"_menubar").show();"rtl"===b.p.direction&&a("#"+b.p.id+"_menubar").css({left:y.left-a("#"+b.p.id+"_menubar").width()-20})})}a(k.cDiv).insertBefore(k.hDiv);if(b.p.toolbar[0]){var Yb=p(v,"customtoolbarBox",!0,"ui-userdata");k.uDiv=document.createElement("div");"top"===b.p.toolbar[1]?a(k.uDiv).insertBefore(k.hDiv):"bottom"===b.p.toolbar[1]&&a(k.uDiv).insertAfter(k.hDiv);"both"===b.p.toolbar[1]?(k.ubDiv=document.createElement("div"),a(k.uDiv).addClass(Yb+
" ui-userdata-top").attr("id","t_"+this.id).insertBefore(k.hDiv).width(k.width-hb),a(k.ubDiv).addClass(Yb+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(k.hDiv).width(k.width-hb),ib&&a(k.ubDiv).hide()):a(k.uDiv).width(k.width-hb).addClass(Yb+" ui-userdata-top").attr("id","t_"+this.id);ib&&a(k.uDiv).hide()}b.p.toppager&&(b.p.toppager=a.jgrid.jqID(b.p.id)+"_toppager",k.topDiv=a("<div id='"+b.p.toppager+"'></div>")[0],a(k.topDiv).addClass(p(v,"toppagerBox",!0,"ui-jqgrid-toppager")).width(k.width-
hb).insertBefore(k.hDiv),Ca(b.p.toppager,"_t"),b.p.toppager="#"+b.p.toppager);b.p.footerrow&&(k.sDiv=a("<div class='ui-jqgrid-sdiv'></div>")[0],pb=a("<div class='ui-jqgrid-hbox"+("rtl"===z?"-rtl":"")+"'></div>"),a(k.sDiv).append(pb).width(k.width-hb).insertAfter(k.hDiv),a(pb).append(Kb),k.footers=a(".ui-jqgrid-ftable",k.sDiv)[0].rows[0].cells,b.p.rownumbers&&(k.footers[0].className=p(v,"rownumBox",!0,"jqgrid-rownum")),ib&&a(k.sDiv).hide());b.p.headerrow&&(k.hrDiv=a("<div class='ui-jqgrid-hrdiv'></div>")[0],
pb=a("<div class='ui-jqgrid-hbox"+("rtl"===z?"-rtl":"")+"'></div>"),a(k.hrDiv).append(pb).width(k.width-hb).insertAfter(k.hDiv),a(pb).append(Lb),k.hrheaders=a(".ui-jqgrid-hrtable",k.hrDiv)[0].rows[0].cells,b.p.rownumbers&&(k.hrheaders[0].className=p(v,"rownumBox",!0,"jqgrid-rownum")),ib&&a(k.nDiv).hide());pb=null;if(b.p.caption){var mc=b.p.datatype;!0===b.p.hidegrid&&(a(".ui-jqgrid-titlebar-close",k.cDiv).click(function(y){var D=a.jgrid.isFunction(b.p.onHeaderClick),I=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv, .ui-jqgrid-hrdiv",
C=this;!0===b.p.toolbar[0]&&("both"===b.p.toolbar[1]&&(I+=", #"+a(k.ubDiv).attr("id")),I+=", #"+a(k.uDiv).attr("id"));var P=a(I,"#gview_"+a.jgrid.jqID(b.p.id)).length;"visible"===b.p.gridstate?a(I,"#gbox_"+a.jgrid.jqID(b.p.id)).slideUp("fast",function(){P--;0===P&&(a("span",C).removeClass(Wb).addClass(cc),b.p.gridstate="hidden",a("#gbox_"+a.jgrid.jqID(b.p.id)).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(b.p.id)).hide(),a(b).triggerHandler("jqGridHeaderClick",[b.p.gridstate,
y]),D&&(ib||b.p.onHeaderClick.call(b,b.p.gridstate,y)))}):"hidden"===b.p.gridstate&&a(I,"#gbox_"+a.jgrid.jqID(b.p.id)).slideDown("fast",function(){P--;0===P&&(a("span",C).removeClass(cc).addClass(Wb),ib&&(b.p.datatype=mc,Ba(),ib=!1),b.p.gridstate="visible",a("#gbox_"+a.jgrid.jqID(b.p.id)).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(b.p.id)).show(),a(b).triggerHandler("jqGridHeaderClick",[b.p.gridstate,y]),D&&(ib||b.p.onHeaderClick.call(b,b.p.gridstate,y)))});return!1}),
ib&&(b.p.datatype="local",a(".ui-jqgrid-titlebar-close",k.cDiv).trigger("click")))}else a(k.cDiv).hide(),b.p.toppager||a(k.hDiv).addClass(p(b.p.styleUI+".common","cornertop",!0));b.p.headerrow?a(k.hrDiv).after(k.bDiv):a(k.hDiv).after(k.bDiv);a(k.hDiv).mousemove(function(y){if(k.resizing)return k.dragMove(y),!1});a(".ui-jqgrid-labels",k.hDiv).on("selectstart",function(){return!1});a(document).on("mouseup.jqGrid"+b.p.id,function(){return k.resizing?(k.dragEnd(!0),!1):!0});if("rtl"===b.p.direction)a(b).on("jqGridAfterGridComplete.setRTLPadding",
function(){var y=k.bDiv.offsetWidth-k.bDiv.clientWidth,D=a(k.hDiv).find("div").first();0<y&&(y+=1);D.hasClass("ui-jqgrid-hbox-rtl")&&a(k.hDiv).find("div").first().css({paddingLeft:y+"px"});k.hDiv.scrollLeft=k.bDiv.scrollLeft});if(b.p.autoResizing)a(b).on("jqGridAfterGridComplete.setAutoSizeColumns",function(){var y=!1;!0===b.p.frozenColumns&&(a(b).jqGrid("destroyFrozenColumns"),y=!0);0<b.p.colSpanHeader.length&&a(b).jqGrid("destroyColSpanHeader",!1);a(b.p.colModel).each(function(D){this.autosize&&
!this.hidden&&this._maxsize&&0<this._maxsize&&a(b).jqGrid("resizeColumn",D,this._maxsize+b.p.cellLayout,!1,!1)});a(b).jqGrid("refreshGroupHeaders");0<b.p.colSpanHeader.length&&a(b).jqGrid("setColSpanHeader",b.p.colSpanHeader);y&&a(b).jqGrid("setFrozenColumns")});b.p.searchCols&&(a(b).on("jqGridPaging.searchCols",function(){a.isEmptyObject(b.p._results)||(b.p._results={},a.jgrid.searchColOnEnter(b.p.id,null))}),a(b).on("jqGridSortCol.searchCols",function(){a.isEmptyObject(b.p._results)||(b.p._results=
{},a.jgrid.searchColOnEnter(b.p.id,null))}),b.p.colMenu&&b.p.searchColOptions.colmenu&&a(b).jqGrid("addColSearchMenu"));b.formatCol=K;b.sortData=Ea;b.updatepager=function(y,D){var I,C="",P=(I=b.p.pager?b.p.pager.substring(1):"")?"_"+I:"",N=b.p.toppager?"_"+b.p.toppager.slice(1):"";var aa=parseInt(b.p.page,10)-1;0>aa&&(aa=0);aa*=parseInt(b.p.rowNum,10);I=aa+b.p.reccount;if(b.p.scroll){var ha=a("tbody",b.grid.bDiv).first().find("> tr").slice(1);I>b.p.records&&(I=b.p.records);aa=I-ha.length;b.p.reccount=
ha.length;if(ha=ha.outerHeight()||b.grid.prevRowHeight){var V=aa*ha;C=parseInt(b.p.records,10)*ha;a(b.grid.bDiv).find(">div").first().css({height:C}).children("div").first().css({height:V,display:V?"":"none"});0===b.grid.bDiv.scrollTop&&1<b.p.page&&(b.grid.bDiv.scrollTop=b.p.rowNum*(b.p.page-1)*ha)}b.grid.bDiv.scrollLeft=b.grid.hDiv.scrollLeft}C=b.p.pager||"";if(C+=b.p.toppager?C?","+b.p.toppager:b.p.toppager:""){var ca=a.jgrid.getRegional(b,"formatter.integer");ha=S(b.p.page);V=S(b.p.lastpage);a(".selbox",
C)[this.p.useProp?"prop":"attr"]("disabled",!1);if(!0===b.p.pginput){a(".ui-pg-input",C)[a(".ui-pg-input",C).first().is(":input")?"val":"html"](V<ha?b.p.lastpage:b.p.page);var ja=b.p.toppager?"#sp_1"+P+",#sp_1"+N:"#sp_1"+P;a(ja).html(a.fmatter?a.fmatter.util.NumberFormat(b.p.lastpage,ca):b.p.lastpage)}if(b.p.viewrecords)if(0===b.p.reccount)a(".ui-paging-info",C).html(a.jgrid.getRegional(b,"defaults.emptyrecords",b.p.emptyrecords));else{ja=aa+1;var oa=b.p.records;a.fmatter&&(ja=a.fmatter.util.NumberFormat(ja,
ca),I=a.fmatter.util.NumberFormat(I,ca),oa=a.fmatter.util.NumberFormat(oa,ca));ca=a.jgrid.getRegional(b,"defaults.recordtext",b.p.recordtext);a(".ui-paging-info",C).html(a.jgrid.template(ca,ja,I,oa))}!0===b.p.pgbuttons&&(0>=ha&&(ha=V=0),1===ha||0===ha?(a("#first"+P+", #prev"+P).addClass(t).removeClass(n),b.p.toppager&&a("#first_t"+N+", #prev_t"+N).addClass(t).removeClass(n)):(a("#first"+P+", #prev"+P).removeClass(t),b.p.toppager&&a("#first_t"+N+", #prev_t"+N).removeClass(t)),ha===V||0===ha?(a("#next"+
P+", #last"+P).addClass(t).removeClass(n),b.p.toppager&&a("#next_t"+N+", #last_t"+N).addClass(t).removeClass(n)):(a("#next"+P+", #last"+P).removeClass(t),b.p.toppager&&a("#next_t"+N+", #last_t"+N).removeClass(t)))}!0===y&&!0===b.p.rownumbers&&a(">td.jqgrid-rownum",b.rows).each(function(na){a(this).html(aa+1+na)});0===b.p.reccount&&(y=b.p.emptyRecordRow?p(v,"rowBox",!0,"jqgrow ui-row-"+b.p.direction+" not-editable-row not-editable-cell "+t):"jqgfirstrow not-editable-row not-editable-cell",y=G("norecs",
!1,y,{},""),y+=b.p.emptyRecordRow?"<td style='text-align:center;' colspan='"+k.headers.length+"'>"+a.jgrid.getRegional(b,"defaults.emptyrecords",b.p.emptyrecords)+"</td>":"<td style='height:0.1px;visibility:hidden;' colspan='"+k.headers.length+"'>&nbsp;</td>",y+="</tr>",a(k.bDiv).find("table").first().append(y));D&&b.p.jqgdnd&&a(b).jqGrid("gridDnD","updateDnD");a(b).triggerHandler("jqGridGridComplete");a.jgrid.isFunction(b.p.gridComplete)&&b.p.gridComplete.call(b);a(b).triggerHandler("jqGridAfterGridComplete")};
b.refreshIndex=Y;b.setHeadCheckBox=la;b.constructTr=G;b.formatter=function(y,D,I,C,P){return T(y,D,I,C,P)};a.extend(k,{populate:Ba,emptyRows:ua,beginReq:ea,endReq:pa});this.grid=k;b.addXmlData=function(y){L(y)};b.addJSONData=function(y){X(y)};b.addLocalData=function(y){return Z(y)};b.addIndexedDBData=function(y){return da(y)};b.treeGrid_beforeRequest=function(){b.p.treeGrid&&b.p.treeGrid_bigData&&void 0!==b.p.postData.nodeid&&"string"===typeof b.p.postData.nodeid&&(""!==b.p.postData.nodeid||0<parseInt(b.p.postData.nodeid,
10))&&(b.p.postData.rows=1E4,b.p.postData.page=1,b.p.treeGrid_rootParams.otherData.nodeid=b.p.postData.nodeid)};b.treeGrid_afterLoadComplete=function(){b.p.treeGrid&&b.p.treeGrid_bigData&&(void 0!==b.p.treeGrid_rootParams.otherData.nodeid&&"string"===typeof b.p.treeGrid_rootParams.otherData.nodeid&&(""!==b.p.treeGrid_rootParams.otherData.nodeid||0<parseInt(b.p.treeGrid_rootParams.otherData.nodeid,10))?void 0===b.p.treeGrid_rootParams||a.jgrid.isNull(b.p.treeGrid_rootParams)||(b.p.page=b.p.treeGrid_rootParams.page,
b.p.lastpage=b.p.treeGrid_rootParams.lastpage,b.p.postData.rows=b.p.treeGrid_rootParams.postData.rows,b.p.postData.totalrows=b.p.treeGrid_rootParams.postData.totalrows,b.p.treeGrid_rootParams.otherData.nodeid="",b.updatepager(!1,!0)):b.p.treeGrid_rootParams={page:b.p.page,lastpage:b.p.lastpage,postData:{rows:b.p.postData.rows,totalrows:b.p.postData.totalrows},rowNum:b.p.rowNum,rowTotal:b.p.rowTotal,otherData:{nodeid:""}})};this.grid.cols=this.rows[0].cells;a.jgrid.isFunction(b.p.onInitGrid)&&b.p.onInitGrid.call(b);
a(b).triggerHandler("jqGridInitGrid");Ba();b.p.hiddengrid=!1;if(b.p.responsive){var nc="onorientationchange"in window?"orientationchange":"resize";a(window).on(nc,function(){a.jgrid.isVisible(b)&&a(b).jqGrid("resizeGrid",500,!0,b.p.resizeHeight,!0)})}}}}})};a.jgrid.extend({getGridParam:function(c,e){var d=this[0];if(d&&d.grid){void 0===e&&"string"!==typeof e&&(e="jqGrid");var f=d.p;if("jqGrid"!==e)try{f=a(d).data(e)}catch(h){f=d.p}return c?void 0!==f[c]?f[c]:null:f}},setGridParam:function(c,e){return this.each(function(){a.jgrid.isNull(e)&&
(e=!1);this.grid&&"object"===typeof c&&(!0===e?this.p=a.extend({},this.p,c):a.extend(!0,this.p,c))})},getGridRowById:function(c){var e;this.each(function(){try{e=this.rows.namedItem(c)}catch(d){e=a(this.grid.bDiv).find("#"+a.jgrid.jqID(c))[0]}});return e},getGridRowByIndex:function(c){var e=null;this.each(function(){var d=this.rows.length-1;1<=c&&1<=d&&c<=d&&(e=this.rows[c])});return e},getDataIDs:function(){var c=[],e=0,d,f=0;this.each(function(){if((d=this.rows.length)&&0<d)for(;e<d;)a(this.rows[e]).hasClass("jqgrow")&&
"norecs"!==this.rows[e].id&&(c[f]=this.rows[e].id,f++),e++});return c},setSelection:function(c,e,d,f){return this.each(function(){var h=a.jgrid.getMethod("getStyleUI");var g=h(this.p.styleUI+".common","highlight",!0);var b=h(this.p.styleUI+".common","disabled",!0);if(void 0!==c&&(void 0===f&&(f=!0),f=!1===f?!1:!0,e=!1===e?!1:!0,(h=a(this).jqGrid("getGridRowById",c))&&h.className&&!(-1<h.className.indexOf(b)))){if(!0===this.p.scrollrows){var k=a(this).jqGrid("getGridRowById",c).rowIndex;if(0<=k){b=
a(this.grid.bDiv)[0].clientHeight;var l=a(this.grid.bDiv)[0].scrollTop,m=a(this.rows[k]).position().top;k=this.rows[k].clientHeight;m+k>=b+l?a(this.grid.bDiv)[0].scrollTop=m-(b+l)+k+l:m<b+l&&m<l&&(a(this.grid.bDiv)[0].scrollTop=m)}}this.p.multiselect?(this.setHeadCheckBox(!1),this.p.selrow=h.id,b=a.inArray(this.p.selrow,this.p.selarrrow),-1===b?("ui-subgrid"!==h.className&&a(h).addClass(g).attr("aria-selected","true"),g=!0,this.p.selarrrow.push(this.p.selrow)):-1!==b&&"_sp_"===d?("ui-subgrid"!==h.className&&
a(h).addClass(g).attr("aria-selected","true"),g=!0):("ui-subgrid"!==h.className&&a(h).removeClass(g).attr("aria-selected","false"),g=!1,this.p.selarrrow.splice(b,1),b=this.p.selarrrow[0],this.p.selrow=void 0===b?null:b),a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(h.id))[this.p.useProp?"prop":"attr"]("checked",g),e&&(a(this).triggerHandler("jqGridSelectRow",[h.id,g,d]),this.p.onSelectRow&&this.p.onSelectRow.call(this,h.id,g,d)),a.jgrid.isFunction(this.p.onMultiSelect)&&this.p.onMultiSelect.call(this,
this.p.selarrrow)):"ui-subgrid"!==h.className&&(this.p.selrow!==h.id?(f&&((b=a(this).jqGrid("getGridRowById",this.p.selrow))&&a(b).removeClass(g).attr({"aria-selected":"false",tabindex:"-1"}),a(h).addClass(g).attr({"aria-selected":"true",tabindex:"0"})),g=!0):g=!1,this.p.selrow=h.id,e&&(a(this).triggerHandler("jqGridSelectRow",[h.id,g,d]),this.p.onSelectRow&&this.p.onSelectRow.call(this,h.id,g,d)))}})},resetSelection:function(c){return this.each(function(){var e=this;var d=a.jgrid.getMethod("getStyleUI");
var f=d(e.p.styleUI+".common","highlight",!0),h=d(e.p.styleUI+".common","hover",!0);if(void 0!==c){d=c===e.p.selrow?e.p.selrow:c;a("#"+a.jgrid.jqID(e.p.id)+" tbody").first().find("tr#"+a.jgrid.jqID(d)).removeClass(f).attr("aria-selected","false");if(e.p.multiselect){a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(d),"#"+a.jgrid.jqID(e.p.id))[e.p.useProp?"prop":"attr"]("checked",!1);e.setHeadCheckBox(!1);var g=a.inArray(a.jgrid.jqID(d),e.p.selarrrow);-1!==g&&e.p.selarrrow.splice(g,1)}e.p.onUnSelectRow&&
e.p.onUnSelectRow.call(e,d);d=null}else e.p.multiselect?(a(e.p.selarrrow).each(function(b,k){a(a(e).jqGrid("getGridRowById",k)).removeClass(f).attr("aria-selected","false");a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(k))[e.p.useProp?"prop":"attr"]("checked",!1);e.p.onUnSelectRow&&e.p.onUnSelectRow.call(e,k)}),e.setHeadCheckBox(!1),e.p.selarrrow=[],e.p.selrow=null):e.p.selrow&&(a("#"+a.jgrid.jqID(e.p.id)+" tbody").first().find("tr#"+a.jgrid.jqID(e.p.selrow)).removeClass(f).attr("aria-selected",
"false"),e.p.onUnSelectRow&&e.p.onUnSelectRow.call(e,e.p.selrow),e.p.selrow=null);!0===e.p.cellEdit&&0<=parseInt(e.p.iCol,10)&&0<=parseInt(e.p.iRow,10)&&(a("td",e.rows[e.p.iRow]).eq(e.p.iCol).removeClass("edit-cell "+f),a(e.rows[e.p.iRow]).removeClass("selected-row "+h));a.jgrid.isFunction(e.p.onMultiSelect)&&e.p.onMultiSelect.call(e,e.p.selarrrow)})},getRowData:function(c,e,d,f){var h={},g,b=!1,k,l=0;this.each(function(){var m=this,q;if(a.jgrid.isNull(c))b=!0,g=[],k=m.rows.length;else{var r=a(m).jqGrid("getGridRowById",
c);if(!r)return h;k=1}e&&!0===e&&0<m.p.data.length||(e=!1);a.jgrid.isNull(d)&&(d=!1);for(a.jgrid.isNull(f)&&(f=!1);l<k;){b&&(r=m.rows[l]);if(a(r).hasClass("jqgrow")&&"norecs"!==r.id){if(!0===m.p.treeGrid&&!0===f&&a(r).is(":hidden")){l++;continue}e?h=h=a.extend({},m.p.data[m.p._index[a.jgrid.stripPref(m.p.idPrefix,r.id)]]):a(r).children('td[role="gridcell"]').each(function(v){q=m.p.colModel[v].name;if(!a.jgrid.isServiceCol(q))if(!0===m.p.treeGrid&&q===m.p.ExpandColumn)h[q]=a.jgrid.htmlDecode(a(this).find("span").first().html());
else try{h[q]=a.unformat.call(m,this,{rowId:r.id,colModel:m.p.colModel[v]},v)}catch(t){h[q]=a.jgrid.htmlDecode(a(this).html())}});if(!0===m.p.treeGrid&&d){var p=m.p.treeReader.level_field;d+="";try{p=parseInt(h[p],10)}catch(v){p=0}h[m.p.ExpandColumn]=d.repeat(p)+h[m.p.ExpandColumn]}b&&(g.push(h),h={})}l++}});return g||h},delRowData:function(c){var e=!1,d,f,h;this.each(function(){if(d=a(this).jqGrid("getGridRowById",c))c=d.id;else return!1;this.p.subGrid&&(h=a(d).next(),h.hasClass("ui-subgrid")&&h.remove());
a(d).remove();this.p.records--;this.p.reccount--;this.updatepager(!0,!1);e=!0;this.p.multiselect&&(f=a.inArray(c,this.p.selarrrow),-1!==f&&this.p.selarrrow.splice(f,1));this.p.multiselect&&0<this.p.selarrrow.length?this.p.selrow=this.p.selarrrow[this.p.selarrrow.length-1]:this.p.selrow===c&&(this.p.selrow=null);if("local"===this.p.datatype){var g=a.jgrid.stripPref(this.p.idPrefix,c);g=this.p._index[g];void 0!==g&&(this.p.data.splice(g,1),this.refreshIndex())}});return e},setRowData:function(c,e,d,
f,h){var g,b=!0;this.each(function(){if(!this.grid)return!1;var k=this,l,m={},q,r;var p=a(this).jqGrid("getGridRowById",c);"boolean"!==a.jgrid.type(h)&&(h=!1);if(!p)return!1;!0===f&&(q=a(k).jqGrid("getRowData",c,"local"===k.p.datatype));if(e){f&&(e=a.extend(q,e));try{if(a(this.p.colModel).each(function(n){g=this.name;var x=a.jgrid.getAccessor(e,g);void 0!==x&&(m[g]=x,l=h?x:k.formatter(c,m[g],n,e,"edit"),r=this.title?{title:a.jgrid.stripHtml(l)}:{},!0===k.p.treeGrid&&g===k.p.ExpandColumn?a("td[role='gridcell']",
p).eq(n).find("span[class*='cell-wrapper']").html(l).attr(r):a("td[role='gridcell']",p).eq(n).html(l).attr(r))}),"local"===k.p.datatype){var v=a.jgrid.stripPref(k.p.idPrefix,c),t=k.p._index[v],u;if(k.p.treeGrid)for(u in k.p.treeReader)k.p.treeReader.hasOwnProperty(u)&&delete m[k.p.treeReader[u]];void 0!==t&&(k.p.data[t]=a.extend(!0,k.p.data[t],m));m=null}}catch(n){b=!1}}b&&("string"===typeof d?a(p).addClass(d):a.jgrid.isNull(d)||"object"!==typeof d||a(p).css(d),a(k).triggerHandler("jqGridAfterGridComplete"))});
return b},addRowData:function(c,e,d,f,h){-1===a.inArray(d,["first","last","before","after"])&&(d="last");var g=!1,b,k,l="",m="",q,r,p,v,t,u,n="",x,w,A;if(e){if(Array.isArray(e)){var H=!0;var F=c}else e=[e],H=!1;this.each(function(){var B=e.length;p=!0===this.p.rownumbers?1:0;q=!0===this.p.multiselect?1:0;r=!0===this.p.subGrid?1:0;H||(null!=c?c=String(c):(c=a.jgrid.randId(),!1!==this.p.keyName&&(F=this.p.keyName,void 0!==e[0][F]&&(c=e[0][F]))));var E=0,R=a(this).jqGrid("getStyleUI",this.p.styleUI+
".base","rowBox",!0,"jqgrow ui-row-"+this.p.direction)+" "+(h||""),z={},O=a.jgrid.isFunction(this.p.afterInsertRow)?!0:!1;p&&(l=a(this).jqGrid("getStyleUI",this.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum"));for(q&&(m=a(this).jqGrid("getStyleUI",this.p.styleUI+".base","multiBox",!1,"cbox"));E<B;){x=e[E];k=[];if(H)try{c=x[F],void 0===c&&(c=a.jgrid.randId())}catch(U){c=a.jgrid.randId()}A=c;c=this.p.idPrefix+c;p&&(n=this.formatCol(0,1,"",null,c,!0),k[k.length]='<td role="gridcell" '+l+" "+n+">0</td>");
q&&(u='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+c+'" '+m+"/>",n=this.formatCol(p,1,"",null,c,!0),k[k.length]='<td role="gridcell" '+n+">"+u+"</td>");r&&(k[k.length]=a(this).jqGrid("addSubGridCell",q+p,1));for(t=q+r+p;t<this.p.colModel.length;t++)w=this.p.colModel[t],b=w.name,z[b]=x[b],u=this.formatter(c,a.jgrid.getAccessor(x,b),t,x),n=this.formatCol(t,1,u,x,c,z),k[k.length]='<td role="gridcell" '+n+">"+u+"</td>";k.unshift(this.constructTr(c,!1,R,z,x));k[k.length]="</tr>";if(0===
this.rows.length)a(this.grid.bDiv).find("table").first().append(k.join(""));else switch(d){case "last":a(this.rows[this.rows.length-1]).after(k.join(""));v=this.rows.length-1;break;case "first":a(this.rows[0]).after(k.join(""));v=1;break;case "after":if(v=a(this).jqGrid("getGridRowById",f))a(this.rows[v.rowIndex+1]).hasClass("ui-subgrid")?a(this.rows[v.rowIndex+1]).after(k):a(v).after(k.join("")),v=v.rowIndex+1;break;case "before":if(v=a(this).jqGrid("getGridRowById",f))a(v).before(k.join("")),v=
v.rowIndex-1}!0===this.p.subGrid&&a(this).jqGrid("addSubGrid",q+p,v);this.p.records++;this.p.reccount++;a(this).triggerHandler("jqGridAfterInsertRow",[c,x,x]);O&&this.p.afterInsertRow.call(this,c,x,x);E++;if("local"===this.p.datatype)switch(z[this.p.localReader.id]=A,d){case "first":this.p.data.unshift(z);break;case "last":this.p.data.push(z);break;case "before":case "after":this.p.data.splice(v-1,0,z)}z={};1===this.p.reccount&&(v=a(this).jqGrid("getGridRowById","norecs"))&&v.rowIndex&&0<v.rowIndex&&
a(this.rows[v.rowIndex]).remove()}"local"===this.p.datatype&&this.refreshIndex();this.updatepager(!0,!0);g=!0})}return g},footerData:function(c,e,d,f,h){function g(m){for(var q in m)if(m.hasOwnProperty(q))return!1;return!0}var b,k=!1,l={};void 0===c&&(c="get");"boolean"!==typeof d&&(d=!0);void 0===f&&(f=0);void 0===h&&(h=!0);c=c.toLowerCase();this.each(function(){var m=this,q,r,p=this.p.colModel.length;if(!m.grid||!m.p.footerrow||"set"===c&&g(e))return!1;if("getlength"===c){var v=a(".ui-jqgrid-ftable tr",
m.grid.sDiv).length;l=v?v:0;return!1}k=!0;"addrow"===c&&(v=a(".ui-jqgrid-ftable tr",m.grid.sDiv).eq(0).clone(),a("td",v).html("&nbsp;"),a(".ui-jqgrid-ftable",m.grid.sDiv).append(v),g(e)||(c="set",f=a(".ui-jqgrid-stable tr",m.grid.sDiv).length-1));"delrow"===c&&(void 0===f&&(f=a(".ui-jqgrid-stable tr",m.grid.sDiv).length-1),0<f&&a(".ui-jqgrid-ftable tr",m.grid.sDiv).eq(f).remove());p*=parseInt(f,10);"get"!==c&&"set"!==c||a(this.p.colModel).each(function(t){b=this.name;"set"===c?void 0!==e[b]&&(q=d?
m.formatter("",e[b],t,e,"edit"):e[b],r=this.title?{title:a.jgrid.stripHtml(q)}:{},a("tr.footrow td",m.grid.sDiv).eq(t+p).html(q).attr(r),k=!0):"get"===c&&(l[b]=d?a.unformat.call(m,a("tr.footrow td",m.grid.sDiv).eq(t+p),{colModel:m.p.colModel[t]},t):a("tr.footrow td",m.grid.sDiv).eq(t+p).html())});"remove"===c&&(a(m.grid.sDiv).remove(),m.grid.sDiv=null,m.p.footerrow=!1)});return"get"===c||"getlength"===c?l:k},headerData:function(c,e,d,f,h){function g(m){for(var q in m)if(m.hasOwnProperty(q))return!1;
return!0}var b,k=!1,l={};void 0===c&&(c="get");"boolean"!==typeof d&&(d=!0);void 0===f&&(f=0);void 0===h&&(h=!0);c=c.toLowerCase();this.each(function(){var m=this,q,r,p=this.p.colModel.length;if(!m.grid||!m.p.headerrow||"set"===c&&g(e))return!1;if("getlength"===c){var v=a(".ui-jqgrid-hrtable tr",m.grid.hrDiv).length;l=v?v:0;return!0}k=!0;"addrow"===c&&(v=a(".ui-jqgrid-hrtable tr",m.grid.hrDiv).eq(0).clone(),a("td",v).html("&nbsp;"),a(".ui-jqgrid-hrtable",m.grid.hrDiv).append(v),g(e)||(c="set",f=a(".ui-jqgrid-hrtable tr",
m.grid.hrDiv).length-1));"delrow"===c&&(void 0===f&&(f=a(".ui-jqgrid-hrtable tr",m.grid.hrDiv).length-1),0<f&&a(".ui-jqgrid-hrtable tr",m.grid.hrDiv).eq(f).remove());p*=parseInt(f,10);"get"!==c&&"set"!==c||a(this.p.colModel).each(function(t){b=this.name;"set"===c?void 0!==e[b]&&(q=d?m.formatter("",e[b],t,e,"edit"):e[b],r=this.title?{title:a.jgrid.stripHtml(q)}:{},a("tr.hrheadrow td",m.grid.hrDiv).eq(t+p).html(q).attr(r),k=!0):"get"===c&&(l[b]=d?a.unformat.call(m,a("tr.hrheadrow td",m.grid.hrDiv).eq(t+
p),{colModel:m.p.colModel[t]},t):a("tr.hrheadrow td",m.grid.hrDiv).eq(t+p).html())});"remove"===c&&(a(m.grid.hrDiv).remove(),m.grid.hrDiv=null,m.p.headerrow=!1)});return"get"===c||"getlength"===c?l:k},showHideCol:function(c,e){return this.each(function(){var d=this,f=!1,h=a.jgrid.cell_width?0:d.p.cellLayout,g,b=!1;if(d.grid){"string"===typeof c&&(c=[c]);e="none"!==e?"":"none";var k=""===e?!0:!1,l=null,m=a(d).jqGrid("isGroupHeaderOn");d.p.frozenColumns&&(a(d).jqGrid("destroyFrozenColumns"),b=!0);m&&
(a(d).jqGrid("destroyGroupHeader",!1),l=a.extend([],d.p.groupHeader),d.p.groupHeader=null);d.p.colSpanHeader.length&&a(d).jqGrid("destroyColSpanHeader",!1);a(this.p.colModel).each(function(q){-1!==a.inArray(this.name,c)&&this.hidden===k&&(a("tr[role=row]",d.grid.hDiv).each(function(){a(this.cells[q]).css("display",e)}),a(d.rows).each(function(){a(this).hasClass("jqgroup")||a(this.cells[q]).css("display",e)}),d.p.footerrow&&a("tr.footrow td",d.grid.sDiv).eq(q).css("display",e),d.p.headerrow&&a("tr.hrheadrow td",
d.grid.hrDiv).eq(q).css("display",e),g=parseInt(this.width,10),d.p.tblwidth="none"===e?d.p.tblwidth-(g+h):d.p.tblwidth+(g+h),this.hidden=!k,f=!0,a(d).triggerHandler("jqGridShowHideCol",[k,this.name,q]))});!0===f&&(!0!==d.p.shrinkToFit||isNaN(d.p.height)||(d.p.tblwidth+=parseInt(d.p.scrollOffset,10)),a(d).jqGrid("setGridWidth",!0===d.p.shrinkToFit?d.p.tblwidth-(isNaN(d.p.height)?0:parseInt(d.p.scrollOffset,10)):d.p.width));if(m&&l)for(m=0;m<l.length;m++)a(d).jqGrid("setGroupHeaders",l[m]);d.p.colSpanHeader.length&&
a(d).jqGrid("setColSpanHeader",d.p.colSpanHeader);b&&a(d).jqGrid("setFrozenColumns")}})},hideCol:function(c){return this.each(function(){a(this).jqGrid("showHideCol",c,"none")})},showCol:function(c){return this.each(function(){a(this).jqGrid("showHideCol",c,"")})},hideSearchCol:function(c){return this.each(function(){try{var e=this.p._avc.indexOf(c);-1<e&&(this.p._avc.splice(e,1),this.p._fthc.push(c),a(this).jqGrid("showHideCol",c,"none"))}catch(d){}})},showSearchCol:function(c){return this.each(function(){try{var e=
this.p._fthc.indexOf(c);-1<e&&(this.p._fthc.splice(e,1),this.p._avc.push(c),a(this).jqGrid("showHideCol",c,""))}catch(d){}})},remapColumns:function(c,e,d){function f(b){var k=b.length?a.makeArray(b):a.extend({},b);a.each(c,function(l){b[l]=k[this]})}function h(b,k){a(">tr"+(k||""),b).each(function(){var l=this,m=a.makeArray(l.cells);a.each(c,function(){var q=m[this];q&&l.appendChild(q)})})}var g=this.get(0);f(g.p.colModel);f(g.p.colNames);f(g.grid.headers);h(a(g.grid.hDiv).find("thead").first(),d&&
":not(.ui-jqgrid-labels)");e&&h(a("#"+a.jgrid.jqID(g.p.id)+" tbody").first(),".jqgfirstrow, tr.jqgrow, tr.jqfoot, tr.jqgroup");g.p.footerrow&&h(a(g.grid.sDiv).find("tbody").first());g.p.headerrow&&h(a(g.grid.hrDiv).find("tbody").first());g.p.remapColumns&&(g.p.remapColumns.length?f(g.p.remapColumns):g.p.remapColumns=a.makeArray(c));g.p.lastsort=a.inArray(g.p.lastsort,c);g.p.treeGrid&&(g.p.expColInd=a.inArray(g.p.expColInd,c));a(g).triggerHandler("jqGridRemapColumns",[c,e,d])},setGridWidth:function(c,
e,d){return this.each(function(){if(this.grid){var f=this,h,g=!1,b=0,k=a.jgrid.cell_width?0:f.p.cellLayout,l,m=0,q=!1,r=f.p.scrollOffset,p=0,v=-1!==f.p.styleUI.search("Bootstrap")?2:0;"boolean"!==typeof e&&(e=f.p.shrinkToFit);"boolean"!==typeof d&&(d=!0);if(!(isNaN(c)||(c=parseInt(c,10),c<f.p.minGridWidth||c>f.p.maxGridWidth))){f.grid.width=f.p.width=c;a("#gbox_"+a.jgrid.jqID(f.p.id)).css("width",c+"px");a("#gview_"+a.jgrid.jqID(f.p.id)).css("width",c+"px");a(f.grid.bDiv).css("width",c-v+"px");a(f.grid.hDiv).css("width",
c-v+"px");f.p.pager&&a(f.p.pager).css("width",c-v+"px");f.p.toppager&&a(f.p.toppager).css("width",c-v+"px");!0===f.p.toolbar[0]&&(a(f.grid.uDiv).css("width",c-v+"px"),"both"===f.p.toolbar[1]&&a(f.grid.ubDiv).css("width",c-v+"px"));f.p.footerrow&&a(f.grid.sDiv).css("width",c-v+"px");f.p.headerrow&&a(f.grid.hrDiv).css("width",c-v+"px");(h=a(f).jqGrid("isGroupHeaderOn"))&&a(f).jqGrid("destroyGroupHeader",!1);f.p.frozenColumns&&d&&(a(f).jqGrid("destroyFrozenColumns"),g=!0);!1===e&&!0===f.p.forceFit&&
(f.p.forceFit=!1);if(!0===e){a.each(f.p.colModel,function(){!1===this.hidden&&(x=this.widthOrg,b+=x+k,this.fixed?p+=x+k:m++)});if(0===m)return;f.p.tblwidth=b;var t=c-k*m-p;var u=a("#norecs","#"+a.jgrid.jqID(f.p.id)).eq(0);!isNaN(f.p.height)&&(a(f.grid.bDiv)[0].clientHeight<=a(f.grid.bDiv)[0].scrollHeight||f.rows.length===u.length+1||"scroll"===a(f.grid.bDiv).css("overflow-y"))&&(q=!0,t-=r);b=0;var n=0<f.grid.cols.length;a.each(f.p.colModel,function(w){!1!==this.hidden||this.fixed||(x=this.widthOrg,
x=Math.round(t*x/(f.p.tblwidth-k*m-p)),0>x||(this.width=x,b+=x,f.grid.headers[w].width=x,f.grid.headers[w].el.style.width=x+"px",f.p.footerrow&&(f.grid.footers[w].style.width=x+"px"),f.p.headerrow&&(f.grid.hrheaders[w].style.width=x+"px"),n&&(f.grid.cols[w].style.width=x+"px"),l=w))});if(!l)return;u=0;q?c-p-(b+k*m)!==r&&(u=c-p-(b+k*m)-r):q||0===Math.abs(c-p-(b+k*m))||(u=c-p-(b+k*m)-v);f.p.colModel[l].width+=u;f.p.tblwidth=b+u+k*m+p;if(f.p.tblwidth>c){q=f.p.tblwidth-parseInt(c,10);f.p.tblwidth=c;var x=
f.p.colModel[l].width-=q}else f.p.tblwidth===c?(x=f.p.colModel[l].width-=v,f.p.tblwidth=c-v):x=f.p.colModel[l].width;v=a(f.grid.bDiv)[0].scrollWidth>a(f.grid.bDiv).width()&&0!==v?-1:0;x=f.p.colModel[l].width+=v;f.grid.headers[l].width=x;f.grid.headers[l].el.style.width=x+"px";n&&(f.grid.cols[l].style.width=x+"px");f.p.footerrow&&(f.grid.footers[l].style.width=x+"px");f.p.headerrow&&(f.grid.hrheaders[l].style.width=x+"px")}a(f.grid.bDiv).find("table").first().css("width",f.p.tblwidth+"px");a(f.grid.hDiv).find("table").first().css("width",
f.p.tblwidth+"px");f.grid.hDiv.scrollLeft=f.grid.bDiv.scrollLeft;f.p.footerrow&&a(f.grid.sDiv).find("table").first().css("width",f.p.tblwidth+"px");f.p.headerrow&&a(f.grid.hrDiv).find("table").first().css("width",f.p.tblwidth+"px");if(h){h=a.extend([],f.p.groupHeader);f.p.groupHeader=null;for(v=0;v<h.length;v++)a(f).jqGrid("setGroupHeaders",h[v]);f.grid.hDiv.scrollLeft=f.grid.bDiv.scrollLeft}g&&a(f).jqGrid("setFrozenColumns")}}})},setGridHeight:function(c,e,d){return this.each(function(){if(this.grid){var f=
a(this.grid.bDiv),h=a(this.grid.hDiv).outerHeight(),g=!1;"boolean"!==typeof e&&(e=!1);"boolean"!==typeof d&&(d=!0);!0===e&&(this.p.pager&&(h+=a(this.p.pager).outerHeight()),this.p.toppager&&(h+=a(this.p.toppager).outerHeight()),!0===this.p.toolbar[0]&&(h+=a(this.grid.uDiv).outerHeight(),"both"===this.p.toolbar[1]&&(h+=a(this.grid.ubDiv).outerHeight())),this.p.footerrow&&(h+=a(this.grid.sDiv).outerHeight()),this.p.headerrow&&(h+=a(this.grid.hrDiv).outerHeight()),this.p.caption&&(h+=a(this.grid.cDiv).outerHeight()),
c>h&&(c-=h));this.p.frozenColumns&&d&&(a(this).jqGrid("destroyFrozenColumns"),g=!0);f.css({height:c+(isNaN(c)?"":"px")});this.p.height=c;g&&a(this).jqGrid("setFrozenColumns");this.p.scroll&&this.grid.populateVisible()}})},maxGridHeight:function(c,e,d){return this.each(function(){if(this.grid){void 0===d&&(d=25);var f=a(this.grid.bDiv);if("set"===c&&!isNaN(e))e=parseFloat(e),e>parseFloat(d)&&(f.css("max-height",e),["100%","auto"].includes(this.p.height)&&a(this.grid.bDiv).height()<a(this).height()&&
a("#"+a.jgrid.jqID(this.p.id)).jqGrid("setGridWidth",this.p.width+this.p.scrollOffset-2,!1,!1));else if("remove"===c){var h=["100%","auto"].includes(this.p.height)&&a(this.grid.bDiv).height()<a(this).height();f.css("max-height","");h&&a("#"+a.jgrid.jqID(this.p.id)).jqGrid("setGridWidth",this.p.width-this.p.scrollOffset+2,!1,!1)}}})},setCaption:function(c){return this.each(function(){var e=a(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=c;a(".ui-jqgrid-title, .ui-jqgrid-title-rtl",
this.grid.cDiv).html(c);a(this.grid.cDiv).show();a(this.grid.hDiv).removeClass(e)})},setLabel:function(c,e,d,f){return this.each(function(){if(this.grid&&!a.jgrid.isNull(c)){var h=isNaN(c)?a.jgrid.getElemByAttrVal(this.p.colModel,"name",c,!0):parseInt(c,10);if(0<=h){var g=a("tr.ui-jqgrid-labels th",this.grid.hDiv).eq(h);if(e){var b=a(".s-ico",g),k=a(".colmenu",g);try{a("[id^=jqgh_]",g).empty().html(e).append(b).append(k)}catch(l){}this.p.colNames[h]=e}d&&("string"===typeof d?a(g).addClass(d):a(g).css(d));
"object"===typeof f&&a(g).attr(f);h=this.p.colModel[h];h.autosize_headers&&(b=a.jgrid.getFont(g[0]),h.canvas_width=a.jgrid.getTextWidth(a("div",g)[0].outerText,b)+(h.colmenu?a.jgrid.floatNum(a(".colmenuspan",g).parent().width()):0)+a.jgrid.floatNum(a("div",g).css("padding-left"))+a.jgrid.floatNum(a("div",g).css("padding-right"))+a.jgrid.floatNum(a(".ui-jqgrid-resize",g).width()))}}})},setSortIcon:function(c,e){return this.each(function(){var d=-1,f=1;if(this.grid){a.jgrid.isNull(e)?f=this.p.colNames.length:
d=isNaN(e)?a.jgrid.getElemByAttrVal(this.p.colModel,"name",e,!0):parseInt(e,10);for(var h=0;h<f;h++){0<=d&&(h=d);var g=this.p.colModel[h].name;if("cb"!==g&&"subgrid"!==g&&"rn"!==g&&"sc"===g){g=a("tr.ui-jqgrid-labels th",this.grid.hDiv).eq(h);var b=this.p.colNames[h];var k=g.find(".s-ico");"left"===c?g.find("div.ui-th-div").first().empty().addClass("ui-icon-left").append(k).append(b):"right"===c&&g.find("div.ui-th-div").first().empty().removeClass("ui-icon-left").append(b).append(k)}}}})},setCell:function(c,
e,d,f,h,g){return this.each(function(){var b;if(this.grid){var k=isNaN(e)?a.jgrid.getElemByAttrVal(this.p.colModel,"name",e,!0):parseInt(e,10);if(0<=k&&(b=a(this).jqGrid("getGridRowById",c))){var l=this.p.colModel[k];try{var m=b.cells[k]}catch(q){}if(m){if(""!==d||!0===g)b=a(this).jqGrid("getRowData",c,"local"===this.p.datatype),b[l.name]=d,k=this.formatter(c,d,k,b,"edit"),b=l.title?{title:a.jgrid.stripHtml(k)}:{},this.p.treeGrid&&this.p.ExpandColumn===l.name?a("span",a(m)).html(k).attr(b):a(m).html(k).attr(b),
"local"===this.p.datatype&&(k=this.p._index[a.jgrid.stripPref(this.p.idPrefix,c)],void 0!==k&&(this.p.data[k][l.name]=d));"string"===typeof f?a(m).addClass(f):f&&a(m).css(f);"object"===typeof h&&a(m).attr(h)}}}})},getCell:function(c,e,d){var f=!1,h;"boolean"!==typeof d&&(d=!1);this.each(function(){var g;if(this.grid){var b=isNaN(e)?a.jgrid.getElemByAttrVal(this.p.colModel,"name",e,!0):parseInt(e,10);if(0<=b&&(g=a(this).jqGrid("getGridRowById",c)))if(h=a("td",g).eq(b),d)f=h;else{try{f=a.unformat.call(this,
h,{rowId:g.id,colModel:this.p.colModel[b]},b)}catch(k){f=a.jgrid.htmlDecode(h.html())}this.p.treeGrid&&f&&this.p.ExpandColumn===e&&(f=a("<div>"+f+"</div>").find("span").first().html())}}});return f},getCol:function(c,e,d){var f=[],h,g=0,b,k,l;"boolean"!==typeof e&&(e=!1);void 0===d&&(d=!1);var m=a.jgrid.getFont(this[0]);this.each(function(){var q=this.p.colModel;if(this.grid){var r=isNaN(c)?a.jgrid.getElemByAttrVal(this.p.colModel,"name",c,!0):parseInt(c,10);if(0<=r){var p=this.rows.length,v=0,t=
0;if(p&&0<p){for(;v<p;v++)if(a(this.rows[v]).hasClass("jqgrow")&&"norecs"!==this.rows[v].id)if("maxwidth"===d)void 0===k&&(k=q[r].autosize_headers?q[r].canvas_width:0),k=Math.max(a.jgrid.getTextWidth(this.rows[v].cells[r].outerText,m),k);else{try{h=a.unformat.call(this,a(this.rows[v].cells[r]),{rowId:this.rows[v].id,colModel:this.p.colModel[r]},r)}catch(u){h=a.jgrid.htmlDecode(this.rows[v].cells[r].innerHTML)}d?(l=a.jgrid.floatNum(h),g+=l,void 0===k&&(k=b=l),b=Math.min(b,l),k=Math.max(k,l),t++):e?
f.push({id:this.rows[v].id,value:h}):f.push(h)}if(d)switch(d.toLowerCase()){case "sum":f=g;break;case "avg":f=g/t;break;case "count":f=t;break;case "min":f=b;break;case "max":f=k;break;case "maxwidth":f=k}}}}});return f},setCol:function(c,e){this.each(function(){var d=-1,f=this.p.colModel,h;if(this.grid){if(isNaN(c)){d=a.jgrid.getElemByAttrVal(f,"name",c,!0);var g=c}else d=parseInt(c,10),g=f[d].name;if(0<=d){var b=this.rows.length,k=0;if(b&&0<b)for(var l=a.jgrid.isFunction(e)?e:function(r,p,v){return r},
m="local"===this.p.datatype;k<b;k++)if(a(this.rows[k]).hasClass("jqgrow")&&"norecs"!==this.rows[k].id){var q={};for(h=0;h<this.rows[k].cells.length;h++)void 0!==this.rows[k].cells[h]&&(q[f[h].name]=a.unformat.call(this,this.rows[k].cells[h],{rowId:this.rows[k].id,colModel:f[d]},d));h=l.call(this,e,q,this.rows[k]);if(m){let r=this.p._index[a.jgrid.stripPref(this.p.idPrefix,this.rows[k].id)];this.p.data[r][f[d].name]=h}h=this.formatter(this.rows[k].id,h,d,q,"edit");q=f[d].title?{title:a.jgrid.stripHtml(h)}:
{};!0===this.p.treeGrid&&g===this.p.ExpandColumn?a(this.rows[k].cells[d]).find("span[class*='cell-wrapper']").html(h).attr(q):a(this.rows[k].cells[d]).html(h).attr(q)}}}})},clearGridData:function(c,e){return this.each(function(){if(this.grid){"boolean"!==typeof c&&(c=!1);"boolean"!==typeof e&&(e=!1);if(this.p.deepempty)a("#"+a.jgrid.jqID(this.p.id)+" tbody").first().find("tr").slice(1).remove();else{var d=a("#"+a.jgrid.jqID(this.p.id)+" tbody").first().find("tr").first()[0];a("#"+a.jgrid.jqID(this.p.id)+
" tbody").first().empty().append(d)}this.p.footerrow&&c&&a(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.headerrow&&e&&a(".ui-jqgrid-hrtable td",this.grid.hrDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.p.groupingView._locgr=!1;this.updatepager(!0,!1)}})},getInd:function(c,e){var d=!1,f;this.each(function(){(f=a(this).jqGrid("getGridRowById",c))&&(d=
!0===e?f:f.rowIndex)});return d},bindKeys:function(c){var e=a.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,onSelectRow:!0,scrollingRows:!0},c||{});return this.each(function(){var d=this;a("body").is("[role]")||a("body").attr("role","application");d.p.scrollrows=e.scrollingRows;a(d).on("keydown",function(f){var h=a(d).find("tr[tabindex=0]")[0],g=d.p.treeReader.expanded_field;if(h){var b=d.p.selrow;var k=d.p._index[a.jgrid.stripPref(d.p.idPrefix,h.id)];if(37===f.keyCode||38===f.keyCode||
39===f.keyCode||40===f.keyCode){if(38===f.keyCode){var l=h.previousSibling;var m="";if(l&&a(l).hasClass("jqgrow")){if(a(l).is(":hidden"))for(;l;){if(l=l.previousSibling,!a(l).is(":hidden")&&a(l).hasClass("jqgrow")){m=l.id;break}}else m=l.id;a(d).jqGrid("setSelection",m,e.onSelectRow,f)}a(d).triggerHandler("jqGridKeyUp",[m,b,f]);a.jgrid.isFunction(e.onUpKey)&&e.onUpKey.call(d,m,b,f);f.preventDefault()}if(40===f.keyCode){l=h.nextSibling;m="";if(l&&a(l).hasClass("jqgrow")){if(a(l).is(":hidden"))for(;l;){if(l=
l.nextSibling,!a(l).is(":hidden")&&a(l).hasClass("jqgrow")){m=l.id;break}}else m=l.id;a(d).jqGrid("setSelection",m,e.onSelectRow,f)}a(d).triggerHandler("jqGridKeyDown",[m,b,f]);a.jgrid.isFunction(e.onDownKey)&&e.onDownKey.call(d,m,b,f);f.preventDefault()}37===f.keyCode&&(d.p.treeGrid&&d.p.data[k][g]&&a(h).find("div.treeclick").trigger("click"),a(d).triggerHandler("jqGridKeyLeft",[d.p.selrow,f]),a.jgrid.isFunction(e.onLeftKey)&&e.onLeftKey.call(d,d.p.selrow,f));39===f.keyCode&&(d.p.treeGrid&&!d.p.data[k][g]&&
a(h).find("div.treeclick").trigger("click"),a(d).triggerHandler("jqGridKeyRight",[d.p.selrow,f]),a.jgrid.isFunction(e.onRightKey)&&e.onRightKey.call(d,d.p.selrow,f))}else 13===f.keyCode?(f.preventDefault(),a(d).triggerHandler("jqGridKeyEnter",[d.p.selrow,f]),a.jgrid.isFunction(e.onEnter)&&e.onEnter.call(d,d.p.selrow,f)):32===f.keyCode&&(a(d).triggerHandler("jqGridKeySpace",[d.p.selrow,f]),a.jgrid.isFunction(e.onSpace)&&e.onSpace.call(d,d.p.selrow,f))}}).on("click",function(f){a(f.target).is("input, textarea, select")||
a(f.target,d.rows).closest("tr.jqgrow").focus()})})},unbindKeys:function(){return this.each(function(){a(this).off("keydown")})},getLocalRow:function(c){var e=!1,d;this.each(function(){void 0!==c&&(d=this.p._index[a.jgrid.stripPref(this.p.idPrefix,c)],0<=d&&(e=this.p.data[d]))});return e},progressBar:function(c){c=a.extend({htmlcontent:"",method:"hide",loadtype:"disable"},c||{});return this.each(function(){var e="show"===c.method?!0:!1,d=a("#load_"+a.jgrid.jqID(this.p.id));var f=a(window).scrollTop();
""!==c.htmlcontent&&d.html(c.htmlcontent);switch(c.loadtype){case "enable":d.toggle(e);break;case "block":a("#lui_"+a.jgrid.jqID(this.p.id)).css(e?{top:0,left:0,height:a("#gbox_"+a.jgrid.jqID(this.p.id)).height(),width:a("#gbox_"+a.jgrid.jqID(this.p.id)).width(),"z-index":1E4,position:"absolute"}:{}).toggle(e),d.toggle(e)}d.is(":visible")&&(e=d.offsetParent(),d.css("top",""),d.offset().top<f&&(f=Math.min(10+f-e.offset().top,e.height()-d.height()),d.css("top",f+"px")))})},getColProp:function(c){var e=
this[0];return e.grid?a.jgrid.getElemByAttrVal(e.p.colModel,"name",c,!1):!1},setColProp:function(c,e){return this.each(function(){if(this.grid&&a.isPlainObject(e)){var d=a.jgrid.getElemByAttrVal(this.p.colModel,"name",c,!0);0<=d&&a.extend(!0,this.p.colModel[d],e)}})},sortGrid:function(c,e,d){return this.each(function(){var f=-1,h,g=!1;if(this.grid){c||(c=this.p.sortname);for(h=0;h<this.p.colModel.length;h++)if(this.p.colModel[h].index===c||this.p.colModel[h].name===c){f=h;break}-1!==f&&(h=this.p.colModel[f].sortable,
g||(g=this.grid.headers[f].el),"boolean"!==typeof h&&(h=!0),"boolean"!==typeof e&&(e=!1),h&&this.sortData("jqgh_"+this.p.id+"_"+c,f,e,d,g))}})},setGridState:function(c){return this.each(function(){if(this.grid){var e=a(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),d=a(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);"hidden"===c?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),
this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.headerrow&&a(".ui-jqgrid-hrdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),a(".ui-jqgrid-headlink",this.grid.cDiv).removeClass(e).addClass(d),this.p.gridstate="hidden"):"visible"===c&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+
a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.headerrow&&a(".ui-jqgrid-hrdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),a(".ui-jqgrid-headlink",this.grid.cDiv).removeClass(d).addClass(e),
this.p.gridstate="visible")}})},setFrozenColumns:function(c="frozen-col-class",e=""){return this.each(function(){"rtl"===this.p.direction&&(c+="-rtl");e&&console.log("called set from:",e,c);var d=this,f=d.p.colModel,h=0,g=f.length;for(d.p.frozenColCount=-1;h<g;){if(!0===f[h].frozen)d.p.frozenColCount=h;else break;h++}0<=d.p.frozenColCount&&(a(this).jqGrid("refreshFrozenColumns",!0,!0,c),a(this).on("jqGridAfterGridComplete.setFrozenColumns",function(){var b=0;for(h=0;h<d.p.frozenColCount+1;h++)if(!f[h].hidden){var k=
this.id+"_"+f[h].name;a("#"+a.jgrid.jqID(this.id)+' td[aria-describedby="'+k+'"]').addClass(c).css("inset-inline-start",b+"px");b+=a(".ui-jqgrid-htable th#"+k,"#gbox_"+a.jgrid.jqID(this.p.id)).outerWidth()}d.p.grouping&&a("#"+a.jgrid.jqID(this.p.id)+" tr.jqgroup td.for-sticky").addClass(c).css("inset-inline-start","0")}),this.p.frozenColumns=!0)})},refreshFrozenColumns:function(c=!0,e=!1,d="frozen-col-class"){return this.each(function(){"rtl"===this.p.direction&&"-rtl"!==d.slice(-4)&&(d+="-rtl");
console.log("called refresh frozen",d);var f=0,h=this.p.colModel,g=[];for(let k=0;k<this.p.frozenColCount+1;k++)if(!h[k].hidden){var b=this.p.id+"_"+h[k].name;c&&g.push('.ui-jqgrid-bdiv td[aria-describedby="'+b+'"]');g.push(".ui-jqgrid-htable th#"+b);this.p.filterToolbar&&g.push(".ui-jqgrid-htable th#gsh_"+b);this.p.headerrow&&g.push('.ui-jqgrid-hrtable td[aria-describedby="'+b+'"]');this.p.footerrow&&g.push('.ui-jqgrid-ftable td[aria-describedby="'+b+'"]');a(this).jqGrid("isGroupHeaderOn")&&g.push('.ui-jqgrid-htable .ui-jqgrid-labels [data-spname="'+
h[k].name+'"]');g=g.join();g=a(g,"#gbox_"+a.jgrid.jqID(this.p.id)).css("inset-inline-start",f+"px");e&&g.addClass(d);f+=a(".ui-jqgrid-htable th#"+b,"#gbox_"+a.jgrid.jqID(this.p.id)).outerWidth();g=[]}})},destroyFrozenColumns:function(c="frozen-col-class"){return this.each(function(){var e=this.p.colModel,d=[];"rtl"===this.p.direction&&"-rtl"!==c.slice(-4)&&(c+="-rtl");console.log("caled unset",c);for(let h=0;h<this.p.frozenColCount+1;h++){var f=this.p.id+"_"+e[h].name;d.push('.ui-jqgrid-bdiv td[aria-describedby="'+
f+'"]');d.push(".ui-jqgrid-htable th#"+f);this.p.filterToolbar&&d.push(".ui-jqgrid-htable th#gsh_"+f);this.p.headerrow&&d.push('.ui-jqgrid-hrtable td[aria-describedby="'+f+'"]');this.p.footerrow&&d.push('.ui-jqgrid-ftable td[aria-describedby="'+f+'"]');a(this).jqGrid("isGroupHeaderOn")&&d.push('.ui-jqgrid-htable .ui-jqgrid-labels [data-spname="'+e[h].name+'"]');d=d.join();a(d,"#gbox_"+a.jgrid.jqID(this.p.id)).css("inset-inline-start","").removeClass(c);d=[]}a(this).off("jqGridAfterGridComplete.setFrozenColumns");
this.p.frozenColumns=!1;this.p.frozenColCount=-1})},resizeColumn:function(c,e,d,f){return this.each(function(){var h=this.grid,g=this.p,b=g.colModel,k,l=b.length;"boolean"!==typeof d&&(d=!1);"boolean"!==typeof f&&(f=!0);if("string"===typeof c)for(k=0;k<l;k++){if(b[k].name===c){c=k;break}}else c=parseInt(c,10);if(!(!b[c].resizable&&!d||b[c].hidden||(e=parseFloat(e),"number"!==typeof c||0>c||c>b.length-1||"number"!==typeof e))){e<g.minColWidth&&(e=g.minColWidth);if(g.forceFit)for(g.nv=0,k=c+1;k<l;k++)if(!0!==
b[k].hidden){g.nv=k-c;break}h.resizing={idx:c};b=e-h.headers[c].width;if(g.forceFit){k=h.headers[c+g.nv].width-b;if(k<g.minColWidth)return;h.headers[c+g.nv].newWidth=h.headers[c+g.nv].width-b}h.newWidth=g.tblwidth+b;h.headers[c].newWidth=e;h.dragEnd(!1,f)}})},getStyleUI:function(c,e,d,f){var h="",g="";try{var b=c.split(".");d||(h="class=",g='"');a.jgrid.isNull(f)&&(f="");switch(b.length){case 1:h+=g+a.jgrid.trim(f+" "+a.jgrid.styleUI[b[0]][e]+g);break;case 2:h+=g+a.jgrid.trim(f+" "+a.jgrid.styleUI[b[0]][b[1]][e]+
g)}}catch(k){h=""}return h},resizeGrid:function(c,e,d,f){return this.each(function(){var h=this,g=!1;void 0===c&&(c=500);"boolean"!==typeof e&&(e=!0);"boolean"!==typeof d&&(d=!0);"boolean"!==typeof f&&(f=!0);setTimeout(function(){try{h.p.frozenColumns&&f&&(a("#"+a.jgrid.jqID(h.p.id)).jqGrid("destroyFrozenColumns"),g=!0);if(e){var b=a(window).width(),k=a("#gbox_"+a.jgrid.jqID(h.p.id)).parent().width(),l=h.p.width;l=3<b-k?k:b;a(h.grid.bDiv).css("max-height")&&["100%","auto"].includes(h.p.height)&&a(h.grid.bDiv).height()<
a(h).height()?a("#"+a.jgrid.jqID(h.p.id)).jqGrid("setGridWidth",l+h.p.scrollOffset-2,!1,!1):a("#"+a.jgrid.jqID(h.p.id)).jqGrid("setGridWidth",l,h.p.shrinkToFit,!1)}if("auto"!==h.p.height&&"100%"!==h.p.height&&d){var m=h.p.height,q=-1===h.p.styleUI.search("Bootstrap")||isNaN(h.p.height)?0:2,r=a(window).height(),p=a("#gbox_"+a.jgrid.jqID(h.p.id)).parent().height();m=3<r-p?p:r;a("#"+a.jgrid.jqID(h.p.id)).jqGrid("setGridHeight",m-q,!0,!1)}g&&a("#"+a.jgrid.jqID(h.p.id)).jqGrid("setFrozenColumns")}catch(v){}},
c)})},colMenuAdd:function(c,e){e=a.extend({title:"Item",icon:a.jgrid.styleUI[this[0].p.styleUI].colmenu.icon_new_item,funcname:null,position:"last",closeOnRun:!0,exclude:"",id:null,items:[]},e||{});return this.each(function(){e.colname="all"===c?"_all_":c;e.id=a.jgrid.isNull(e.id,!0)?a.jgrid.randId():e.id;this.p.colMenuCustom[e.id]=e})},colMenuDelete:function(c){return this.each(function(){this.p.colMenuCustom.hasOwnProperty(c)&&delete this.p.colMenuCustom[c]})},menubarAdd:function(c,e){var d=a.jgrid.styleUI[this[0].p.styleUI].common,
f,h;return this.each(function(){var g=this;void 0===e&&(e="_menubar");if(Array.isArray(c))for(var b=0;b<c.length;b++){f=c[b];f.id||(f.id=a.jgrid.randId());var k="";f.icon&&(k='<span class="'+d.icon_base+" "+f.icon+'"></span>');f.position||(f.position="last");f.closeoncall||(f.closeoncall=!0);f.divider?(h='<li class="ui-menu-item divider" role="separator"></li>',f.cick=null):h='<li class="ui-menu-item" role="presentation"><a id="'+f.id+'" class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table"><tr><td class="menu_icon">'+
k+'</td><td class="menu_text">'+f.title+"</td></tr></table></a></li>";"last"===f.position?a("#"+this.p.id+e).append(h):a("#"+this.p.id+e).prepend(h)}a("li a","#"+this.p.id+e).each(function(l,m){a(c).each(function(q,r){if(r.id===m.id&&a.jgrid.isFunction(r.click))return a(m).on("click",function(p){r.click.call(g,p)}),!1});a(this).hover(function(q){a(this).addClass(d.hover);q.stopPropagation()},function(q){a(this).removeClass(d.hover)})})})},menubarDelete:function(c,e){return this.each(function(){void 0===
e&&(e="_menubar");a("#"+c,"#"+this.p.id+e).remove()})},addColSearchMenu:function(){return this.each(function(){a(this).colMenuAdd("sc",{title:"Reset",position:"first",id:"reset",funcname:function(){a("input[id^='jqs_']","#"+this.p.id).each(function(c){a(this).val("")});a(this)[0].p._results={};a(this).jqGrid("showCol",this.p._avc)}});a(this).colMenuAdd("sc",{separator:!0,id:"groupOp"});a(this).colMenuAdd("sc",{separator:!0,id:"operOp"});a(this).colMenuAdd("sc",{separator:!0,id:"close",funcname:function(){return!0}});
a(this).on("jqGridcolMenuBeforeProcess.custom",function(c,e){if("custom"===e.module&&"sc"===e.column){c=a.jgrid.getRegional(this,"search");var d=this.p.searchColOptions,f=a.jgrid.getMethod("getStyleUI"),h=this.p.styleUI+".base";"reset"===e.action.id&&(e.action.title=c.Reset||"Reset",e.action.icon=f(this.p.styleUI+".colmenu","icon_reset",!0,""));"close"===e.action.id&&(e.action.title=c.Close||"Close",e.action.icon=f(this.p.styleUI+".colmenu","icon_close",!0,""));if("groupOp"===e.action.id){var g=f(h,
"searchSelect",!1,"search-col-input");e.action.title=""+(c.Operand||"Operand: ");e.action.title+="<select data-grid-id="+this.p.id+' id="opselect"  '+g+">";g=f(this.p.styleUI+".colmenu","icon_group_op",!0,"");e.action.icon=g;for(g=0;g<c.groupOps.length;g++){var b=d.searchOp===c.groupOps[g].op?"selected":"";e.action.title+='<option value="'+c.groupOps[g].op+'" '+b+">"+c.groupOps[g].text+"</option>"}e.action.title+="</select>";setTimeout(function(){a("#opselect").on("change",function(){var k=a("#"+
a(this).attr("data-grid-id"))[0];k.p.searchColOptions.searchOp=a(this).val();a.jgrid.myfunc(k.p.id)})},200)}if("operOp"===e.action.id){g=f(h,"searchSelect",!1,"search-col-input");e.action.title=c.Operation||"Oper : ";e.action.title+="<select data-grid-id="+this.p.id+' id="selectoper"  '+g+">";g=f(this.p.styleUI+".colmenu","icon_oper_op",!0,"");e.action.icon=g;for(g=0;g<c.odata.length;g++)b=d.operand===c.odata[g].oper?"selected":"",d.aOperands.includes(c.odata[g].oper)&&(e.action.title+='<option value="'+
c.odata[g].oper+'" '+b+">"+c.odata[g].text+"</option>");e.action.title+="</select>";setTimeout(function(){a("#selectoper").on("change",function(){var k=a("#"+a(this).attr("data-grid-id"))[0];k.p.searchColOptions.operand=a(this).val();a.jgrid.myfunc(k.p.id)})},200)}}})})},disableColMenu:function(c){return this.each(function(){a(this.grid.hDiv).find("tr #jqgh_"+this.p.id+"_"+c+" > .colmenu").css("display","none")})},enableColMenu:function(c){return this.each(function(){a(this.grid.hDiv).find("tr #jqgh_"+
this.p.id+"_"+c+" > .colmenu").css("display","inline")})}});a.jgrid.extend({editCell:function(c,e,d,f,h){return this.each(function(){var g=this,b=a(this).jqGrid("getStyleUI",g.p.styleUI+".common","highlight",!0);var k=a(this).jqGrid("getStyleUI",g.p.styleUI+".common","disabled",!0);var l=g.p.ariaBody?"":a(this).jqGrid("getStyleUI",g.p.styleUI+".common","hover",!0),m=a(this).jqGrid("getStyleUI",g.p.styleUI+".celledit","inputClass",!0),q=a(this).jqGrid("getStyleUI",g.p.styleUI+".celledit","selectClass",
!0);if(g.grid&&!0===g.p.cellEdit&&!a(g.rows[c]).hasClass(k)){e=parseInt(e,10);g.p.selrow=g.rows[c].id;g.p.knv||g.p.ariaBody||a(g).jqGrid("GridNav");if(0<g.p.savedRow.length){if(!0===d&&c==g.p.iRow&&e==g.p.iCol)return;a(g).jqGrid("saveCell",g.p.savedRow[0].id,g.p.savedRow[0].ic)}else window.setTimeout(function(){a("#"+a.jgrid.jqID(g.p.knv)).attr("tabindex","-1").focus()},1);var r=g.p.colModel[e];k=r.name;if("subgrid"!==k&&"cb"!==k&&"rn"!==k&&"sc"!==k){try{var p=a(g.rows[c].cells[e])}catch(n){p=a("td",
g.rows[c]).eq(e)}if(0<=parseInt(g.p.iCol,10)&&0<=parseInt(g.p.iRow,10)&&void 0!==g.p.iRowId){var v=a(g).jqGrid("getGridRowById",g.p.iRowId);a(v).removeClass("selected-row "+l).find("td").eq(g.p.iCol).removeClass("edit-cell "+b)}p.addClass("edit-cell "+b);a(g.rows[c]).addClass("selected-row "+l);if(!0!==r.editable||!0!==d||p.hasClass("not-editable-cell")||a.jgrid.isFunction(g.p.isCellEditable)&&!g.p.isCellEditable.call(g,k,c,e)){var t=p.html().replace(/&#160;/ig,"");a(g).triggerHandler("jqGridCellSelect",
[g.rows[c].id,e,t,f]);a.jgrid.isFunction(g.p.onCellSelect)&&g.p.onCellSelect.call(g,g.rows[c].id,e,t,f)}else{try{t=a.unformat.call(g,p,{rowId:g.rows[c].id,colModel:r},e)}catch(n){t=r.edittype&&"textarea"===r.edittype?p.text():p.html()}g.p.autoencode&&(t=a.jgrid.htmlDecode(t));r.edittype||(r.edittype="text");g.p.savedRow.push({id:c,ic:e,name:k,v:t,rowId:g.rows[c].id});try{if("&nbsp;"===t||"&#160;"===t||1===t.length&&160===t.charCodeAt(0))t=""}catch(n){}a.jgrid.isFunction(g.p.formatCell)&&(b=g.p.formatCell.call(g,
g.rows[c].id,k,t,c,e),void 0!==b&&(t=b));a(g).triggerHandler("jqGridBeforeEditCell",[g.rows[c].id,k,t,c,e]);a.jgrid.isFunction(g.p.beforeEditCell)&&g.p.beforeEditCell.call(g,g.rows[c].id,k,t,c,e);b=a.extend({},r.editoptions||{},{id:c+"_"+k,name:k,rowId:g.rows[c].id,oper:"edit",module:"cell"});h&&(t=f.key);var u=a.jgrid.createEl.call(g,r.edittype,b,t,!0,a.extend({},a.jgrid.ajaxOptions,g.p.ajaxSelectOptions||{}));-1<a.inArray(r.edittype,["text","textarea","password"])?a(u).addClass(m):"select"===r.edittype&&
a(u).addClass(q);p.html("").append(u).attr("tabindex","0");a.jgrid.bindEv.call(g,u,b);window.setTimeout(function(){a(u).focus()},1);a("input, select, textarea",p).on("keydown",function(n){var x=n.key;27===n.keyCode&&(0<a("input.hasDatepicker",p).length?a(".ui-datepicker").is(":hidden")?a(g).jqGrid("restoreCell",c,e):a("input.hasDatepicker",p).datepicker("hide"):a(g).jqGrid("restoreCell",c,e));if(13===n.keyCode&&n.altKey&&"TEXTAREA"===this.nodeName)return this.value+="\r",n.preventDefault(),!0;if(13===
n.keyCode&&!n.shiftKey)return n.preventDefault(),a(g).jqGrid("saveCell",c,e),c<g.rows.length-1&&h&&a(g).jqGrid("focusBodyCell",c+1,e),!1;if(9===n.keyCode&&!h){if(g.grid.hDiv.loading)return!1;n.shiftKey?g.p.ariaBody?(a(g).jqGrid("saveCell",c,e),1<e&&a(g).jqGrid("focusBodyCell",c,e-1)):!a(g).jqGrid("prevCell",c,e,n)&&g.p.editNextRowCell&&0<c-1&&g.rows[c-1]&&(c--,a(g).jqGrid("prevCell",c,g.p.colModel.length,n)):g.p.ariaBody?(a(g).jqGrid("saveCell",c,e),e<g.p.colModel.length-1&&a(g).jqGrid("focusBodyCell",
c,e+1)):!a(g).jqGrid("nextCell",c,e,n)&&g.p.editNextRowCell&&g.rows[c+1]&&(c++,a(g).jqGrid("nextCell",c,0,n))}!h&&g.p.F2key&&g.p.ariaBody&&"F2"===n.key&&(a(g).jqGrid("saveCell",c,e),a(g).jqGrid("focusBodyCell",c,e),g.p.F2key=!1);h&&("ArrowUp"===x&&(a(g).jqGrid("saveCell",c,e),1<c&&a(g).jqGrid("focusBodyCell",c-1,e)),"ArrowDown"===x&&(a(g).jqGrid("saveCell",c,e),c<g.p.rows.length-1&&a(g).jqGrid("focusBodyCell",c+1,e)),"ArrowLeft"===x&&(a(g).jqGrid("saveCell",c,e),1<e&&a(g).jqGrid("focusBodyCell",c,
e-1)),"ArrowRight"===x&&(a(g).jqGrid("saveCell",c,e),e<g.p.colModel.length-1&&a(g).jqGrid("focusBodyCell",c,e+1)),9===n.keyCode&&(a(g).jqGrid("saveCell",c,e),n.shiftKey?1<e&&a(g).jqGrid("focusBodyCell",c,e-1):e<g.p.colModel.length-1&&a(g).jqGrid("focusBodyCell",c,e+1)));n.stopPropagation()});a(g).triggerHandler("jqGridAfterEditCell",[g.rows[c].id,k,t,c,e]);a.jgrid.isFunction(g.p.afterEditCell)&&g.p.afterEditCell.call(g,g.rows[c].id,k,t,c,e)}g.p.iCol=e;g.p.iRow=c;g.p.iRowId=g.rows[c].id}}})},saveCell:function(c,
e,d){return this.each(function(){var f=this,h=f.p.colModel[e],g=h.name,b=a(f).jqGrid("getGridRowById",f.rows[c].id),k=a("td",b).eq(e);if(void 0!==d){var l=a.unformat.call(f,k,{rowId:f.rows[c].id,colModel:h},e);f.p.savedRow.push({id:c,ic:e,name:g,v:l,rowId:f.rows[c].id});f.p.savedValues={oldvalue:l,newvalue:d,indexRow:c}}var m=1<=f.p.savedRow.length?0:null,q=a.jgrid.getRegional(this,"errors"),r=a.jgrid.getRegional(this,"edit");if(f.grid&&!0===f.p.cellEdit){if(null!==m){var p=a.jgrid.jqID(g),v,t=a(k).offset();
if(void 0===d)switch(h.edittype){case "select":if(h.editoptions.multiple){l=a("#"+c+"_"+p,b);var u=[];(v=a(l).val())?v.join(","):v="";a("option:selected",l).each(function(B,E){u[B]=a(E).text()});var n=u.join(",")}else v=a("#"+c+"_"+p+" option:selected",b).val(),n=a("#"+c+"_"+p+" option:selected",b).text();h.formatter&&(n=v);break;case "checkbox":l=["Yes","No"];h.editoptions&&h.editoptions.value&&(l=h.editoptions.value.split(":"));n=v=a("#"+c+"_"+p,b).is(":checked")?l[0]:l[1];break;case "password":case "text":case "textarea":case "button":n=
v=a("#"+c+"_"+p,b).val();break;case "custom":try{if(h.editoptions&&a.jgrid.isFunction(h.editoptions.custom_value)){v=h.editoptions.custom_value.call(f,a(".customelement",k),"get");if(void 0===v)throw"e2";n=v}else throw"e1";}catch(B){"e1"===B?a.jgrid.info_dialog(q.errcap,"function 'custom_value' "+r.msg.nodefined,r.bClose,{styleUI:f.p.styleUI}):"e2"===B?a.jgrid.info_dialog(q.errcap,"function 'custom_value' "+r.msg.novalue,r.bClose,{styleUI:f.p.styleUI}):a.jgrid.info_dialog(q.errcap,B.message,r.bClose,
{styleUI:f.p.styleUI})}}else{if(!0!==h.editable||k.hasClass("not-editable-cell")||a.jgrid.isFunction(f.p.isCellEditable)&&!f.p.isCellEditable.call(f,g,c,e)){n=v=d;f.p.savedRow.splice(0,1);return}n=v=d}if(n!==f.p.savedRow[m].v){if(l=a(f).triggerHandler("jqGridBeforeSaveCell",[f.p.savedRow[m].rowId,g,v,c,e]))n=v=l;a.jgrid.isFunction(f.p.beforeSaveCell)&&(l=f.p.beforeSaveCell.call(f,f.p.savedRow[m].rowId,g,v,c,e))&&(n=v=l);var x=a.jgrid.checkValues.call(f,v,e),w=!1;if(!0===x[0]){l=a(f).triggerHandler("jqGridBeforeSubmitCell",
[f.p.savedRow[m].rowId,g,v,c,e])||{};a.jgrid.isFunction(f.p.beforeSubmitCell)&&((l=f.p.beforeSubmitCell.call(f,f.p.savedRow[m].rowId,g,v,c,e))||(l={}));var A=a(f).triggerHandler("jqGridOnSubmitCell",[f.p.savedRow[m].rowId,g,v,c,e]);void 0===A&&(A=!0);a.jgrid.isFunction(f.p.onSubmitCell)&&(A=f.p.onSubmitCell(f.p.savedRow[m].rowId,g,v,c,e),void 0===A&&(A=!0));if(!1===A)return;0<a("input.hasDatepicker",k).length&&a("input.hasDatepicker",k).datepicker("hide");var H={};if("remote"===f.p.cellsubmit)if(f.p.cellurl){f.p.autoencode&&
(v=a.jgrid.htmlEncode(v));h.editoptions&&h.editoptions.NullIfEmpty&&""===v&&(v="null",w=!0);H[g]=v;h=f.p.prmNames;var F=h.id;A=h.oper;H[F]=a.jgrid.stripPref(f.p.idPrefix,f.p.savedRow[m].rowId);H[A]=h.editoper;H=a.extend(l,H);a(f).jqGrid("progressBar",{method:"show",loadtype:f.p.loadui,htmlcontent:a.jgrid.getRegional(f,"defaults.savetext")});f.grid.hDiv.loading=!0;a.ajax(a.extend({url:f.p.cellurl,data:a.jgrid.isFunction(f.p.serializeCellData)?f.p.serializeCellData.call(f,H,g):H,type:"POST",success:function(B,
E,R){a(f).jqGrid("progressBar",{method:"hide",loadtype:f.p.loadui});f.grid.hDiv.loading=!1;"success"===E&&(B=a(f).triggerHandler("jqGridAfterSubmitCell",[f,R,H[F],g,v,c,e])||[!0,""],!0===B[0]&&a.jgrid.isFunction(f.p.afterSubmitCell)&&(B=f.p.afterSubmitCell.call(f,R,H[F],g,v,c,e)),!0===B[0]?(w&&(v=""),a(k).empty(),a(f).jqGrid("setCell",f.p.savedRow[m].rowId,e,n,!1,!1,!0),k=a("td",b).eq(e),a(k).addClass("dirty-cell"),a(b).addClass("edited"),a(f).triggerHandler("jqGridAfterSaveCell",[f.p.savedRow[m].rowId,
g,v,c,e]),a.jgrid.isFunction(f.p.afterSaveCell)&&f.p.afterSaveCell.call(f,f.p.savedRow[m].rowId,g,v,c,e),f.p.savedRow.splice(0,1)):(a(f).triggerHandler("jqGridErrorCell",[R,E]),a.jgrid.isFunction(f.p.errorCell)?f.p.errorCell.call(f,R,E):a.jgrid.info_dialog(q.errcap,B[1],r.bClose,{styleUI:f.p.styleUI,top:t.top+30,left:t.left,onClose:function(){f.p.restoreCellonFail||a("#"+c+"_"+p,b).focus()}}),f.p.restoreCellonFail&&a(f).jqGrid("restoreCell",c,e)))},error:function(B,E,R){a("#lui_"+a.jgrid.jqID(f.p.id)).hide();
f.grid.hDiv.loading=!1;a(f).triggerHandler("jqGridErrorCell",[B,E,R]);a.jgrid.isFunction(f.p.errorCell)?f.p.errorCell.call(f,B,E,R):a.jgrid.info_dialog(q.errcap,B.status+" : "+B.statusText+"<br/>"+E,r.bClose,{styleUI:f.p.styleUI,top:t.top+30,left:t.left,onClose:function(){f.p.restoreCellonFail||a("#"+c+"_"+p,b).focus()}});f.p.restoreCellonFail&&a(f).jqGrid("restoreCell",c,e)}},a.jgrid.ajaxOptions,f.p.ajaxCellOptions||{}))}else try{a.jgrid.info_dialog(q.errcap,q.nourl,r.bClose,{styleUI:f.p.styleUI}),
f.p.restoreCellonFail&&a(f).jqGrid("restoreCell",c,e)}catch(B){}"clientArray"===f.p.cellsubmit?(a(k).empty(),a(f).jqGrid("setCell",f.p.savedRow[m].rowId,e,n,!1,!1,!0),k=a("td",b).eq(e),a(k).addClass("dirty-cell"),a(b).addClass("edited"),a(f).triggerHandler("jqGridAfterSaveCell",[f.p.savedRow[m].rowId,g,v,c,e]),a.jgrid.isFunction(f.p.afterSaveCell)&&f.p.afterSaveCell.call(f,f.p.savedRow[m].rowId,g,v,c,e),f.p.savedRow.splice(0,1)):"storage"===f.p.cellsubmit&&(H=f.p.savedRow[m],H[g]=v,H[f.p.keyName]=
a.jgrid.stripPref(f.p.idPrefix,f.p.savedRow[m].rowId),a(f).jqGrid("updateStorageRecord",H).then(function(B){"complete"===B.type&&(a(k).empty(),a(f).jqGrid("setCell",f.p.savedRow[m].rowId,e,n,!1,!1,!0),k=a("td",b).eq(e),a(k).addClass("dirty-cell"),a(b).addClass("edited"),a(f).triggerHandler("jqGridAfterSaveCell",[f.p.savedRow[m].rowId,g,v,c,e]),a.jgrid.isFunction(f.p.afterSaveCell)&&f.p.afterSaveCell.call(f,f.p.savedRow[m].rowId,g,v,c,e),f.p.savedRow.splice(0,1))}).catch(function(B){a.jgrid.info_dialog("Error",
B.target.error.name+" : "+B.target.error.message,"Close")}))}else try{a.jgrid.isFunction(f.p.validationCell)?f.p.validationCell.call(f,a("#"+c+"_"+p,b),x[1],c,e):(window.setTimeout(function(){a.jgrid.info_dialog(q.errcap,v+" "+x[1],r.bClose,{styleUI:f.p.styleUI,top:t.top+30,left:t.left,onClose:function(){f.p.restoreCellonFail||a("#"+c+"_"+p,b).focus()}})},50),f.p.restoreCellonFail&&a(f).jqGrid("restoreCell",c,e))}catch(B){alert(x[1])}}else a(f).jqGrid("restoreCell",c,e)}window.setTimeout(function(){a("#"+
a.jgrid.jqID(f.p.knv)).attr("tabindex","-1").focus();f.p.ariaBody&&a(f).jqGrid("focusBodyCell",f.p.iRow,f.p.iCol)},0)}})},restoreCell:function(c,e){return this.each(function(){var d=this,f=1<=d.p.savedRow.length?0:null;if(d.grid&&!0===d.p.cellEdit){if(null!==f){var h=a(d).jqGrid("getGridRowById",d.p.savedRow[f].rowId);h=a("td",h).eq(e);if(a.jgrid.isFunction(a.fn.datepicker))try{a("input.hasDatepicker",h).datepicker("hide")}catch(g){}a(h).empty().attr("tabindex","-1");a(d).jqGrid("setCell",d.p.savedRow[0].rowId,
e,d.p.savedRow[f].v,!1,!1,!0);a(d).triggerHandler("jqGridAfterRestoreCell",[d.p.savedRow[f].rowId,d.p.savedRow[f].v,c,e]);a.jgrid.isFunction(d.p.afterRestoreCell)&&d.p.afterRestoreCell.call(d,d.p.savedRow[f].rowId,d.p.savedRow[f].v,c,e);d.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+d.p.knv).attr("tabindex","-1").focus();d.p.ariaBody&&a(d).jqGrid("focusBodyCell",d.p.iRow,d.p.iCol)},0)}})},nextCell:function(c,e,d){var f;this.each(function(){var h=!1,g;if(this.grid&&!0===this.p.cellEdit){for(g=
e+1;g<this.p.colModel.length;g++)if(!0===this.p.colModel[g].editable&&(!a.jgrid.isFunction(this.p.isCellEditable)||this.p.isCellEditable.call(this,this.p.colModel[g].name,c,g))){h=g;break}!1!==h?(f=!0,a(this).jqGrid("editCell",c,h,!0,d)):(f=!1,0<this.p.savedRow.length&&a(this).jqGrid("saveCell",c,e))}});return f},prevCell:function(c,e,d){var f;this.each(function(){var h=!1,g;if(!this.grid||!0!==this.p.cellEdit)return!1;for(g=e-1;0<=g;g--)if(!0===this.p.colModel[g].editable&&(!a.jgrid.isFunction(this.p.isCellEditable)||
this.p.isCellEditable.call(this,this.p.colModel[g].name,c,g))){h=g;break}!1!==h?(f=!0,a(this).jqGrid("editCell",c,h,!0,d)):(f=!1,0<this.p.savedRow.length&&a(this).jqGrid("saveCell",c,e))});return f},GridNav:function(){return this.each(function(){function c(b,k,l){if("v"===l.slice(0,1)){var m=a(d.grid.bDiv)[0].clientHeight,q=a(d.grid.bDiv)[0].scrollTop,r=d.rows[b].offsetTop+d.rows[b].clientHeight,p=d.rows[b].offsetTop;"vd"===l&&r>=m&&(a(d.grid.bDiv)[0].scrollTop=a(d.grid.bDiv)[0].scrollTop+d.rows[b].clientHeight);
"vu"===l&&p<q&&(a(d.grid.bDiv)[0].scrollTop=a(d.grid.bDiv)[0].scrollTop-d.rows[b].clientHeight)}"h"===l&&(l=a(d.grid.bDiv)[0].clientWidth,m=a(d.grid.bDiv)[0].scrollLeft,q=d.rows[b].cells[k].offsetLeft,d.rows[b].cells[k].offsetLeft+d.rows[b].cells[k].clientWidth>=l+parseInt(m,10)?a(d.grid.bDiv)[0].scrollLeft=a(d.grid.bDiv)[0].scrollLeft+d.rows[b].cells[k].clientWidth:q<m&&(a(d.grid.bDiv)[0].scrollLeft=a(d.grid.bDiv)[0].scrollLeft-d.rows[b].cells[k].clientWidth))}function e(b,k){var l;if("lft"===k){var m=
b+1;for(l=b;0<=l;l--)if(!0!==d.p.colModel[l].hidden){m=l;break}}if("rgt"===k)for(m=b-1,l=b;l<d.p.colModel.length;l++)if(!0!==d.p.colModel[l].hidden){m=l;break}return m}var d=this;if(d.grid&&!0===d.p.cellEdit){d.p.knv=d.p.id+"_kn";var f=a("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+d.p.knv+"'></div></div>"),h,g;a(f).insertBefore(d.grid.cDiv);a("#"+d.p.knv).focus().keydown(function(b){g=b.keyCode;"rtl"===d.p.direction&&
(37===g?g=39:39===g&&(g=37));switch(g){case 38:0<d.p.iRow-1&&(c(d.p.iRow-1,d.p.iCol,"vu"),a(d).jqGrid("editCell",d.p.iRow-1,d.p.iCol,!1,b));break;case 40:d.p.iRow+1<=d.rows.length-1&&(c(d.p.iRow+1,d.p.iCol,"vd"),a(d).jqGrid("editCell",d.p.iRow+1,d.p.iCol,!1,b));break;case 37:0<=d.p.iCol-1&&(h=e(d.p.iCol-1,"lft"),c(d.p.iRow,h,"h"),a(d).jqGrid("editCell",d.p.iRow,h,!1,b));break;case 39:d.p.iCol+1<=d.p.colModel.length-1&&(h=e(d.p.iCol+1,"rgt"),c(d.p.iRow,h,"h"),a(d).jqGrid("editCell",d.p.iRow,h,!1,b));
break;case 13:0<=parseInt(d.p.iCol,10)&&0<=parseInt(d.p.iRow,10)&&(b.preventDefault(),a(d).jqGrid("editCell",d.p.iRow,d.p.iCol,!0,b));break;default:return!0}return!1})}})},getChangedCells:function(c){var e=[];c||="all";this.each(function(){var d=this,f;d.grid&&!0===d.p.cellEdit&&a(d.rows).each(function(h){var g={};a(this).hasClass("edited")&&(a("td",this).each(function(b){f=d.p.colModel[b].name;if("cb"!==f&&"subgrid"!==f&&"sc"!==f)if("dirty"===c){if(a(this).hasClass("dirty-cell"))try{g[f]=a.unformat.call(d,
this,{rowId:d.rows[h].id,colModel:d.p.colModel[b]},b)}catch(k){g[f]=a.jgrid.htmlDecode(a(this).html())}}else try{g[f]=a.unformat.call(d,this,{rowId:d.rows[h].id,colModel:d.p.colModel[b]},b)}catch(k){g[f]=a.jgrid.htmlDecode(a(this).html())}}),g.id=this.id,e.push(g))})});return e}});a.extend(a.jgrid,{showModal:function(c){c.w.show()},closeModal:function(c){c.w.hide().attr("aria-hidden","true");c.o&&c.o.remove()},hideModal:function(c,e){e=a.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},e||
{});var d=e.gb&&"string"===typeof e.gb&&"#gbox_"===e.gb.slice(0,6)?a("#"+e.gb.slice(6))[0]:!1;if(e.onClose){var f=d?e.onClose.call(d,c):e.onClose(c);if("boolean"===typeof f&&!f)return}if(e.formprop&&d&&e.form){if("edit"===e.form){var h="#"+a.jgrid.jqID("FrmGrid_"+e.gb.slice(6));var g="formProp"}else"view"===e.form&&(h="#"+a.jgrid.jqID("ViewGrid_"+e.gb.slice(6)),g="viewProp");a(d).data(g,{top:a.jgrid.floatNum(a(c).css("top")),left:a.jgrid.floatNum(a(c).css("left")),width:a.jgrid.floatNum(a(c)[0].style.width),
height:a.jgrid.floatNum(a(c)[0].style.height),dataheight:a(h).height(),datawidth:a(h).width()})}if(a.fn.jqm&&!0===e.jqm)a(c).attr("aria-hidden","true").jqmHide();else{if(""!==e.gb)try{a(e.gb).find(".jqgrid-overlay").first().hide()}catch(b){}try{a(".jqgrid-overlay-modal").hide()}catch(b){}a(c).hide().attr("aria-hidden","true")}e.removemodal&&a(c).remove()},findPos:function(c){c=a(c).offset();return[c.left,c.top]},createModal:function(c,e,d,f,h,g,b){d=a.extend(!0,{},a.jgrid.jqModal||{},d);var k=this,
l="rtl"===a(d.gbox).attr("dir")?!0:!1,m=a.jgrid.styleUI[d.styleUI||"jQueryUI"].modal,q=a.jgrid.styleUI[d.styleUI||"jQueryUI"].common,r=document.createElement("div");b=a.extend({},b||{});r.className="ui-jqdialog "+m.modal;r.id=c.themodal;var p=document.createElement("div");p.className="ui-jqdialog-titlebar "+m.header;p.id=c.modalhead;a(p).append("<span class='ui-jqdialog-title "+m.title+"'>"+d.caption+"</span>");var v=a("<a class='ui-jqdialog-titlebar-close "+q.cornerall+"' aria-label='Close'></a>").hover(function(){v.addClass(q.hover)},
function(){v.removeClass(q.hover)}).append("<span class='"+q.icon_base+" "+m.icon_close+"'></span>");a(p).append(v);l?(r.dir="rtl",a(".ui-jqdialog-title",p).css("float","right"),a(".ui-jqdialog-titlebar-close",p).css("left","0.3em")):(r.dir="ltr",a(".ui-jqdialog-title",p).css("float","left"),a(".ui-jqdialog-titlebar-close",p).css("right","0.3em"));var t=document.createElement("div");a(t).addClass("ui-jqdialog-content "+m.content).attr("id",c.modalcontent);a(t).append(e);r.appendChild(t);a(r).prepend(p);
!0===g?a("body").append(r):"string"===typeof g?a(g).append(r):a(r).insertBefore(f);a(r).css(b);void 0===d.jqModal&&(d.jqModal=!0);e={};if(a.fn.jqm&&!0===d.jqModal)0===d.left&&0===d.top&&d.overlay&&(b=[],b=a.jgrid.findPos(h),d.left=b[0]+4,d.top=b[1]+4,l&&!g&&(d.left=a(d.gbox).outerWidth()-(isNaN(d.width)?300:parseInt(d.width,10)))),e.top=d.top+"px",e.left=d.left+"px";else if(0!==d.left||0!==d.top)e.left=d.left+"px",e.top=d.top+"px";a("a.ui-jqdialog-titlebar-close",p).click(function(){var u=a("#"+a.jgrid.jqID(c.themodal)).data("onClose")||
d.onClose,n=a("#"+a.jgrid.jqID(c.themodal)).data("gbox")||d.gbox;k.hideModal("#"+a.jgrid.jqID(c.themodal),{gb:n,jqm:d.jqModal,onClose:u,removemodal:d.removemodal||!1,formprop:!d.recreateForm||!1,form:d.form||""});return!1});0!==d.width&&d.width||(d.width=300);0!==d.height&&d.height||(d.height=200);d.zIndex||(f=a(f).parents("*[role=dialog]").first().css("z-index"),d.zIndex=f?parseInt(f,10)+2:950);a(r).css(a.extend({width:isNaN(d.width)?"auto":d.width+"px",height:isNaN(d.height)?"auto":d.height+"px",
zIndex:d.zIndex,overflow:"hidden"},e)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":c.modalhead,"aria-hidden":"true"});void 0===d.drag&&(d.drag=!0);void 0===d.resize&&(d.resize=!0);if(d.drag)if(a(p).css("cursor","move"),a.fn.tinyDraggable)a(r).tinyDraggable({handle:"#"+a.jgrid.jqID(p.id)});else try{a(r).draggable({handle:a("#"+a.jgrid.jqID(p.id))})}catch(u){}if(d.resize)if(a.fn.jqResize)a(r).append("<div class='jqResize "+m.resizable+" "+q.icon_base+" "+m.icon_resizable+"'></div>"),a("#"+a.jgrid.jqID(c.themodal)).jqResize(".jqResize",
c.scrollelm?"#"+a.jgrid.jqID(c.scrollelm):!1);else try{a(r).resizable({handles:"se, sw",alsoResize:c.scrollelm?"#"+a.jgrid.jqID(c.scrollelm):!1})}catch(u){}!0===d.closeOnEscape&&a(r).keydown(function(u){27===u.which&&(u=a("#"+a.jgrid.jqID(c.themodal)).data("onClose")||d.onClose,k.hideModal("#"+a.jgrid.jqID(c.themodal),{gb:d.gbox,jqm:d.jqModal,onClose:u,removemodal:d.removemodal||!1,formprop:!d.recreateForm||!1,form:d.form||""}))})},viewModal:function(c,e){e=a.extend({toTop:!0,overlay:10,modal:!1,
overlayClass:"ui-widget-overlay",onShow:a.jgrid.showModal,onHide:a.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},e||{});var d="";if(e.gbox){var f=a("#"+e.gbox.substring(6))[0];try{d=a(f).jqGrid("getStyleUI",f.p.styleUI+".common","overlay",!1,"jqgrid-overlay-modal"),e.overlayClass=a(f).jqGrid("getStyleUI",f.p.styleUI+".common","overlay",!0)}catch(h){}}void 0===e.focusField&&(e.focusField=0);e.focusField="number"===typeof e.focusField&&0<=e.focusField?parseInt(e.focusField,10):"boolean"!==typeof e.focusField||
e.focusField?0:!1;if(a.fn.jqm&&!0===e.jqm)e.jqM?a(c).attr("aria-hidden","false").jqm(e).jqmShow():a(c).attr("aria-hidden","false").jqmShow();else if(""!==e.gbox&&(f=parseInt(a(c).css("z-index"))-1,e.modal?(a(".jqgrid-overlay-modal")[0]||a("body").prepend("<div "+d+"></div>"),a(".jqgrid-overlay-modal").css("z-index",f).show()):(a(e.gbox).find(".jqgrid-overlay").first().css("z-index",f).show(),a(c).data("gbox",e.gbox))),a(c).show().attr("aria-hidden","false"),0<=e.focusField)try{a(":input:visible",
c)[e.focusField].focus()}catch(h){}},info_dialog:function(c,e,d,f){var h={width:350,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:window.innerWidth/2-145,top:window.innerHeight/2-150,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[],overlay:10,overlayClass:"",autoClose:!1,autoCloseTime:3500,position:""};a.extend(!0,h,a.jgrid.jqModal||{},{caption:"<b>"+c+"</b>"},f||{});var g=h.jqModal,b=this,k=a.jgrid.styleUI[h.styleUI||a.jgrid.defaults.styleUI||
"jQueryUI"].modal,l=a.jgrid.styleUI[h.styleUI||a.jgrid.defaults.styleUI||"jQueryUI"].common;h.overlayClass||(h.overlayClass=l.overlay);a.fn.jqm&&!g&&(g=!1);c="";if(0<h.buttons.length)for(f=0;f<h.buttons.length;f++)void 0===h.buttons[f].id&&(h.buttons[f].id="info_button_"+f),c+="<a id='"+h.buttons[f].id+"' class='fm-button "+l.button+"'>"+h.buttons[f].text+"</a>";f=isNaN(h.dataheight)?h.dataheight:h.dataheight+"px";e="<div id='info_id'><div id='infocnt' class='info_content "+(k.body+"'>"+e+"</div>");
e+=d?"<div class='info_footer "+k.footer+"'><a id='closedialog' class='fm-button "+l.button+"'>"+d+"</a>"+c+"</div>":""!==c?"<div class='info_footer "+k.footer+"'>"+c+"</div>":"";e+="</div>";try{"false"===a("#info_dialog").attr("aria-hidden")&&a.jgrid.hideModal("#info_dialog",{jqm:g}),a("#info_dialog").remove()}catch(m){}d=a(".ui-jqgrid").css("font-size")||"11px";a.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},e,h,"","",!0,{"font-size":d});
if(h.position){d=h.position.split(" ");switch(d[0].toLowerCase()+" "+d[1].toLowerCase()){case "top left":d="top-0 start-0";break;case "top center":d="top-0 start-50 translate-middle-x";break;case "top right":d="top-0 end-0";break;case "middle left":d="top-50 start-0 translate-middle-y";break;case "middle center":d="top-50 start-50 translate-middle";break;case "middle right":d="top-50 end-0 translate-middle-y";break;case "bottom left":d="bottom-0 start-0";break;case "bottom center":d="bottom-0 start-50 translate-middle-x";
break;case "bottom right":d="bottom-0 end-0";break;default:d="top-50 start-50 translate-middle"}a("#info_dialog").addClass(d).css({top:"",left:"",width:"auto","max-width":"500px"})}a(".info_content","#info_id").height(f);c&&a.each(h.buttons,function(m){a("#"+a.jgrid.jqID(this.id),"#info_id").on("click",function(){h.buttons[m].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").on("click",function(){b.hideModal("#info_dialog",{jqm:g,onClose:a("#info_dialog").data("onClose")||
h.onClose,gb:a("#info_dialog").data("gbox")||h.gbox});return!1});h.autoClose&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#info_head").trigger("click")},h.autoCloseTime);a(".fm-button","#info_dialog").hover(function(){a(this).addClass(l.hover)},function(){a(this).removeClass(l.hover)});a.jgrid.isFunction(h.beforeOpen)&&h.beforeOpen();h.type&&"default"!==h.type&&a("#info_dialog").addClass("toast-"+h.type);a.jgrid.viewModal("#info_dialog",{onHide:function(m){a.jgrid.closeModal(m);m.w.remove()},
modal:h.modal,jqm:g,overlay:h.overlay,overlayClass:h.overlayClass});a.jgrid.isFunction(h.afterOpen)&&h.afterOpen();try{a("#info_dialog").focus()}catch(m){}},toast:function(c){var e={caption:"",text:"",close_icon:!0,type:"default",close_button:"",autoClose:!0,autoCloseTime:2E3,drag:!1,position:"middle center",jqModal:!1,duration:600,removemodal:!0};a.extend(!0,e,a.jgrid.jqModal||{},{caption:e.caption},c||{});e.text&&(a.jgrid.info_dialog(e.header,e.text,e.close_button,e),e.caption||(a(".ui-jqdialog-titlebar",
"#info_dialog").hide(),e.close_icon&&(c=a(".ui-jqdialog-titlebar-close","#info_dialog").clone(!0),a(c).insertAfter(a("#infocnt")),a("#info_id").css({"padding-right":"35px","padding-left":"20px"}))))},bindEv:function(c,e){a.jgrid.isFunction(e.dataInit)&&e.dataInit.call(this,c,e);e.dataEvents&&a.each(e.dataEvents,function(){var d=this.fn;if(void 0!==this.data)a(c).on(this.type,this.data,function(f){d.call(this,f,e)});else a(c).on(this.type,function(f){d.call(this,f,e)})})},createEl:function(c,e,d,f,
h){function g(v,t,u){var n="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr custom_element custom_value oper".split(" ");n=n.concat(["cacheUrlData","delimiter","separator"]);void 0!==u&&Array.isArray(u)&&a.merge(n,u);a.each(t,function(x,w){-1===a.inArray(x,n)&&a(v).attr(x,w)});t.hasOwnProperty("id")||a(v).attr("id",a.jgrid.randId())}var b="",k=this;switch(c){case "textarea":b=document.createElement("textarea");f?e.cols||a(b).css({width:"98%"}):e.cols||(e.cols=20);e.rows||
(e.rows=2);if("&nbsp;"===d||"&#160;"===d||1===d.length&&160===d.charCodeAt(0))d="";b.value=d;a(b).attr({role:"textbox",multiline:"true"});g(b,e);break;case "checkbox":b=document.createElement("input");b.type="checkbox";if(e.value){var l=e.value.split(":");d===l[0]&&(b.checked=!0,b.defaultChecked=!0);b.value=l[0];a(b).attr("offval",l[1])}else l=(d+"").toLowerCase(),0>l.search(/(false|f|0|no|n|off|undefined)/i)&&""!==l?(b.checked=!0,b.defaultChecked=!0,b.value=d):b.value="on",a(b).attr("offval","off");
a(b).attr("role","checkbox");g(b,e,["value"]);break;case "select":b=document.createElement("select");b.setAttribute("role","listbox");f=[];!0===e.multiple?(c=!0,b.multiple="multiple",a(b).attr("aria-multiselectable","true")):c=!1;if(null!=e.dataUrl){l=null;var m=e.postData||h.postData;try{l=e.rowId}catch(v){}k.p&&k.p.idPrefix&&(l=a.jgrid.stripPref(k.p.idPrefix,l));a.ajax(a.extend({url:a.jgrid.isFunction(e.dataUrl)?e.dataUrl.call(k,l,d,String(e.name)):e.dataUrl,type:"GET",dataType:"html",data:a.jgrid.isFunction(m)?
m.call(k,l,d,String(e.name)):m,context:{elem:b,options:e,vl:d},success:function(v){var t=[],u=this.elem,n=this.vl,x=a.extend({},this.options),w=!0===x.multiple,A=!0===x.cacheUrlData,H="",F,B=[];v=a.jgrid.isFunction(x.buildSelect)?x.buildSelect.call(k,v):v;"string"===typeof v&&(v=a(a.jgrid.trim(v)).html());if(v){a(u).append(v);g(u,x,m?["postData"]:void 0);void 0===x.size&&(x.size=w?3:1);w?(t=n.split(void 0===x.multiseparator?",":x.multiseparator),t=a.map(t,function(R){return a.jgrid.trim(R)})):t[0]=
a.jgrid.trim(n);a("option",u).each(function(R){F=a(this).text();n=a(this).val();A&&(H+=(0!==R?";":"")+n+":"+F);0===R&&u.multiple&&(this.selected=!1);a(this).attr("role","option");if(-1<a.inArray(a.jgrid.trim(F),t)||-1<a.inArray(a.jgrid.trim(n),t))this.selected="selected",B.push(n)});x.hasOwnProperty("checkUpdate")&&x.checkUpdate&&(k.p.savedData[x.name]=B.join(","));if(A)if("edit"===x.oper)a(k).jqGrid("setColProp",x.name,{editoptions:{buildSelect:null,dataUrl:null,value:H}});else if("search"===x.oper)a(k).jqGrid("setColProp",
x.name,{searchoptions:{dataUrl:null,value:H}});else if("filter"===x.oper&&a("#fbox_"+k.p.id)[0].p){w=a("#fbox_"+k.p.id)[0].p.columns;var E;a.each(w,function(R){E=this.index||this.name;if(x.name===E)return this.searchoptions.dataUrl=null,this.searchoptions.value=H,!1})}a(k).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[u])}}},h||{}))}else if(e.value){void 0===e.size&&(e.size=c?3:1);c&&(f=d.split(","),f=a.map(f,function(v){return a.jgrid.trim(v)}));"function"===typeof e.value&&(e.value=e.value.call(k,
d,e));var q=void 0===e.separator?":":e.separator;h=void 0===e.delimiter?";":e.delimiter;if("string"===typeof e.value)for(l=e.value.split(h),h=0;h<l.length;h++){var r=l[h].split(q);2<r.length&&(r[1]=a.map(r,function(v,t){if(0<t)return v}).join(q));var p=document.createElement("option");p.setAttribute("role","option");p.value=r[0];p.innerHTML=r[1];0==r[1].length&&p.setAttribute("aria-label","none");b.appendChild(p);c||a.jgrid.trim(r[0])!==a.jgrid.trim(d)&&a.jgrid.trim(r[1])!==a.jgrid.trim(d)||(p.selected=
"selected");c&&(-1<a.inArray(a.jgrid.trim(r[1]),f)||-1<a.inArray(a.jgrid.trim(r[0]),f))&&(p.selected="selected")}else if("[object Array]"===Object.prototype.toString.call(e.value))for(q=e.value,h=0;h<q.length;h++)2===q[h].length&&(l=q[h][0],r=q[h][1],p=document.createElement("option"),p.setAttribute("role","option"),p.value=l,p.innerHTML=r,0==r.length&&p.setAttribute("aria-label","none"),b.appendChild(p),c||a.jgrid.trim(l)!==a.jgrid.trim(d)&&a.jgrid.trim(r)!==a.jgrid.trim(d)||(p.selected="selected"),
c&&(-1<a.inArray(a.jgrid.trim(r),f)||-1<a.inArray(a.jgrid.trim(l),f))&&(p.selected="selected"));else if("object"===typeof e.value)for(l in q=e.value,q)q.hasOwnProperty(l)&&(p=document.createElement("option"),p.setAttribute("role","option"),p.value=l,p.innerHTML=q[l],0==q[l].length&&p.setAttribute("aria-label","none"),b.appendChild(p),c||a.jgrid.trim(l)!==a.jgrid.trim(d)&&a.jgrid.trim(q[l])!==a.jgrid.trim(d)||(p.selected="selected"),c&&(-1<a.inArray(a.jgrid.trim(q[l]),f)||-1<a.inArray(a.jgrid.trim(l),
f))&&(p.selected="selected"));g(b,e,["value"])}else g(b,e);break;case "image":case "file":b=document.createElement("input");b.type=c;g(b,e);break;case "custom":b=document.createElement("span");try{if(a.jgrid.isFunction(e.custom_element))if(p=e.custom_element.call(k,d,e))p=a(p).addClass("customelement").attr({id:e.id,name:e.name}),a(b).empty().append(p);else throw"e2";else throw"e1";}catch(v){e=a.jgrid.getRegional(k,"errors"),d=a.jgrid.getRegional(k,"edit"),"e1"===v?a.jgrid.info_dialog(e.errcap,"function 'custom_element' "+
d.msg.nodefined,d.bClose,{styleUI:k.p.styleUI}):"e2"===v?a.jgrid.info_dialog(e.errcap,"function 'custom_element' "+d.msg.novalue,d.bClose,{styleUI:k.p.styleUI}):a.jgrid.info_dialog(e.errcap,"string"===typeof v?v:v.message,d.bClose,{styleUI:k.p.styleUI})}break;default:l="button"===c?"button":"textbox",b=document.createElement("input"),b.type=c,b.value=d,"button"!==c&&(f?e.size||a(b).css({width:"96%"}):e.size||(e.size=20)),a(b).attr("role",l),g(b,e)}return b},checkDate:function(c,e){var d={};c=c.toLowerCase();
var f=-1!==c.indexOf("/")?"/":-1!==c.indexOf("-")?"-":-1!==c.indexOf(".")?".":"/";c=c.split(f);e=e.split(f);if(3!==e.length)return!1;var h=-1,g=f=-1,b;for(b=0;b<c.length;b++){var k=isNaN(e[b])?0:parseInt(e[b],10);d[c[b]]=k;k=c[b];-1!==k.indexOf("y")&&(h=b);-1!==k.indexOf("m")&&(g=b);-1!==k.indexOf("d")&&(f=b)}k="y"===c[h]||"yyyy"===c[h]?4:"yy"===c[h]?2:-1;b=[0,31,29,31,30,31,30,31,31,30,31,30,31];if(-1===h)return!1;var l=d[c[h]].toString();2===k&&1===l.length&&(k=1);if(l.length!==k||0===d[c[h]]&&
"00"!==e[h]||-1===g)return!1;l=d[c[g]].toString();if(1>l.length||1>d[c[g]]||12<d[c[g]]||-1===f)return!1;l=d[c[f]].toString();!(e=1>l.length||1>d[c[f]]||31<d[c[f]])&&(e=2===d[c[g]])&&(h=d[c[h]],e=d[c[f]]>(0!==h%4||0===h%100&&0!==h%400?28:29));return e||d[c[f]]>b[d[c[g]]]?!1:!0},isEmpty:function(c){return void 0===c||c.match(/^\s+$/)||""===c?!0:!1},checkTime:function(c){var e=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!a.jgrid.isEmpty(c))if(c=c.match(e)){if(c[3]){if(1>c[1]||12<c[1])return!1}else if(23<c[1])return!1;
if(59<c[2])return!1}else return!1;return!0},checkValues:function(c,e,d,f){var h=this.p.colModel;var g=a.jgrid.getRegional(this,"edit.msg");var b=function(m){m=m.toString();if(2<=m.length){var q;if("-"===m[0]){var r=m[1];m[2]&&(q=m[2])}else r=m[0],m[1]&&(q=m[1]);if("0"===r&&"."!==q)return!1}return"number"===typeof Number(m)&&isFinite(m)};if(void 0===d)if("string"===typeof e)for(d=0,f=h.length;d<f;d++){if(h[d].name===e){var k=h[d].editrules;e=d;if(null!=h[d].formoptions)var l=h[d].formoptions.label;
break}}else 0<=e&&(k=h[e].editrules);else k=d,l=void 0===f?"_":f;if(k){l||=null!=this.p.colNames?this.p.colNames[e]:h[e].label;if(!0===k.required&&a.jgrid.isEmpty(c))return[!1,l+": "+g.required,""];d=!1===k.required?!1:!0;if(!0===k.number&&!(!1===d&&a.jgrid.isEmpty(c)||b(c)))return[!1,l+": "+g.number,""];if(void 0!==k.minValue&&!isNaN(k.minValue)&&a.jgrid.floatNum(c)<a.jgrid.floatNum(k.minValue))return[!1,l+": "+g.minValue+" "+k.minValue,""];if(void 0!==k.maxValue&&!isNaN(k.maxValue)&&a.jgrid.floatNum(c)>
a.jgrid.floatNum(k.maxValue))return[!1,l+": "+g.maxValue+" "+k.maxValue,""];if(!(!0!==k.email||!1===d&&a.jgrid.isEmpty(c)||(f=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
f.test(c))))return[!1,l+": "+g.email,""];if(!(!0!==k.integer||!1===d&&a.jgrid.isEmpty(c)||b(c)&&0===c%1&&-1===c.indexOf(".")))return[!1,l+": "+g.integer,""];if(!(!0!==k.date||!1===d&&a.jgrid.isEmpty(c)||(h[e].formatoptions&&h[e].formatoptions.newformat?(h=h[e].formatoptions.newformat,(b=a.jgrid.getRegional(this,"formatter.date.masks"))&&b.hasOwnProperty(h)&&(h=b[h])):h=h[e].datefmt||"Y-m-d",a.jgrid.checkDate(h,c))))return[!1,l+": "+g.date+" - "+h,""];if(!0===k.time&&!(!1===d&&a.jgrid.isEmpty(c)||
a.jgrid.checkTime(c)))return[!1,l+": "+g.date+" - hh:mm (am/pm)",""];if(!(!0!==k.url||!1===d&&a.jgrid.isEmpty(c)||(f=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,f.test(c))))return[!1,l+": "+g.url,""];if(!0===k.custom&&(!1!==d||!a.jgrid.isEmpty(c)))return a.jgrid.isFunction(k.custom_func)?(c=k.custom_func.call(this,c,l,e),Array.isArray(c)?c:[!1,g.customarray,""]):[!1,g.customfcheck,""]}return[!0,"",""]},validateForm:function(c){var e,
d=!0;for(e=0;e<c.elements.length;e++){var f=c.elements[e];if("INPUT"===f.nodeName||"TEXTAREA"===f.nodeName||"SELECT"===f.nodeName)if("undefined"!==typeof f.willValidate?("INPUT"===f.nodeName&&f.type!==f.getAttribute("type")&&f.setCustomValidity(a.jgrid.LegacyValidation(f)?"":"error"),f.reportValidity()):(f.validity=f.validity||{},f.validity.valid=a.jgrid.LegacyValidation(f)),!f.validity.valid){d=!1;break}}return d},LegacyValidation:function(c){var e=!0,d=c.value,f=c.getAttribute("type");f="checkbox"===
f||"radio"===f;var h=c.getAttribute("required"),g=c.getAttribute("minlength"),b=c.getAttribute("maxlength"),k=c.getAttribute("pattern");if(c.disabled)return e;(e=(e=e&&(!h||f&&c.checked||!f&&""!==d))&&(f||(!g||d.length>=g)&&(!b||d.length<=b)))&&k&&(k=new RegExp(k),e=k.test(d));return e},buildButtons:function(c,e,d){var f,h;a.each(c,function(g,b){b.id||(b.id=a.jgrid.randId());b.position||(b.position="last");b.side||(b.side="left");f=b.icon?" fm-button-icon-"+b.side+"'><span class='"+d.icon_base+" "+
b.icon+"'></span>":"'>";h="<a  data-index='"+g+"' id='"+b.id+"' class='fm-button "+d.button+f+b.text+"</a>";e="last"===b.position?e+h:h+e});return e},setSelNavIndex:function(c,e){var d=a(".ui-pg-button",c.p.pager);a.each(d,function(f,h){if(e===h)return c.p.navIndex=f,!1});a(e).attr("tabindex","0")},getFirstVisibleCol:function(c){for(var e=-1,d=0;d<c.p.colModel.length;d++)if(!0!==c.p.colModel[d].hidden){e=d;break}return e},getLastVisibleCol:function(c){for(var e=-1,d=c.p.colModel.length-1;0<=d;d--)if(!0!==
c.p.colModel[d].hidden){e=d;break}return e},postForm:function(c,e,d){d=d||"post";var f=document.createElement("form");f.setAttribute("method",d);f.setAttribute("action",c);for(var h in e)e.hasOwnProperty(h)&&(c=document.createElement("input"),c.setAttribute("type","hidden"),c.setAttribute("name",h),c.setAttribute("value",e[h]),f.appendChild(c));document.body.appendChild(f);f.submit();f.parentNode.removeChild(f)}});a.fn.jqFilter=function(c){if("string"===typeof c){var e=a.fn.jqFilter[c];if(!e)throw"jqFilter - No such method: "+
c;var d=a.makeArray(arguments).slice(1);return e.apply(this,d)}var f=a.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,uniqueSearchFields:!1,direction:"ltr",
addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule",autoencode:!1,unaryOperations:[]},a.jgrid.filter,c||{});return this.each(function(){if(!this.filter){this.p=f;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]};null!=this.p.sortStrategy&&a.jgrid.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy);var h,g=this.p.columns.length,b=/msie/i.test(navigator.userAgent)&&!window.opera;
this.p.initFilter=a.extend(!0,{},this.p.filter);if(g){for(h=0;h<g;h++){var k=this.p.columns[h];k.stype?k.inputtype=k.stype:k.inputtype||(k.inputtype="text");k.sorttype?k.searchtype=k.sorttype:k.searchtype||(k.searchtype="string");void 0===k.hidden&&(k.hidden=!1);k.label||(k.label=k.name);k.index&&(k.name=k.index);k.hasOwnProperty("searchoptions")||(k.searchoptions={});k.hasOwnProperty("searchrules")||(k.searchrules={});k.inlist=void 0===k.search?!0:k.search}var l=function(){return a("#"+a.jgrid.jqID(f.id))[0]||
null};h=l();var m=a.jgrid.styleUI[h.p.styleUI||"jQueryUI"].filter,q=a.jgrid.styleUI[h.p.styleUI||"jQueryUI"].common;this.p.showQuery&&a(this).append("<table class='queryresult "+m.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var r=function(p,v){var t=[!0,""],u=l();if(a.jgrid.isFunction(v.searchrules))t=v.searchrules.call(u,p,v);else if(a.jgrid&&a.jgrid.checkValues)try{t=a.jgrid.checkValues.call(u,
p,-1,v.searchrules,v.label)}catch(n){}t&&t.length&&!1===t[0]&&(f.error=!t[0],f.errmsg=t[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.jgrid.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a(this).find("table.group").first().remove();var p=this.createTableForGroup(f.filter,null);a(this).append(p);a.jgrid.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(p,v){var t=this,u,n=a("<table class='group "+
m.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),x="left";"rtl"===this.p.direction&&(x="right",n.attr("dir","rtl"));null===v&&n.append("<tr class='error' style='display:none;'><th colspan='5' class='"+q.error+"' align='"+x+"'></th></tr>");var w=a("<tr></tr>");n.append(w);x=a("<th colspan='5' align='"+x+"'></th>");w.append(x);if(!0===this.p.ruleButtons){var A=a("<select size='1' name='select_group_op' class='opsel "+m.srSelect+"'></select>");x.append(A);w="";for(u=
0;u<f.groupOps.length;u++){var H=p.groupOp===t.p.groupOps[u].op?" selected='selected'":"";w+="<option value='"+t.p.groupOps[u].op+"'"+H+">"+t.p.groupOps[u].text+"</option>"}A.append(w).on("change",function(){p.groupOp=a(A).val();t.onchange()})}w="<span></span>";this.p.groupButton&&(w=a("<input type='button' value='+ {}' title='"+t.p.addsubgrup+"' class='add-group "+q.button+"' name='newsubgroup'/>"),w.on("click",function(){void 0===p.groups&&(p.groups=[]);p.groups.push({groupOp:f.groupOps[0].op,rules:[],
groups:[]});t.reDraw();t.onchange();return!1}));x.append(w);if(!0===this.p.ruleButtons){w=a("<input type='button' value='+' title='"+t.p.addrule+"' class='add-rule ui-add "+q.button+"'/ name='newrule'>");var F;w.on("click",function(){void 0===p.rules&&(p.rules=[]);for(u=0;u<t.p.columns.length;u++){var B=void 0===t.p.columns[u].search?!0:t.p.columns[u].search,E=!0===t.p.columns[u].hidden;if(!0===t.p.columns[u].searchoptions.searchhidden&&B||B&&!E){F=t.p.columns[u];break}}if(!F)return!1;B=F.searchoptions.sopt?
F.searchoptions.sopt:t.p.sopt?t.p.sopt:-1!==a.inArray(F.searchtype,t.p.strarr)?t.p.stropts:t.p.numopts;p.rules.push({field:F.name,op:B[0],data:""});t.reDraw();return!1});x.append(w)}null!==v&&(w=a("<input type='button' value='-' title='"+t.p.delgroup+"' class='delete-group "+q.button+"'/ name='delgroup'>"),x.append(w),w.on("click",function(){for(u=0;u<v.groups.length;u++)if(v.groups[u]===p){v.groups.splice(u,1);break}t.reDraw();t.onchange();return!1}));if(void 0!==p.groups)for(u=0;u<p.groups.length;u++)x=
a("<tr></tr>"),n.append(x),w=a("<td class='first'></td>"),x.append(w),w=a("<td colspan='4'></td>"),w.append(this.createTableForGroup(p.groups[u],p)),x.append(w);void 0===p.groupOp&&(p.groupOp=t.p.groupOps[0].op);if(x=t.p.ruleButtons&&t.p.uniqueSearchFields)for(w=0;w<t.p.columns.length;w++)t.p.columns[w].inlist&&(t.p.columns[w].search=!0);if(void 0!==p.rules)for(u=0;u<p.rules.length;u++)if(n.append(this.createTableRowForRule(p.rules[u],p)),x)for(H=p.rules[u].field,w=0;w<t.p.columns.length;w++)if(H===
t.p.columns[w].name){t.p.columns[w].search=!1;break}return n};this.createTableRowForRule=function(p,v){var t=this,u=l(),n=a("<tr></tr>"),x,w,A="";n.append("<td class='first'></td>");var H=a("<td class='columns'></td>");n.append(H);var F=a("<select size='1' name='select_field' class='"+m.srSelect+"'></select>"),B=[];H.append(F);F.on("change",function(){if(t.p.ruleButtons&&t.p.uniqueSearchFields){var K=parseInt(a(this).data("curr"),10),ba=this.selectedIndex;0<=K&&(t.p.columns[K].search=!0,a(this).data("curr",
ba),t.p.columns[ba].search=!1)}p.field=a(F).val();w=a(this).parents("tr").first();a(".data",w).empty();for(x=0;x<t.p.columns.length;x++)if(t.p.columns[x].name===p.field){z=t.p.columns[x];break}if(z){z.searchoptions.id=a.jgrid.randId();z.searchoptions.name=p.field;z.searchoptions.oper="filter";b&&"text"===z.inputtype&&!z.searchoptions.size&&(z.searchoptions.size=10);var T=a.jgrid.createEl.call(u,z.inputtype,z.searchoptions,"",!0,t.p.ajaxSelectOptions||{},!0);a(T).addClass("input-elm "+("select"===
z.inputtype?m.srSelect:m.srInput));U=z.searchoptions.sopt?z.searchoptions.sopt:t.p.sopt?t.p.sopt:-1!==a.inArray(z.searchtype,t.p.strarr)?t.p.stropts:t.p.numopts;K="";ba=0;B=[];a.each(t.p.ops,function(){B.push(this.oper)});for(x=0;x<U.length;x++)S=a.inArray(U[x],B),-1!==S&&(0===ba&&(p.op=t.p.ops[S].oper),K+="<option value='"+t.p.ops[S].oper+"'>"+t.p.ops[S].text+"</option>",ba++);a(".selectopts",w).empty().append(K);a(".selectopts",w)[0].selectedIndex=0;a.jgrid.msie()&&9>a.jgrid.msiever()&&(K=parseInt(a("select.selectopts",
w)[0].offsetWidth,10)+1,a(".selectopts",w).width(K),a(".selectopts",w).css("width","auto"));a(".data",w).append(T);a.jgrid.bindEv.call(u,T,z.searchoptions);a(".input-elm",w).on("change",function(W){W=W.target;"custom"===z.inputtype&&a.jgrid.isFunction(z.searchoptions.custom_value)?p.data=z.searchoptions.custom_value.call(u,a(".customelement",this),"get"):p.data=a(W).val();"select"===z.inputtype&&z.searchoptions.multiple&&(p.data=p.data.join(","));t.onchange()});setTimeout(function(){p.data=a(T).val();
if("nu"===p.op||"nn"===p.op||0<=a.inArray(p.op,t.p.unaryOperations))a(T).attr("readonly","true"),a(T).attr("disabled","true");"select"===z.inputtype&&z.searchoptions.multiple&&Array.isArray(p.data)&&(p.data=p.data.join(","));t.onchange()},0)}});for(x=H=0;x<t.p.columns.length;x++){var E=void 0===t.p.columns[x].search?!0:t.p.columns[x].search;var R=!0===t.p.columns[x].hidden;if(!0===t.p.columns[x].searchoptions.searchhidden&&E||E&&!R)E="",p.field===t.p.columns[x].name&&(E=" selected='selected'",H=x),
A+="<option value='"+t.p.columns[x].name+"'"+E+">"+t.p.columns[x].label+"</option>"}F.append(A);F.data("curr",H);A=a("<td class='operators'></td>");n.append(A);var z=f.columns[H];z.searchoptions.id=a.jgrid.randId();b&&"text"===z.inputtype&&!z.searchoptions.size&&(z.searchoptions.size=10);z.searchoptions.name=p.field;z.searchoptions.oper="filter";H=a.jgrid.createEl.call(u,z.inputtype,z.searchoptions,p.data,!0,t.p.ajaxSelectOptions||{},!0);if("nu"===p.op||"nn"===p.op||0<=a.inArray(p.op,t.p.unaryOperations))a(H).attr("readonly",
"true"),a(H).attr("disabled","true");var O=a("<select size='1' name='select_oper' class='selectopts "+m.srSelect+"'></select>");A.append(O);O.on("change",function(){p.op=a(O).val();w=a(this).parents("tr").first();var K=a(".input-elm",w)[0];"nu"===p.op||"nn"===p.op||0<=a.inArray(p.op,t.p.unaryOperations)?(p.data="","SELECT"!==K.tagName.toUpperCase()&&(K.value=""),K.setAttribute("readonly","true"),K.setAttribute("disabled","true")):("SELECT"===K.tagName.toUpperCase()&&(p.data=K.value),K.removeAttribute("readonly"),
K.removeAttribute("disabled"));t.onchange()});var U=z.searchoptions.sopt?z.searchoptions.sopt:t.p.sopt?t.p.sopt:-1!==a.inArray(z.searchtype,t.p.strarr)?t.p.stropts:t.p.numopts;A="";a.each(t.p.ops,function(){B.push(this.oper)});for(x=0;x<U.length;x++){var S=a.inArray(U[x],B);-1!==S&&(E=p.op===t.p.ops[S].oper?" selected='selected'":"",A+="<option value='"+t.p.ops[S].oper+"'"+E+">"+t.p.ops[S].text+"</option>")}O.append(A);A=a("<td class='data'></td>");n.append(A);A.append(H);a.jgrid.bindEv.call(u,H,
z.searchoptions);a(H).addClass("input-elm "+("select"===z.inputtype?m.srSelect:m.srInput)).on("change",function(){p.data="custom"===z.inputtype?z.searchoptions.custom_value.call(u,a(".customelement",this),"get"):a(this).val();t.onchange()});A=a("<td></td>");n.append(A);!0===this.p.ruleButtons&&(H=a("<input type='button' value='-' title='"+t.p.delrule+"' class='delete-rule ui-del "+q.button+"'/ name='delrule'>"),A.append(H),H.on("click",function(){for(x=0;x<v.rules.length;x++)if(v.rules[x]===p){v.rules.splice(x,
1);break}t.reDraw();t.onchange();return!1}));return n};this.getStringForGroup=function(p){var v="(",t;if(void 0!==p.groups)for(t=0;t<p.groups.length;t++){1<v.length&&(v+=" "+p.groupOp+" ");try{v+=this.getStringForGroup(p.groups[t])}catch(u){alert(u)}}if(void 0!==p.rules)try{for(t=0;t<p.rules.length;t++)1<v.length&&(v+=" "+p.groupOp+" "),v+=this.getStringForRule(p.rules[t])}catch(u){alert(u)}v+=")";return"()"===v?"":v};this.getStringForRule=function(p){var v="",t="",u;for(u=0;u<this.p.ops.length;u++)if(this.p.ops[u].oper===
p.op){v=this.p.operands.hasOwnProperty(p.op)?this.p.operands[p.op]:"";t=this.p.ops[u].oper;break}for(u=0;u<this.p.columns.length;u++)if(this.p.columns[u].name===p.field){var n=this.p.columns[u];break}if(void 0===n)return"";u=this.p.autoencode?a.jgrid.htmlEncode(p.data):p.data;if("bw"===t||"bn"===t)u+="%";if("ew"===t||"en"===t)u="%"+u;if("cn"===t||"nc"===t)u="%"+u+"%";if("in"===t||"ni"===t)u=" ("+u+")";f.errorcheck&&r(p.data,n);return-1!==a.inArray(n.searchtype,["int","integer","float","number","currency"])||
"nn"===t||"nu"===t||0<=a.inArray(p.op,this.p.unaryOperations)?p.field+" "+v+" "+u:p.field+" "+v+' "'+u+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th."+q.error,this).html("");a("tr.error",this).hide()};this.showError=function(){a("th."+q.error,this).html(a.jgrid.stripScript(this.p.errmsg));a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=
function(){function p(t){var u="(",n;if(void 0!==t.groups)for(n=0;n<t.groups.length;n++)1<u.length&&(u="OR"===t.groupOp?u+" || ":u+" && "),u+=p(t.groups[n]);if(void 0!==t.rules)for(n=0;n<t.rules.length;n++){1<u.length&&(u="OR"===t.groupOp?u+" || ":u+" && ");var x=void 0,w,A=t.rules[n];if(v.p.errorcheck){for(w=0;w<v.p.columns.length;w++)if(v.p.columns[w].name===A.field){x=v.p.columns[w];break}x&&r(A.data,x)}u+=A.op+"(item."+A.field+",'"+A.data+"')"}u+=")";return"()"===u?"":u}var v=this;return p(this.p.filter)};
this.reDraw();if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var c="";this.each(function(){c=this.toUserFriendlyString()});return c},filterData:function(){var c;this.each(function(){c=this.p.filter});return c},getParameter:function(c){var e=null;void 0!==c&&this.each(function(d,f){f.p.hasOwnProperty(c)&&(e=f.p[c])});return e?e:this[0].p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(c){"string"===
typeof c&&(c=a.jgrid.parse(c));this.each(function(){this.p.filter=c;this.reDraw();this.onchange()})}});a.extend(a.jgrid,{filterRefactor:function(c){var e={},d;try{if(e="string"===typeof c.ruleGroup?a.jgrid.parse(c.ruleGroup):c.ruleGroup,e.rules&&e.rules.length){var f=e.rules;for(d=0;d<f.length;d++){var h=f[d];var g=h.field;if(-1<a.inArray(g,c.ssfield)){var b=h.data.split(c.splitSelect);if(1<b.length){void 0===e.groups&&(e.groups=[]);var k={groupOp:c.groupOpSelect,groups:[],rules:[]};e.groups.push(k);
a.each(b,function(l){b[l]&&k.rules.push({data:b[l],op:h.op,field:h.field})});f.splice(d,1);d--}}}}}catch(l){}return e}});a.jgrid.extend({filterToolbar:function(c){var e=a.jgrid.getRegional(this[0],"search");c=a.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,url:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",errorcheck:!0,operands:{eq:"==",
ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."},disabledKeys:[9,16,17,18,19,20,33,34,35,36,37,38,39,40,30,45,112,113,114,115,116,117,118,119,120,121,122,123,144,145]},e,c||{});return this.each(function(){var d=this,f=[];if(!d.p.filterToolbar){a(d).data("filterToolbar")||a(d).data("filterToolbar",c);d.p.force_regional&&(c=a.extend(c,e));if(void 0!==d.p.customFilterDef)for(var h in d.p.customFilterDef)d.p.customFilterDef.hasOwnProperty(h)&&
!c.operands.hasOwnProperty(h)&&(c.odata.push({oper:h,text:d.p.customFilterDef[h].text}),c.operands[h]=d.p.customFilterDef[h].operand,!0===d.p.customFilterDef[h].unary&&f.push(h));var g=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].filter,b=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].common,k=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].base,l=function(u){"undefined"===typeof u&&(u=1);var n={},x=0,w,A,H={},F,B=!1,E=[],R=[],z=[],O=!1,U,S=[!0,"",""],K=!1;a.each(d.p.colModel,function(){A=this.index||this.name;U=
this.searchoptions||{};var Y=a("#gs_"+d.p.idPrefix+a.jgrid.jqID(this.name),d.grid.hDiv);void 0===Y[0]&&(Y=a("#gs_"+d.p.idPrefix+a.jgrid.jqID(this.name),d.grid.hDiv));F=c.searchOperators&&U.searchOperMenu?Y.parents("table.ui-search-table").find("td.ui-search-oper").children("a").attr("soper")||c.defaultSearch:U.sopt?U.sopt[0]:"select"===this.stype?"eq":c.defaultSearch;"custom"===this.stype&&a.jgrid.isFunction(U.custom_value)&&0<Y.length?(w=U.custom_value.call(d,Y,"get"),z.push(A)):w=Y.val();"select"===
this.stype&&U.multiple&&Array.isArray(w)?0<w.length?(B=!0,E.push(A),w=1===w.length?w[0]:w):w="":"bt"!==F&&"text"===this.stype&&!0===U.splitSearchWord&&R.push(A);if(this.searchrules&&c.errorcheck&&(a.jgrid.isFunction(this.searchrules)?S=this.searchrules.call(d,w,this):a.jgrid&&a.jgrid.checkValues&&(S=a.jgrid.checkValues.call(d,w,-1,this.searchrules,this.label||this.name)),S&&S.length&&!1===S[0]))return this.searchrules.hasOwnProperty("validationError")&&(K=this.searchrules.validationError),!1;"bt"===
F&&(O=!0);a.jgrid.isServiceCol(A);if(w||"nu"===F||"nn"===F||0<=a.inArray(F,f))n[A]=w,H[A]=F,x++;else try{delete d.p.postData[A]}catch(G){}});if(!1===S[0])a.jgrid.isFunction(K)?K.call(d,S[1]):(u=a.jgrid.getRegional(d,"errors"),a.jgrid.info_dialog(u.errcap,S[1],"",{styleUI:d.p.styleUI}));else{var ba=0<x?!0:!1;if(!0===c.stringResult||"local"===d.p.datatype||!0===c.searchOperators){var T='{"groupOp":"'+c.groupOp+'","rules":[',W=0;a.each(n,function(Y,G){0<W&&(T+=",");T+='{"field":"'+Y+'",';T+='"op":"'+
H[Y]+'",';T+='"data":"'+(G+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"}';W++});T+="]}";var qa,va;B&&(qa=a.jgrid.filterRefactor({ruleGroup:T,ssfield:E,splitSelect:c.splitSelect,groupOpSelect:c.groupOpSelect}));if(O&&(a.isPlainObject(qa)||(qa=a.jgrid.parse(T)),qa.rules&&qa.rules.length)){var ma=qa.rules;for(va=0;va<ma.length;va++){var xa=ma[va];if("bt"===xa.op){var ta=xa.data.split("...");if(1<ta.length){void 0===qa.groups&&(qa.groups=[]);var ua={groupOp:"AND",groups:[],rules:[]};qa.groups.push(ua);
a.each(ta,function(Y){ta[Y]&&ua.rules.push({data:ta[Y],op:0===Y?"ge":"le",field:xa.field})});ma.splice(va,1);va--}}}}R.length&&(qa=a.jgrid.filterRefactor({ruleGroup:T,ssfield:R,splitSelect:U.splitSearchSeparator||";",groupOpSelect:"OR"}));if(O||B||R.length)T=JSON.stringify(qa);!0===d.p.mergeSearch&&d.p.searchModules.hasOwnProperty("filterToolbar")&&!1!==d.p.searchModules.filterToolbar?(d.p.searchModules.filterToolbar=0<W?T:null,ba=!0,a.extend(d.p.postData,{filters:a.jgrid.splitSearch(d.p.searchModules)})):
a.extend(d.p.postData,{filters:T});a.each(["searchField","searchString","searchOper"],function(Y,G){d.p.postData.hasOwnProperty(G)&&delete d.p.postData[G]})}else a.extend(d.p.postData,n);if(c.url){var fa=d.p.url;a(d).jqGrid("setGridParam",{url:c.url})}qa="stop"===a(d).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!qa&&a.jgrid.isFunction(c.beforeSearch)&&(qa=c.beforeSearch.call(d));qa||a(d).jqGrid("setGridParam",{search:ba}).trigger("reloadGrid",[{page:u}]);fa&&a(d).jqGrid("setGridParam",{url:fa});
a(d).triggerHandler("jqGridToolbarAfterSearch");a.jgrid.isFunction(c.afterSearch)&&c.afterSearch.call(d)}},m=function(u,n,x){a("#sopt_menu").remove();n=parseInt(n,10);x=parseInt(x,10)+18;n='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+(a(".ui-jqgrid").css("font-size")||"11px")+";left:"+n+"px;top:"+x+'px;">';x=a(u).attr("soper");var w=[],A=a(u).attr("colname");var H=a.jgrid.getElemByAttrVal(d.p.colModel,"name",A,!0);if(-1!==H){var F=d.p.colModel[H];
A=a.extend({},F.searchoptions);A.sopt||(A.sopt=[],A.sopt[0]="select"===F.stype?"eq":c.defaultSearch);a.each(c.odata,function(){w.push(this.oper)});for(H=0;H<A.sopt.length;H++){var B=a.inArray(A.sopt[H],w);-1!==B&&(F=x===c.odata[B].oper?b.highlight:"",n+='<li class="ui-menu-item '+F+'" role="presentation"><a class="'+b.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+c.odata[B].oper+'" oper="'+c.operands[c.odata[B].oper]+'"><table class="ui-common-table"><tr><td class="opersign">'+c.operands[c.odata[B].oper]+
"</td><td>"+c.odata[B].text+"</td></tr></table></a></li>")}n+="</ul>";a("body").append(n);a("#sopt_menu").addClass("ui-menu "+g.menu_widget);a("#sopt_menu > li > a").hover(function(){a(this).addClass(b.hover)},function(){a(this).removeClass(b.hover)}).click(function(){var E=a(this).attr("value"),R=a(this).attr("oper");a(d).triggerHandler("jqGridToolbarSelectOper",[E,R,u]);a("#sopt_menu").hide();a(u).text(R).attr("soper",E);!0===c.autosearch&&(R=a(u).parent().next().children()[0],(a(R).val()||"nu"===
E||"nn"===E||0<=a.inArray(E,f))&&l())})}},q=a("<tr class='ui-search-toolbar' role='row'></tr>"),r;if(c.restoreFromFilters&&(h=!0===d.p.mergeSearch&&d.p.searchModules.hasOwnProperty("filterToolbar")&&!1!==d.p.searchModules.filterToolbar?d.p.searchModules.filterToolbar:d.p.postData.filters)){"string"===typeof h&&(h=a.jgrid.parse(h));var p=h.rules&&h.rules.length?h.rules:!1}var v=new Set(c.disabledKeys);if(v.size!==c.disabledKeys.length)for(h=0;h<c.disabledKeys.length;h++)v=new Set,v.add(c.disabledKeys[h]);
if(e.filterFor)var t=e.filterFor;d.p.colSpanHeader.length&&a(d).jqGrid("destroyColSpanHeader",!1);a.each(d.p.colModel,function(u){var n="",x="=",w,A=a("<th role='columnheader' class='"+k.headerBox+" ui-th-"+d.p.direction+" "+(this.labelClasses||"")+"' id='gsh_"+d.p.id+"_"+this.name+"'></th>"),H=a('<div><span aria-label="empty" style="display: none;">empty</span></div>'),F=a("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");
!0===this.hidden&&a(A).css("display","none");this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");this.searchoptions=this.searchoptions||{};void 0===this.searchoptions.searchOperMenu&&(this.searchoptions.searchOperMenu=!0);u=a.extend({},this.searchoptions,{name:this.index||this.name,id:"gs_"+d.p.idPrefix+this.name,oper:"search",title:void 0!==t?t+" "+d.p.colNames[u]:d.p.colNames[u]});if(this.search){if(c.restoreFromFilters&&p){var B=!1;for(w=0;w<p.length;w++)if(p[w].field&&
(this.index||this.name)===p[w].field){B=p[w];break}}if(c.searchOperators){n=u.sopt?u.sopt[0]:"select"===this.stype?"eq":c.defaultSearch;c.restoreFromFilters&&B&&(n=B.op);for(w=0;w<c.odata.length;w++)if(c.odata[w].oper===n){x=c.operands[n]||"";break}w=null!=u.searchtitle?u.searchtitle:c.operandTitle;n=this.searchoptions.searchOperMenu?"<a title='"+w+"' soper='"+n+"' class='soptclass' colname='"+this.name+"'>"+x+"</a>":""}a("td",F).eq(0).attr("columname",this.name).append(n);void 0===u.clearSearch&&
(u.clearSearch=!0);u.clearSearch?(x=c.resetTitle||"Clear Search Value",a("td",F).eq(2).append("<a title='"+x+"' tabindex='0' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+c.resetIcon+"</a>")):a("td",F).eq(2).hide();this.surl&&(u.dataUrl=this.surl);x="";u.defaultValue&&(x=a.jgrid.isFunction(u.defaultValue)?u.defaultValue.call(d):u.defaultValue);c.restoreFromFilters&&B&&(x=B.data);B=a.jgrid.createEl.call(d,this.stype,u,x,!1,a.extend({},a.jgrid.ajaxOptions,d.p.ajaxSelectOptions||
{}));"custom"!==this.stype&&("select"===this.stype?a(B).addClass(g.srSelect):a(B).addClass(g.srInput));a("td",F).eq(1).append(B);a(H).append(F);null==u.dataEvents&&(u.dataEvents=[]);switch(this.stype){case "select":!0===c.autosearch&&u.dataEvents.push({type:"change",fn:function(){l();return!1}});break;case "text":case "custom":!0===c.autosearch&&(c.searchOnEnter?u.dataEvents.push({type:"keypress",fn:function(E){return 13===(E.charCode||E.keyCode||0)?(E.preventDefault(),l(),!1):this}}):u.dataEvents.push({type:"keydown",
fn:function(E){var R=E.which;if(!v.has(R)){if(13===R)return E.preventDefault(),!1;r&&clearTimeout(r);r=setTimeout(function(){l()},c.autosearchDelay)}}}))}a.jgrid.bindEv.call(d,B,u)}a(A).append(H);a(q).append(A);c.searchOperators&&""!==n||a("td",F).eq(0).hide()});a("table thead",d.grid.hDiv).append(q);c.searchOperators&&(a(".soptclass",q).click(function(u){var n=a(this).offset();m(this,n.left,n.top);u.stopPropagation()}),a("body").on("click",function(u){"soptclass"!==u.target.className&&a("#sopt_menu").remove()}));
a(".clearsearchclass",q).click(function(){var u=a(this).parents("tr").first(),n=a("td.ui-search-oper",u).attr("columname"),x=a("td.ui-search-oper a",u).attr("soper");var w=a.jgrid.getElemByAttrVal(d.p.colModel,"name",n,!0);if(-1===w)return!1;n=d.p.colModel[w];var A=a.extend({},n.searchoptions||{}),H=A.defaultValue?A.defaultValue:"";if("select"===n.stype){var F=a("td.ui-search-input select",u);H?F.val(H):F[0].selectedIndex=0}else F=a("td.ui-search-input input",u),F.val(H);a(d).triggerHandler("jqGridToolbarClearVal",
[F[0],w,A,H]);a.jgrid.isFunction(c.onClearSearchValue)&&c.onClearSearchValue.call(d,F[0],w,A,H);w="";if("nu"===x||"nn"===x||0<=a.inArray(x,f)){var B=A.sopt?A.sopt[0]:"select"===n.stype?"eq":c.defaultSearch;w=null!=d.p.customFilterDef&&null!=d.p.customFilterDef[B]?d.p.customFilterDef[B].operand:c.operands[B]||"";B===x?a("td.ui-search-oper a",u).attr("soper","dummy").text(w):a("td.ui-search-oper a",u).attr("soper",B).text(w)}!0===c.autosearch&&(l(),B===x&&a("td.ui-search-oper a",u).attr("soper",B).text(w))});
a(".clearsearchclass",q).keydown(function(u){13===u.keyCode&&(u.preventDefault(),a(".clearsearchclass",q).trigger("click"))});a(d.grid.hDiv).on("scroll",function(u){d.grid.hScroll||(d.grid.bScroll=!0,d.grid.bDiv.scrollLeft=d.grid.hDiv.scrollLeft,d.p.footerrow&&(d.grid.sDiv.scrollLeft=d.grid.bDiv.scrollLeft),d.p.headerrow&&(d.grid.hrDiv.scrollLeft=d.grid.bDiv.scrollLeft));d.grid.hScroll=!1});d.p.colSpanHeader.length&&setTimeout(function(){a(d).jqGrid("setColSpanHeader")},0);this.p.filterToolbar=!0;
this.triggerToolbar=l;this.clearToolbar=function(u){var n={},x={},w=0,A,H,F;u="boolean"!==typeof u?!0:u;a.each(d.p.colModel,function(){H=a("#gs_"+d.p.idPrefix+a.jgrid.jqID(this.name),d.grid.hDiv);F=this.searchoptions&&void 0!==this.searchoptions.defaultValue?this.searchoptions.defaultValue:void 0;A=this.index||this.name;x[A]=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:c.defaultSearch||"eq";switch(this.stype){case "select":H.find("option").each(function(U){0===U&&(this.selected=
!0);if(a(this).val()===F)return this.selected=!0,!1});if(void 0!==F)n[A]=F,w++;else try{delete d.p.postData[A]}catch(U){}break;case "text":H.val(F||"");if(void 0!==F)n[A]=F,w++;else try{delete d.p.postData[A]}catch(U){}break;case "custom":a.jgrid.isFunction(this.searchoptions.custom_value)&&0<H.length&&this.searchoptions.custom_value.call(d,H,"set",F||"")}});var B=0<w?!0:!1;d.p.resetsearch=!0;if(!0===c.stringResult||"local"===d.p.datatype){var E='{"groupOp":"'+c.groupOp+'","rules":[',R=0;a.each(n,
function(U,S){0<R&&(E+=",");E+='{"field":"'+U+'",';E+='"op":"'+x[U]+'",';E+='"data":"'+(S+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"}';R++;c.searchOperators&&(H=a("#gs_"+d.p.idPrefix+a.jgrid.jqID(U),d.grid.hDiv),H.parents("table.ui-search-table").find("td.ui-search-oper").children("a").attr("soper",x[U]).html(c.operands[x[U]]))});E+="]}";!0===d.p.mergeSearch&&d.p.searchModules.hasOwnProperty("filterToolbar")&&!1!==d.p.searchModules.filterToolbar?(d.p.searchModules.filterToolbar=0<R?E:null,B=
!0,a.extend(d.p.postData,{filters:a.jgrid.splitSearch(d.p.searchModules)})):a.extend(d.p.postData,{filters:E});a.each(["searchField","searchString","searchOper"],function(U,S){d.p.postData.hasOwnProperty(S)&&delete d.p.postData[S]})}else a.extend(d.p.postData,n);if(c.url){var z=d.p.url;a(d).jqGrid("setGridParam",{url:c.url})}var O="stop"===a(d).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!O&&a.jgrid.isFunction(c.beforeClear)&&(O=c.beforeClear.call(d));O||u&&a(d).jqGrid("setGridParam",{search:B}).trigger("reloadGrid",
[{page:1}]);z&&a(d).jqGrid("setGridParam",{url:z});a(d).triggerHandler("jqGridToolbarAfterClear");a.jgrid.isFunction(c.afterClear)&&c.afterClear()};this.toggleToolbar=function(){var u=a("tr.ui-search-toolbar",d.grid.hDiv);"none"===u.css("display")?u.show():u.hide()}}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.p.filterToolbar=!1,a(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},
refreshFilterToolbar:function(c){c=a.extend(!0,{filters:"",onClearVal:null,onSetVal:null},c||{});return this.each(function(){function e(v){if(v&&v.rules){b=v.rules;g=b.length;for(h=0;h<g;h++)if(k=b[h],m=a.inArray(k.field,l),-1!==m&&(r=a("#gs_"+d.p.idPrefix+a.jgrid.jqID(f[m].name)),0<r.length&&("select"===f[m].stype?r.find("option[value='"+a.jgrid.jqID(k.data)+"']").prop("selected",!0):"text"===f[m].stype&&r.val(k.data),a.jgrid.isFunction(c.onSetVal)&&c.onSetVal.call(d,r,f[m].name),q&&q.searchOperators))){var t=
r.parent().prev();t.hasClass("ui-search-oper")&&(a(".soptclass",t).attr("soper",k.op),q.operands.hasOwnProperty(k.op)&&a(".soptclass",t).html(a.jgrid.stripScript(q.operands[k.op])))}if(v.groups)for(t=0;t<v.groups.length;t++)e(v.groups[t])}}var d=this,f=d.p.colModel,h,g=d.p.colModel.length,b,k,l=[],m;if(d.p.filterToolbar){var q=a(d).data("filterToolbar");for(h=0;h<g;h++){l.push(f[h].index||f[h].name);var r=a("#gs_"+d.p.idPrefix+a.jgrid.jqID(f[h].name));switch(f[h].stype){case "select":case "text":r.val("")}a.jgrid.isFunction(c.onClearVal)&&
c.onClearVal.call(d,r,f[h].name)}if("string"===typeof c.filters){if(c.filters.length)var p=c.filters;else d.p.postData.hasOwnProperty("filters")&&(p=d.p.postData.filters);p=a.jgrid.parse(p)}a.isPlainObject(p)&&e(p)}})},searchGrid:function(c){var e=a.jgrid.getRegional(this[0],"search");c=a.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,
afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,splitSelect:",",groupOpSelect:"OR",operands:{eq:"=",ne:"<>",lt:"<",
le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"},buttons:[]},e,c||{});return this.each(function(){function d(T){g=a(f).triggerHandler("jqGridFilterBeforeShow",[T]);void 0===g&&(g=!0);g&&a.jgrid.isFunction(c.beforeShowSearch)&&(g=c.beforeShowSearch.call(f,T));g&&(a.jgrid.viewModal("#"+a.jgrid.jqID(k.themodal),{gbox:"#gbox_"+a.jgrid.jqID(f.p.id),jqm:c.jqModal,modal:c.modal,overlay:c.overlay,toTop:c.toTop}),
a(f).triggerHandler("jqGridFilterAfterShow",[T]),a.jgrid.isFunction(c.afterShowSearch)&&c.afterShowSearch.call(f,T))}var f=this;if(f.grid){var h="fbox_"+f.p.id,g=!0,b=!0,k={themodal:"searchmod"+h,modalhead:"searchhd"+h,modalcontent:"searchcnt"+h,scrollelm:h},l,m=[],q=a.jgrid.styleUI[f.p.styleUI||"jQueryUI"].filter,r=a.jgrid.styleUI[f.p.styleUI||"jQueryUI"].common;c.styleUI=f.p.styleUI;if(a.isPlainObject(f.p._savedFilter)&&!a.isEmptyObject(f.p._savedFilter))var p=f.p._savedFilter;else!0===f.p.mergeSearch&&
f.p.searchModules.hasOwnProperty("searchGrid")&&!1!==f.p.searchModules.searchGrid&&a.extend(f.p.postData,{filters:a.jgrid.splitSearch(f.p.searchModules)}),p=f.p.postData[c.sFilter];"string"===typeof p&&(p=a.jgrid.parse(p));!0===c.recreateFilter&&a("#"+a.jgrid.jqID(k.themodal)).remove();if(void 0!==a("#"+a.jgrid.jqID(k.themodal))[0])d(a("#fbox_"+a.jgrid.jqID(f.p.id)));else{var v=a("<div><div id='"+h+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+a.jgrid.jqID(f.p.id)),
t="left",u="";"rtl"===f.p.direction&&(t="right",u=" style='text-align:left'",v.attr("dir","rtl"));var n=a.extend([],f.p.colModel),x="<a id='"+h+"_search' class='fm-button "+r.button+" fm-button-icon-right ui-search'><span class='"+r.icon_base+" "+q.icon_search+"'></span>"+c.Find+"</a>",w="<a id='"+h+"_reset' class='fm-button "+r.button+" fm-button-icon-left ui-reset'><span class='"+r.icon_base+" "+q.icon_reset+"'></span>"+c.Reset+"</a>",A="",H="",F=!1,B=-1,E=!1,R=[];c.showQuery&&(A="<a id='"+h+"_query' class='fm-button "+
r.button+" fm-button-icon-left'><span class='"+r.icon_base+" "+q.icon_query+"'></span>Query</a>");x=a.jgrid.buildButtons(c.buttons,A+x,r);var z=null;if(a(f).jqGrid("isGroupHeaderOn")){var O=a("table.ui-jqgrid-htable",f.grid.hDiv).find(".jqg-second-row-header"),U=f.p.groupHeader.length;void 0!==O[0]&&(z=f.p.groupHeader[U-1])}if(c.columns.length){n=c.columns;B=0;var S=n[0].index||n[0].name}else{if(null!==z)for(O=0;O<n.length;O++)if(U=a.jgrid.inColumnHeader(n[O].name,z.groupHeaders),0<=U){n[O].label=
z.groupHeaders[U].titleText+"::"+f.p.colNames[O];for(var K=1;K<=z.groupHeaders[U].numberOfColumns-1;K++)n[O+K].label=z.groupHeaders[U].titleText+"::"+f.p.colNames[O+K];O=O+z.groupHeaders[U].numberOfColumns-1}a.each(n,function(T,W){W.label||(W.label=f.p.colNames[T]);if(!F){var qa=void 0===W.search?!0:W.search,va=!0===W.hidden;if(W.searchoptions&&!0===W.searchoptions.searchhidden&&qa||qa&&!va)F=!0,S=W.index||W.name,B=T}"select"===W.stype&&W.searchoptions&&W.searchoptions.multiple&&(E=!0,R.push(W.index||
W.name))})}if(!p&&S||!1===c.multipleSearch)z="eq",0<=B&&n[B].searchoptions&&n[B].searchoptions.sopt?z=n[B].searchoptions.sopt[0]:c.sopt&&c.sopt.length&&(z=c.sopt[0]),p={groupOp:"AND",rules:[{field:S,op:z,data:""}]};F=!1;c.tmplNames&&c.tmplNames.length&&(F=!0,H="<tr><td class='ui-search-label'>"+c.tmplLabel+"</td>",H+="<td><select size='1' name='select_template' class='ui-template "+q.srSelect+"'>",H+="<option value='default'>Default</option>",a.each(c.tmplNames,function(T,W){H+="<option value='"+
T+"'>"+W+"</option>"}),H+="</select></td></tr>");if(void 0!==f.p.customFilterDef)for(var ba in f.p.customFilterDef)f.p.customFilterDef.hasOwnProperty(ba)&&!c.operands.hasOwnProperty(ba)&&(c.odata.push({oper:ba,text:f.p.customFilterDef[ba].text}),c.operands[ba]=f.p.customFilterDef[ba].operand,!0===f.p.customFilterDef[ba].unary&&m.push(ba));q="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+h+"_2'><tbody><tr><td colspan='2'><hr class='"+r.content+"' style='margin:1px'/></td></tr>"+
H+"<tr><td class='EditButton' style='text-align:"+t+"'>"+w+"</td><td class='EditButton' "+u+">"+x+"</td></tr></tbody></table>";h=a.jgrid.jqID(h);a("#"+h).jqFilter({columns:n,sortStrategy:c.sortStrategy,filter:c.loadDefaults?p:null,showQuery:c.showQuery,errorcheck:c.errorcheck,sopt:c.sopt,groupButton:c.multipleGroup,ruleButtons:c.multipleSearch,uniqueSearchFields:c.uniqueSearchFields,afterRedraw:c.afterRedraw,ops:c.odata,operands:c.operands,ajaxSelectOptions:f.p.ajaxSelectOptions,groupOps:c.groupOps,
addsubgrup:c.addsubgrup,addrule:c.addrule,delgroup:c.delgroup,delrule:c.delrule,autoencode:f.p.autoencode,unaryOperations:m,onChange:function(){this.p.showQuery&&a(".query",this).text(this.toUserFriendlyString());a.jgrid.isFunction(c.afterChange)&&c.afterChange.call(f,a("#"+h),c)},direction:f.p.direction,id:f.p.id});v.append(q);a("#"+h+"_2").find("[data-index]").each(function(){var T=parseInt(a(this).attr("data-index"),10);if(0<=T)a(this).on("click",function(W){c.buttons[T].click.call(f,a("#"+h),
c,W)})});if(F&&c.tmplFilters&&c.tmplFilters.length)a(".ui-template",v).on("change",function(){var T=a(this).val();"default"===T?a("#"+h).jqFilter("addFilter",p):a("#"+h).jqFilter("addFilter",c.tmplFilters[parseInt(T,10)]);return!1});!0===c.multipleGroup&&(c.multipleSearch=!0);a(f).triggerHandler("jqGridFilterInitialize",[a("#"+h)]);a.jgrid.isFunction(c.onInitializeSearch)&&c.onInitializeSearch.call(f,a("#"+h));c.gbox="#gbox_"+a.jgrid.jqID(f.p.id);m=a(".ui-jqgrid").css("font-size")||"11px";c.layer?
a.jgrid.createModal(k,v,c,"#gview_"+a.jgrid.jqID(f.p.id),a("#gbox_"+a.jgrid.jqID(f.p.id))[0],"string"===typeof c.layer?"#"+a.jgrid.jqID(c.layer):c.layer,"string"===typeof c.layer?{position:"relative","font-size":m}:{"font-size":m}):a.jgrid.createModal(k,v,c,"#gview_"+a.jgrid.jqID(f.p.id),a("#gbox_"+a.jgrid.jqID(f.p.id))[0],null,{"font-size":m});(c.searchOnEnter||c.closeOnEscape)&&a("#"+a.jgrid.jqID(k.themodal)).keydown(function(T){var W=a(T.target);if(!(!c.searchOnEnter||13!==T.which||W.hasClass("add-group")||
W.hasClass("add-rule")||W.hasClass("delete-group")||W.hasClass("delete-rule")||W.hasClass("fm-button")&&W.is("[id$=_query]")))return T.preventDefault(),a("#"+h+"_search").click(),!1;if(c.closeOnEscape&&27===T.which)return a("#"+a.jgrid.jqID(k.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1});if(A)a("#"+h+"_query").on("click",function(){a(".queryresult",v).toggle();return!1});void 0===c.stringResult&&(c.stringResult=c.multipleSearch);a("#"+h+"_search").on("click",function(){var T={};l=a("#"+
h);l.find(".input-elm:focus").change();if(E&&c.multipleSearch){f.p._savedFilter={};var W=a.jgrid.filterRefactor({ruleGroup:a.extend(!0,{},l.jqFilter("filterData")),ssfield:R,splitSelect:c.splitSelect,groupOpSelect:c.groupOpSelect});f.p._savedFilter=a.extend(!0,{},l.jqFilter("filterData"))}else W=l.jqFilter("filterData");if(c.errorcheck&&(l[0].hideError(),c.showQuery||l.jqFilter("toSQLString"),l[0].p.error))return l[0].showError(),!1;c.stringResult?(T[c.sFilter]=JSON.stringify(W),a.each([c.sField,
c.sValue,c.sOper],function(){T[this]=""})):c.multipleSearch?(T[c.sFilter]=W,a.each([c.sField,c.sValue,c.sOper],function(){T[this]=""})):(T[c.sField]=W.rules[0].field,T[c.sValue]=W.rules[0].data,T[c.sOper]=W.rules[0].op,T[c.sFilter]="");"string"!==typeof T[c.sFilter]&&(T[c.sFilter]=JSON.stringify(T[c.sFilter]));f.p.search=!0;!0===f.p.mergeSearch&&f.p.searchModules.hasOwnProperty("searchGrid")&&!1!==f.p.searchModules.searchGrid&&c.multipleSearch?(f.p.searchModules.searchGrid=""!==T[c.sFilter]?T[c.sFilter]:
null,a.extend(f.p.postData,{filters:a.jgrid.splitSearch(f.p.searchModules)})):a.extend(f.p.postData,T);b=a(f).triggerHandler("jqGridFilterSearch");void 0===b&&(b=!0);b&&a.jgrid.isFunction(c.onSearch)&&(b=c.onSearch.call(f,f.p.filters));!1!==b&&a(f).trigger("reloadGrid",[{page:1}]);c.closeAfterSearch&&a.jgrid.hideModal("#"+a.jgrid.jqID(k.themodal),{gb:"#gbox_"+a.jgrid.jqID(f.p.id),jqm:c.jqModal,onClose:c.onClose});return!1});a("#"+h+"_reset").on("click",function(){var T={},W=a("#"+h);f.p.search=!1;
f.p.resetsearch=!0;!1===c.multipleSearch?T[c.sField]=T[c.sValue]=T[c.sOper]="":T[c.sFilter]="";W[0].resetFilter();F&&a(".ui-template",v).val("default");!0===f.p.mergeSearch&&f.p.searchModules.hasOwnProperty("searchGrid")&&!1!==f.p.searchModules.searchGrid?(f.p.searchModules.searchGrid=null,a.extend(f.p.postData,{filters:a.jgrid.splitSearch(f.p.searchModules)}),f.p.search=!0):a.extend(f.p.postData,T);b=a(f).triggerHandler("jqGridFilterReset");void 0===b&&(b=!0);b&&a.jgrid.isFunction(c.onReset)&&(b=
c.onReset.call(f));!1!==b&&a(f).trigger("reloadGrid",[{page:1}]);c.closeAfterReset&&a.jgrid.hideModal("#"+a.jgrid.jqID(k.themodal),{gb:"#gbox_"+a.jgrid.jqID(f.p.id),jqm:c.jqModal,onClose:c.onClose});return!1});d(a("#"+h));a(".fm-button:not(."+r.disabled+")",v).hover(function(){a(this).addClass(r.hover)},function(){a(this).removeClass(r.hover)})}}})},filterInput:function(c,e){e=a.extend(!0,{defaultSearch:"cn",groupOp:"OR",searchAll:!1,beforeSearch:null,afterSearch:null,selectFirstFound:!1,firstFoundTimeout:30},
e||{});return this.each(function(){var d=this;if(d.grid){var f,h,g='{"groupOp":"'+e.groupOp+'","rules":[',b=0,k,l;c+="";a.each(d.p.colModel,function(){f=this.index||this.name;h=this.searchoptions||{};k=e.defaultSearch?e.defaultSearch:h.sopt?h.sopt[0]:e.defaultSearch;((l=void 0===this.search?!0:this.search)||e.searchAll)&&""!==c&&(0<b&&(g+=","),g+='{"field":"'+f+'",',g+='"op":"'+k+'",',g+='"data":"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"}',b++)});g+="]}";!0===d.p.mergeSearch&&d.p.searchModules.hasOwnProperty("filterInput")&&
!1!==d.p.searchModules.filterInput?(d.p.searchModules.filterInput=0<b?g:null,a.extend(d.p.postData,{filters:a.jgrid.splitSearch(d.p.searchModules)})):a.extend(d.p.postData,{filters:g});a.each(["searchField","searchString","searchOper"],function(q,r){d.p.postData.hasOwnProperty(r)&&delete d.p.postData[r]});var m="stop"===a(d).triggerHandler("jqGridFilterInputBeforeSearch")?!0:!1;!m&&a.jgrid.isFunction(e.beforeSearch)&&(m=e.beforeSearch.call(d));m||a(d).jqGrid("setGridParam",{search:!0}).trigger("reloadGrid",
[{page:1}]);e.selectFirstFound&&setTimeout(function(){var q=a(d).jqGrid("getGridRowByIndex",1);a(d).jqGrid("setSelection",q.id,!1)},e.firstFoundTimeout);a(d).triggerHandler("jqGridFilterInputAfterSearch");a.jgrid.isFunction(e.afterSearch)&&e.afterSearch.call(d)}})},autoSelect:function(c){c=a.extend(!0,{field:"",direction:"asc",src_date:"Y-m-d",allValues:"All",count_item:!0,create_value:!0},c||{});return this.each(function(){var e=this,d="";if(c.field&&e.p.data&&Array.isArray(e.p.data)){var f=[];try{var h=
a.jgrid.from.call(e,e.p.data);var g=h.groupBy(c.field,c.direction,"text",c.src_date);var b=g.length}catch(m){}if(g&&g.length){var k=a("#gsh_"+e.p.id+"_"+c.field).find("td.ui-search-input > select");b=g.length;c.allValues&&(d="<option value=''>"+c.allValues+"</option>",f.push(":"+c.allValues));for(;b--;){h=g[b];var l=c.count_item?" ("+h.items.length+")":"";d+="<option value='"+h.unique+"'>"+h.unique+l+"</option>";f.push(h.unique+":"+h.unique+l)}k.append(d);k.on("change",function(){e.triggerToolbar()});
c.create_value&&(d=a.jgrid.getElemByAttrVal(e.p.colModel,"name",c.field,!1),a.isEmptyObject(d)||(d.searchoptions?a.extend(d.searchoptions,{value:f.join(";")}):(d.searchoptions={},d.searchoptions.value=f.join(";"))))}}})}});var J={};a.jgrid.extend({editGridRow:function(c,e){var d=a.jgrid.getRegional(this[0],"edit"),f=this[0].p.styleUI,h=a.jgrid.styleUI[f].formedit,g=a.jgrid.styleUI[f].common;e=a.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,
drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,
onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:g.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},d,e||{});J[a(this)[0].p.id]=e;return this.each(function(){function b(){var G={},L;a(H).find(".FormElement").each(function(){var da=a(".customelement",this);if(da.length){var Z=a(da[0]).attr("name");a.each(n.p.colModel,function(){if(this.name===Z&&this.editoptions&&a.jgrid.isFunction(this.editoptions.custom_value)){try{let ea=
this.editoptions.custom_value.call(n,a("#"+a.jgrid.jqID(Z),H),"get");if("#ignoreme#"!==ea){if(void 0===crv)throw"e1";z[Z]=ea}}catch(ea){"e1"===ea?a.jgrid.info_dialog(S.errcap,"function 'custom_value' "+J[a(this)[0]].p.msg.novalue,J[a(this)[0]].p.bClose,{styleUI:J[a(this)[0]].p.styleUI}):a.jgrid.info_dialog(S.errcap,ea.message,J[a(this)[0]].p.bClose,{styleUI:J[a(this)[0]].p.styleUI})}return!0}})}else{switch(a(this).get(0).type){case "checkbox":a(this).is(":checked")?z[this.name]=a(this).val():(da=
a(this).attr("offval"),z[this.name]=da);break;case "select-one":z[this.name]=a(this).val();break;case "select-multiple":z[this.name]=a(this).val();z[this.name]=z[this.name]?z[this.name].join(","):"";break;case "radio":if(G.hasOwnProperty(this.name))return!0;G[this.name]=void 0===a(this).attr("offval")?"off":a(this).attr("offval");break;default:z[this.name]=a(this).val()}n.p.autoencode&&(z[this.name]=a.jgrid.htmlEncode(z[this.name]))}});for(L in G)if(G.hasOwnProperty(L)){var X=a('input[name="'+L+'"]:checked',
H).val();z[L]=void 0!==X?X:G[L];n.p.autoencode&&(z[L]=a.jgrid.htmlEncode(z[L]))}return!0}function k(G,L,X){var da,Z=0,ea,pa,wa,Aa,Ba;if(J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)n.p.savedData={},n.p.savedData[L.p.id+"_id"]=G;var la=L.p.colModel;if("_empty"===G)a(la).each(function(){da=this.name;wa=a.extend({},this.editoptions||{});(pa=a("#"+a.jgrid.jqID(da),X))&&pa.length&&null!==pa[0]&&(Aa="","custom"===this.edittype&&a.jgrid.isFunction(wa.custom_value)?wa.custom_value.call(n,a("#"+da,X),
"set",Aa):wa.defaultValue?(Aa=a.jgrid.isFunction(wa.defaultValue)?wa.defaultValue.call(n):wa.defaultValue,"checkbox"===pa[0].type?(Ba=Aa.toLowerCase(),0>Ba.search(/(false|f|0|no|n|off|undefined)/i)&&""!==Ba?(pa[0].checked=!0,pa[0].defaultChecked=!0,pa[0].value=Aa):(pa[0].checked=!1,pa[0].defaultChecked=!1)):pa.val(Aa)):"checkbox"===pa[0].type?(pa[0].checked=!1,pa[0].defaultChecked=!1,Aa=a(pa).attr("offval")):pa[0].type&&"select"===pa[0].type.slice(0,6)?pa[0].selectedIndex=0:pa.val(Aa),!0===J[n.p.id].checkOnSubmit||
J[n.p.id].checkOnUpdate)&&(n.p.savedData[da]=Aa)}),a("#id_g",X).val(G);else{var Ca=a(L).jqGrid("getInd",G,!0);Ca&&(a('td[role="gridcell"]',Ca).each(function(za){da=la[za].name;if("cb"!==da&&"subgrid"!==da&&"rn"!==da&&!0===la[za].editable&&"sc"!==da){if(da===L.p.ExpandColumn&&!0===L.p.treeGrid)ea=a(this).text();else try{ea=a.unformat.call(L,a(this),{rowId:G,colModel:la[za]},za)}catch(Fa){ea="textarea"===la[za].edittype?a(this).text():a(this).html()}n.p.autoencode&&(ea=a.jgrid.htmlDecode(ea));if(!0===
J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)n.p.savedData[da]=ea;da=a.jgrid.jqID(da);switch(la[za].edittype){case "select":var Ea=ea.split(",");Ea=a.map(Ea,function(Fa){return a.jgrid.trim(Fa)});a("#"+da+" option",X).each(function(){la[za].editoptions.multiple||a.jgrid.trim(ea)!==a.jgrid.trim(a(this).text())&&Ea[0]!==a.jgrid.trim(a(this).text())&&Ea[0]!==a.jgrid.trim(a(this).val())?la[za].editoptions.multiple?-1<a.inArray(a.jgrid.trim(a(this).text()),Ea)||-1<a.inArray(a.jgrid.trim(a(this).val()),
Ea)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});if(!0===J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)ea=a("#"+da,X).val(),la[za].editoptions.multiple&&(ea=ea.join(",")),n.p.savedData[da]=ea;break;case "checkbox":ea=String(ea);if(la[za].editoptions&&la[za].editoptions.value)if(la[za].editoptions.value.split(":")[0]===ea)a("#"+da,X)[n.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0});else a("#"+da,X)[n.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1});else ea=
ea.toLowerCase(),0>ea.search(/(false|f|0|no|n|off|undefined)/i)&&""!==ea?(a("#"+da,X)[n.p.useProp?"prop":"attr"]("checked",!0),a("#"+da,X)[n.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+da,X)[n.p.useProp?"prop":"attr"]("checked",!1),a("#"+da,X)[n.p.useProp?"prop":"attr"]("defaultChecked",!1));if(!0===J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)ea=a("#"+da,X).is(":checked")?a("#"+da,X).val():a("#"+da,X).attr("offval"),n.p.savedData[da]=ea;break;case "custom":try{if(la[za].editoptions&&
a.jgrid.isFunction(la[za].editoptions.custom_value))la[za].editoptions.custom_value.call(n,a("#"+da,X),"set",ea);else throw"e1";}catch(Fa){"e1"===Fa?a.jgrid.info_dialog(S.errcap,"function 'custom_value' "+J[a(this)[0]].p.msg.nodefined,a.rp_ge[a(this)[0]].p.bClose,{styleUI:J[a(this)[0]].p.styleUI}):a.jgrid.info_dialog(S.errcap,Fa.message,a.rp_ge[a(this)[0]].p.bClose,{styleUI:J[a(this)[0]].p.styleUI})}break;default:if("&nbsp;"===ea||"&#160;"===ea||1===ea.length&&160===ea.charCodeAt(0))ea="";a("#"+da,
X).val(ea)}Z++}}),0<Z&&(a("#id_g",H).val(G),!0===J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate))&&(n.p.savedData[L.p.id+"_id"]=G)}}function l(){a.each(n.p.colModel,function(G,L){L.editoptions&&!0===L.editoptions.NullIfEmpty&&z.hasOwnProperty(L.name)&&""===z[L.name]&&(z[L.name]="null")})}function m(){var G,L=[!0,"",""],X={},da=n.p.prmNames,Z=a(n).triggerHandler("jqGridAddEditBeforeCheckValues",[z,a(w),K]);Z&&"object"===typeof Z&&(z=Z);a.jgrid.isFunction(J[n.p.id].beforeCheckValues)&&(Z=J[n.p.id].beforeCheckValues.call(n,
z,a(w),K))&&"object"===typeof Z&&(z=Z);if(J[n.p.id].html5Check&&!a.jgrid.validateForm(W[0]))return!1;for(ea in z)if(z.hasOwnProperty(ea)&&(L=a.jgrid.checkValues.call(n,z[ea],ea),!1===L[0]))break;l();L[0]&&(X=a(n).triggerHandler("jqGridAddEditClickSubmit",[J[n.p.id],z,K]),void 0===X&&a.jgrid.isFunction(J[n.p.id].onclickSubmit)&&(X=J[n.p.id].onclickSubmit.call(n,J[n.p.id],z,K)||{}),L=a(n).triggerHandler("jqGridAddEditBeforeSubmit",[z,a(w),K]),void 0===L&&(L=[!0,"",""]),L[0]&&a.jgrid.isFunction(J[n.p.id].beforeSubmit)&&
(L=J[n.p.id].beforeSubmit.call(n,z,a(w),K)));if(L[0]&&!J[n.p.id].processing){J[n.p.id].processing=!0;a("#sData",H+"_2").addClass(g.active);var ea=J[n.p.id].url||a(n).jqGrid("getGridParam","editurl");var pa=da.oper;var wa="clientArray"===ea||"storage"===ea?n.p.keyName:da.id;z[pa]="_empty"===a.jgrid.trim(z[n.p.id+"_id"])?da.addoper:da.editoper;z[pa]!==da.addoper?z[wa]=z[n.p.id+"_id"]:void 0===z[wa]&&(z[wa]=z[n.p.id+"_id"]);delete z[n.p.id+"_id"];z=a.extend(z,J[n.p.id].editData,X);if(!0===n.p.treeGrid){if(z[pa]===
da.addoper){var Aa=a(n).jqGrid("getGridParam","selrow");z["adjacency"===n.p.treeGridModel?n.p.treeReader.parent_id_field:"parent_id"]=Aa}for(la in n.p.treeReader)n.p.treeReader.hasOwnProperty(la)&&(X=n.p.treeReader[la],!z.hasOwnProperty(X)||z[pa]===da.addoper&&"parent_id_field"===la||delete z[X])}z[wa]=a.jgrid.stripPref(n.p.idPrefix,z[wa]);var Ba=a.extend({url:ea,type:J[n.p.id].mtype,data:a.jgrid.isFunction(J[n.p.id].serializeEditData)?J[n.p.id].serializeEditData.call(n,z):z,success:function(Ca,za,
Ea){var Fa;a("#sData",H+"_2").removeClass(g.active);z[wa]=n.p.idPrefix+z[wa];300<=Ea.status&&304!==Ea.status?(L[0]=!1,L[1]=a(n).triggerHandler("jqGridAddEditErrorTextFormat",[Ea,K]),a.jgrid.isFunction(J[n.p.id].errorTextFormat)?L[1]=J[n.p.id].errorTextFormat.call(n,Ea,K):L[1]=za+" Status: '"+Ea.statusText+"'. Error code: "+Ea.status):(L=a(n).triggerHandler("jqGridAddEditAfterSubmit",[Ea,z,K]),void 0===L&&(L=[!0,"",""]),L[0]&&a.jgrid.isFunction(J[n.p.id].afterSubmit)&&(L=J[n.p.id].afterSubmit.call(n,
Ea,z,K)));if(!1===L[0])a(".FormError",w).html(L[1]),a(".FormError",w).show();else{n.p.autoencode&&a.each(z,function(Xa,Qa){z[Xa]=a.jgrid.htmlDecode(Qa)});z[pa]===da.addoper?(L[2]||(L[2]=a.jgrid.randId()),null==z[wa]||z[wa]===n.p.idPrefix+"_empty"||""===z[wa]?z[wa]=L[2]:L[2]=z[wa],J[n.p.id].reloadAfterSubmit?a(n).trigger("reloadGrid"):!0===n.p.treeGrid?a(n).jqGrid("addChildNode",L[2],Aa,z):a(n).jqGrid("addRowData",L[2],z,e.addedrow),J[n.p.id].closeAfterAdd?(!0!==n.p.treeGrid&&a(n).jqGrid("setSelection",
L[2]),a.jgrid.hideModal("#"+a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form})):J[n.p.id].clearAfterAdd&&k("_empty",n,w)):(J[n.p.id].reloadAfterSubmit?(a(n).trigger("reloadGrid"),J[n.p.id].closeAfterEdit||setTimeout(function(){a(n).jqGrid("setSelection",z[wa])},1E3)):!0===n.p.treeGrid?a(n).jqGrid("setTreeRow",z[wa],z):a(n).jqGrid("setRowData",z[wa],z),J[n.p.id].closeAfterEdit&&
a.jgrid.hideModal("#"+a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form}));if(a.jgrid.isFunction(J[n.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(a._data(a(n)[0],"events"),"jqGridAddEditAfterComplete"))G=Ea,setTimeout(function(){a(n).triggerHandler("jqGridAddEditAfterComplete",[G,z,a(w),K]);try{J[n.p.id].afterComplete.call(n,G,z,a(w),K)}catch(Xa){}G=null},
500);if(J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)if(a(w).data("disabled",!1),"_empty"!==n.p.savedData[n.p.id+"_id"])for(Fa in n.p.savedData)n.p.savedData.hasOwnProperty(Fa)&&z[Fa]&&(n.p.savedData[Fa]=z[Fa])}J[n.p.id].processing=!1;try{a(":input:visible",w)[0].focus()}catch(Xa){}},complete:function(){J[n.p.id].processing=!1}},a.jgrid.ajaxOptions,J[n.p.id].ajaxEditOptions);Ba.url||J[n.p.id].useDataProxy||(a.jgrid.isFunction(n.p.dataProxy)?J[n.p.id].useDataProxy=!0:(L[0]=!1,L[1]+=" "+S.nourl));
if(L[0])if(J[n.p.id].useDataProxy){var la=n.p.dataProxy.call(n,Ba,"set_"+n.p.id);void 0===la&&(la=[!0,""]);!1===la[0]?(L[0]=!1,L[1]=la[1]||"Error processing the row!"):(Ba.data.oper===da.addoper&&J[n.p.id].closeAfterAdd&&a.jgrid.hideModal("#"+a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form}),Ba.data.oper===da.editoper&&J[n.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+
a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form}))}else"clientArray"===Ba.url?(J[n.p.id].reloadAfterSubmit=!1,z=Ba.data,Ba.success(z,"",{status:200,statusText:""})):"storage"===Ba.url?z[pa]===da.addoper?("_empty"===z[wa]&&(z[wa]=""),a(n).jqGrid("addStorageRecord",z).then(function(Ca){"complete"===Ca.type&&Ba.success(z,"",{status:200,statusText:""})}).catch(function(Ca){a.jgrid.info_dialog("Error",
Ca.target.error.name+" : "+Ca.target.error.message,"Close")})):z[pa]===da.editoper&&a(n).jqGrid("updateStorageRecord",z).then(function(Ca){"complete"===Ca.type&&Ba.success(z,"",{status:200,statusText:""})}).catch(function(Ca){a.jgrid.info_dialog("Error",Ca.target.error.name+" : "+Ca.target.error.message,"Close")}):a.ajax(Ba)}!1===L[0]&&(a(w).scrollTop(0),a(".FormError",w).html(L[1]),a(".FormError",w).show())}function q(G,L){var X;var da=!(a.isPlainObject(G)&&a.isPlainObject(L)&&Object.getOwnPropertyNames(G).length===
Object.getOwnPropertyNames(L).length);if(!da)for(X in L)if(L.hasOwnProperty(X))if(G.hasOwnProperty(X)){if(G[X]!==L[X]){da=!0;break}}else{da=!0;break}return da}function r(){var G=!0;a(".FormError",w).hide();J[n.p.id].checkOnUpdate&&(z={},b(),O=q(z,n.p.savedData))&&(a(w).data("disabled",!0),a(".confirm","#"+F.themodal).show(),G=!1);return G}function p(G,L){var X=L[1].length-1;0===G?a("#pData",va).addClass(g.disabled):void 0!==L[1][G-1]&&a("#"+a.jgrid.jqID(L[1][G-1])).hasClass(g.disabled)?a("#pData",
va).addClass(g.disabled):a("#pData",va).removeClass(g.disabled);G===X?a("#nData",va).addClass(g.disabled):void 0!==L[1][G+1]&&a("#"+a.jgrid.jqID(L[1][G+1])).hasClass(g.disabled)?a("#nData",va).addClass(g.disabled):a("#nData",va).removeClass(g.disabled)}function v(){var G=a(n).jqGrid("getDataIDs"),L=a("#id_g",H).val();if(n.p.multiselect&&J[n.p.id].editselected){for(var X=[],da=0,Z=G.length;da<Z;da++)-1!==a.inArray(G[da],n.p.selarrrow)&&X.push(G[da]);L=a.inArray(L,X);return[L,X]}L=a.inArray(L,G);return[L,
G]}function t(G){var L="";"string"===typeof G&&(L=G.replace(/\{([\w\-]+)(?::([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(X,da){return'<span id="'+da+'" ></span>'}));return L}function u(){if(J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate){var G=[],L={};G=a.map(n.p.savedData,function(Z,ea){return ea});a(".FormElement",W).each(function(){if(""!==a.jgrid.trim(this.name)&&-1===G.indexOf(this.name)){var Z=a(this).val(),ea=a(this).get(0).type;if("checkbox"===ea)a(this).is(":checked")||(Z=a(this).attr("offval"));
else if("select-multiple"===ea)Z=Z.join(",");else if("radio"===ea){if(L.hasOwnProperty(this.name))return!0;L[this.name]=void 0===a(this).attr("offval")?"off":a(this).attr("offval")}n.p.savedData[this.name]=Z}});for(var X in L)if(L.hasOwnProperty(X)){var da=a('input[name="'+X+'"]:checked',W).val();n.p.savedData[X]=void 0!==da?da:L[X]}}}var n=this;if(n.grid&&c){n.p.savedData={};var x=n.p.id,w="FrmGrid_"+x,A="TblGrid_"+x,H="#"+a.jgrid.jqID(A),F={themodal:"editmod"+x,modalhead:"edithd"+x,modalcontent:"editcnt"+
x,scrollelm:w},B=!0,E=1,R=0,z,O,U="string"===typeof J[n.p.id].template&&0<J[n.p.id].template.length,S=a.jgrid.getRegional(this,"errors");J[n.p.id].styleUI=n.p.styleUI||"jQueryUI";a.jgrid.isMobile()&&(J[n.p.id].resize=!1);if("new"===c){c="_empty";var K="add";e.caption=J[n.p.id].addCaption}else e.caption=J[n.p.id].editCaption,K="edit";e.recreateForm||a(n).data("formProp")&&a.extend(J[a(this)[0].p.id],a(n).data("formProp"));var ba=!0;e.checkOnUpdate&&e.jqModal&&!e.modal&&(ba=!1);B=isNaN(J[a(this)[0].p.id].dataheight)?
J[a(this)[0].p.id].dataheight:J[a(this)[0].p.id].dataheight+"px";var T=isNaN(J[a(this)[0].p.id].datawidth)?J[a(this)[0].p.id].datawidth:J[a(this)[0].p.id].datawidth+"px",W=a("<form name='FormPost' id='"+w+"' class='FormGrid' onSubmit='return false;' style='width:"+T+";height:"+B+";'></form>").data("disabled",!1);if(U){var qa=t(J[a(this)[0].p.id].template);var va=H}else qa=a("<table id='"+A+"' class='EditTable ui-common-table'><tbody></tbody></table>"),va=H+"_2";w="#"+a.jgrid.jqID(w);a(W).append("<div class='FormError "+
g.error+"' style='display:none;'></div>");a(W).append("<div class='tinfo topinfo'>"+J[n.p.id].topinfo+"</div>");a(n.p.colModel).each(function(){var G=this.formoptions;E=Math.max(E,G?G.colpos||0:0);R=Math.max(R,G?G.rowpos||0:0)});a(W).append(qa);B=a(n).triggerHandler("jqGridAddEditBeforeInitData",[W,K]);void 0===B&&(B=!0);B&&a.jgrid.isFunction(J[n.p.id].beforeInitData)&&(B=J[n.p.id].beforeInitData.call(n,W,K));if(!1!==B){(function(){var G;if("_empty"!==c&&void 0!==n.p.savedRow&&0<n.p.savedRow.length&&
a.jgrid.isFunction(a.fn.jqGrid.restoreRow))for(G=0;G<n.p.savedRow.length;G++)if(n.p.savedRow[G].id===c){a(n).jqGrid("restoreRow",c);break}})();(function(G,L,X,da){var Z,ea,pa,wa=0,Aa,Ba,la,Ca=[],za=!1,Ea="",Fa,Xa;for(Fa=1;Fa<=da;Fa++)Ea+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==G&&(za=a(L).jqGrid("getInd",G));a(L.p.colModel).each(function(Qa){Z=this.name;Ba=(ea=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";if("cb"!==Z&&
"subgrid"!==Z&&!0===this.editable&&"rn"!==Z&&"sc"!==Z){if(!1===za)Aa="";else if(Z===L.p.ExpandColumn&&!0===L.p.treeGrid)Aa=a("td[role='gridcell']",L.rows[za]).eq(Qa).text();else{try{Aa=a.unformat.call(L,a("td[role='gridcell']",L.rows[za]).eq(Qa),{rowId:G,colModel:this},Qa)}catch(Qb){Aa=this.edittype&&"textarea"===this.edittype?a("td[role='gridcell']",L.rows[za]).eq(Qa).text():a("td[role='gridcell']",L.rows[za]).eq(Qa).html()}if(!Aa||"&nbsp;"===Aa||"&#160;"===Aa||1===Aa.length&&160===Aa.charCodeAt(0))Aa=
""}var eb=a.extend({},this.editoptions||{},{id:Z,name:Z,rowId:G,oper:K,module:"form",checkUpdate:J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate}),Ya=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),jb=parseInt(Ya.rowpos,10)||wa+1,zb=parseInt(2*(parseInt(Ya.colpos,10)||1),10);"_empty"===G&&eb.defaultValue&&(Aa=a.jgrid.isFunction(eb.defaultValue)?eb.defaultValue.call(n):eb.defaultValue);this.edittype||(this.edittype="text");n.p.autoencode&&(Aa=a.jgrid.htmlDecode(Aa));
la=a.jgrid.createEl.call(n,this.edittype,eb,Aa,!1,a.extend({},a.jgrid.ajaxOptions,L.p.ajaxSelectOptions||{}));"select"===this.edittype&&(Aa=a(la).val(),"select-multiple"===a(la).get(0).type&&Aa&&(Aa=Aa.join(",")));"checkbox"===this.edittype&&(Aa=a(la).is(":checked")?a(la).val():a(la).attr("offval"));a(la).addClass("FormElement");"select"===this.edittype?a(la).addClass(h.selectClass):-1<a.inArray(this.edittype,"text textarea password color date datetime datetime-local email month number range search tel time url week".split(" "))&&
a(la).addClass(h.inputClass);Xa=!0;if(U)Ya=a(W).find("#"+Z),Ya.length?Ya.replaceWith(la):Xa=!1;else{pa=a(X).find("tr[rowpos="+jb+"]");if(Ya.rowabove){var Gb=a("<tr><td class='contentinfo' colspan='"+2*da+"'>"+Ya.rowcontent+"</td></tr>");a(X).append(Gb);Gb[0].rp=jb}0===pa.length&&(pa=1<da?a("<tr rowpos='"+jb+"'></tr>").addClass("FormData").attr("id","tr_"+Z):a("<tr "+Ba+" rowpos='"+jb+"'></tr>").addClass("FormData").attr("id","tr_"+Z),a(pa).append(Ea),a(X).append(pa),pa[0].rp=jb);a("td",pa[0]).eq(zb-
2).html("<label for='"+Z+"' class='"+h.labelClass+"'>"+(void 0===Ya.label?L.p.colNames[Qa]:Ya.label)+"</label>");a("td",pa[0]).eq(zb-1).append(Ya.elmprefix).append(la).append(Ya.elmsuffix);1<da&&ea&&(a("td",pa[0]).eq(zb-2).hide(),a("td",pa[0]).eq(zb-1).hide())}(J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)&&Xa&&(n.p.savedData[Z]=Aa);"custom"===this.edittype&&a.jgrid.isFunction(eb.custom_value)&&eb.custom_value.call(n,a("#"+Z,la),"set",Aa);a.jgrid.bindEv.call(n,la,eb);Ca[wa]=Qa;wa++}});0<wa&&(U?
(Fa="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+L.p.id+"_id' value='"+G+"'/>",a(W).append(Fa)):(Fa=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*da-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+L.p.id+"_id' value='"+G+"'/></td></tr>"),Fa[0].rp=wa+999,a(X).append(Fa)),J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)&&(n.p.savedData[L.p.id+"_id"]=G);return Ca})(c,n,qa,
E);B="rtl"===n.p.direction?!0:!1;var ma="<a id='"+(B?"nData":"pData")+"' class='fm-button "+g.button+"'><span class='"+g.icon_base+" "+h.icon_prev+"'></span></a>";T="<a id='"+(B?"pData":"nData")+"' class='fm-button "+g.button+"'><span class='"+g.icon_base+" "+h.icon_next+"'></span></a>";var xa="<a id='sData' class='fm-button "+g.button+"'>"+e.bSubmit+"</a>",ta="<a id='cData' class='fm-button "+g.button+"'>"+e.bCancel+"</a>",ua=Array.isArray(J[n.p.id].buttons)?a.jgrid.buildButtons(J[n.p.id].buttons,
xa+ta,g):xa+ta;ua="<table style='height:auto' class='EditTable ui-common-table' id='"+A+"_2'><tbody><tr><td colspan='2'><hr class='"+g.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(B?T+ma:ma+T)+"</td><td class='EditButton'>"+ua+"</td></tr>";ua+="</tbody></table>";if(0<R){var fa=[];a.each(a(qa)[0].rows,function(G,L){fa[G]=L});fa.sort(function(G,L){return G.rp>L.rp?1:G.rp<L.rp?-1:0});a.each(fa,function(G,L){a("tbody",qa).append(L)})}e.gbox="#gbox_"+a.jgrid.jqID(x);
var Y=!1;!0===e.closeOnEscape&&(e.closeOnEscape=!1,Y=!0);U?(a(W).find("#pData").replaceWith(ma),a(W).find("#nData").replaceWith(T),a(W).find("#sData").replaceWith(xa),a(W).find("#cData").replaceWith(ta),A=a("<div id="+A+"></div>").append(W)):A=a("<div></div>").append(W).append(ua);a(W).append("<div class='binfo topinfo bottominfo'>"+J[n.p.id].bottominfo+"</div>");T=a(".ui-jqgrid").css("font-size")||"11px";a.jgrid.createModal(F,A,J[a(this)[0].p.id],"#gview_"+a.jgrid.jqID(n.p.id),a("#gbox_"+a.jgrid.jqID(n.p.id))[0],
null,{"font-size":T});B&&(a("#pData, #nData",H+"_2").css("float","right"),a(".EditButton",H+"_2").css("text-align","left"));J[n.p.id].topinfo&&a(".tinfo",w).show();J[n.p.id].bottominfo&&a(".binfo",w).show();ua=A=null;a("#"+a.jgrid.jqID(F.themodal)).keydown(function(G){var L=G.target;if(!0===a(w).data("disabled"))return!1;if(!0===J[n.p.id].savekey[0]&&G.which===J[n.p.id].savekey[1]&&"TEXTAREA"!==L.tagName)return a("#sData",H+"_2").trigger("click"),!1;if(27===G.which){if(!r())return!1;Y&&a.jgrid.hideModal("#"+
a.jgrid.jqID(F.themodal),{gb:e.gbox,jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form});return!1}if(!0===J[n.p.id].navkeys[0]){if("_empty"===a("#id_g",H).val())return!0;if(G.which===J[n.p.id].navkeys[1])return a("#pData",va).trigger("click"),!1;if(G.which===J[n.p.id].navkeys[2])return a("#nData",va).trigger("click"),!1}});e.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span","#"+a.jgrid.jqID(F.themodal)).removeClass("jqmClose"),
a("a.ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(F.themodal)).off("click").click(function(){if(!r())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form});return!1}));e.saveicon=a.extend([!0,"left",h.icon_save],e.saveicon);e.closeicon=a.extend([!0,"left",h.icon_close],e.closeicon);!0===e.saveicon[0]&&a("#sData",va).addClass("right"===e.saveicon[1]?
"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+g.icon_base+" "+e.saveicon[2]+"'></span>");!0===e.closeicon[0]&&a("#cData",va).addClass("right"===e.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+g.icon_base+" "+e.closeicon[2]+"'></span>");if(J[n.p.id].checkOnSubmit||J[n.p.id].checkOnUpdate)xa="<a id='sNew' class='fm-button "+g.button+"' style='z-index:1002'>"+e.bYes+"</a>",T="<a id='nNew' class='fm-button "+g.button+"' style='z-index:1002;margin-left:5px'>"+
e.bNo+"</a>",ta="<a id='cNew' class='fm-button "+g.button+"' style='z-index:1002;margin-left:5px;'>"+e.bExit+"</a>",A=e.zIndex||999,A++,a("#"+F.themodal).append("<div class='"+e.overlayClass+" jqgrid-overlay confirm' style='z-index:"+A+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+g.content+"' style='z-index:"+(A+1)+"'>"+e.saveData+"<br/><br/>"+xa+T+ta+"</div>"),a("#sNew","#"+a.jgrid.jqID(F.themodal)).click(function(){m();a(w).data("disabled",!1);a(".confirm","#"+
a.jgrid.jqID(F.themodal)).hide();return!1}),a("#nNew","#"+a.jgrid.jqID(F.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(F.themodal)).hide();a(w).data("disabled",!1);setTimeout(function(){a(":input:visible",w)[0].focus()},0);return!1}),a("#cNew","#"+a.jgrid.jqID(F.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(F.themodal)).hide();a(w).data("disabled",!1);a.jgrid.hideModal("#"+a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,
formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form});return!1});a(n).triggerHandler("jqGridAddEditInitializeForm",[a(w),K]);a.jgrid.isFunction(J[n.p.id].onInitializeForm)&&J[n.p.id].onInitializeForm.call(n,a(w),K);"_empty"!==c&&J[n.p.id].viewPagerButtons?a("#pData,#nData",va).show():a("#pData,#nData",va).hide();a(n).triggerHandler("jqGridAddEditBeforeShowForm",[a(w),K]);a.jgrid.isFunction(J[n.p.id].beforeShowForm)&&J[n.p.id].beforeShowForm.call(n,a(w),K);u();a("#"+a.jgrid.jqID(F.themodal)).data("onClose",
J[n.p.id].onClose);a.jgrid.viewModal("#"+a.jgrid.jqID(F.themodal),{gbox:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,overlay:e.overlay,modal:e.modal,overlayClass:e.overlayClass,focusField:e.focusField,onHide:function(G){var L=a("#editmod"+x)[0].style.width,X=a("#editmod"+x)[0].style.height;X=["100%","auto"].includes(X)?X:a.jgrid.floatNum(X,200);L=["100%","auto"].includes(L)?L:a.jgrid.floatNum(L,300);a(n).data("formProp",{top:a.jgrid.floatNum(a(G.w).css("top")),left:parseFloat(a(G.w).css("left")),width:L,
height:X,dataheight:a(w).height(),datawidth:a(w).width()});G.w.remove();G.o&&G.o.remove()}});ba||a("."+a.jgrid.jqID(e.overlayClass)).click(function(){if(!r())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form});return!1});a(".fm-button","#"+a.jgrid.jqID(F.themodal)).hover(function(){a(this).addClass(g.hover)},function(){a(this).removeClass(g.hover)});
a("#sData",va).click(function(){z={};a(".FormError",w).hide();b();"_empty"===z[n.p.id+"_id"]?m():!0===e.checkOnSubmit?(O=q(z,n.p.savedData))?(a(w).data("disabled",!0),a(".confirm","#"+a.jgrid.jqID(F.themodal)).show()):m():m();return!1});a("#cData",va).click(function(){if(!r())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(F.themodal),{gb:"#gbox_"+a.jgrid.jqID(x),jqm:e.jqModal,onClose:J[n.p.id].onClose,removemodal:J[n.p.id].removemodal,formprop:!J[n.p.id].recreateForm,form:J[n.p.id].form});return!1});
a(va).find("[data-index]").each(function(){var G=parseInt(a(this).attr("data-index"),10);if(0<=G&&e.buttons[G].hasOwnProperty("click"))a(this).on("click",function(L){e.buttons[G].click.call(n,a(w)[0],J[n.p.id],L)})});a("#nData",va).click(function(){if(!r())return!1;a(".FormError",w).hide();var G=v();G[0]=parseInt(G[0],10);if(-1!==G[0]&&G[1][G[0]+1]){a(n).triggerHandler("jqGridAddEditClickPgButtons",["next",a(w),G[1][G[0]]]);if(a.jgrid.isFunction(e.onclickPgButtons)){var L=e.onclickPgButtons.call(n,
"next",a(w),G[1][G[0]]);if(void 0!==L&&!1===L)return!1}if(a("#"+a.jgrid.jqID(G[1][G[0]+1])).hasClass(g.disabled))return!1;k(G[1][G[0]+1],n,w);n.p.multiselect&&J[n.p.id].editselected||a(n).jqGrid("setSelection",G[1][G[0]+1]);a(n).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",a(w),G[1][G[0]]]);a.jgrid.isFunction(e.afterclickPgButtons)&&e.afterclickPgButtons.call(n,"next",a(w),G[1][G[0]+1]);u();p(G[0]+1,G)}return!1});a("#pData",va).click(function(){if(!r())return!1;a(".FormError",w).hide();
var G=v();if(-1!==G[0]&&G[1][G[0]-1]){a(n).triggerHandler("jqGridAddEditClickPgButtons",["prev",a(w),G[1][G[0]]]);if(a.jgrid.isFunction(e.onclickPgButtons)){var L=e.onclickPgButtons.call(n,"prev",a(w),G[1][G[0]]);if(void 0!==L&&!1===L)return!1}if(a("#"+a.jgrid.jqID(G[1][G[0]-1])).hasClass(g.disabled))return!1;k(G[1][G[0]-1],n,w);n.p.multiselect&&J[n.p.id].editselected||a(n).jqGrid("setSelection",G[1][G[0]-1]);a(n).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",a(w),G[1][G[0]]]);a.jgrid.isFunction(e.afterclickPgButtons)&&
e.afterclickPgButtons.call(n,"prev",a(w),G[1][G[0]-1]);u();p(G[0]-1,G)}return!1});a(n).triggerHandler("jqGridAddEditAfterShowForm",[a(w),K]);a.jgrid.isFunction(J[n.p.id].afterShowForm)&&J[n.p.id].afterShowForm.call(n,a(w),K);ba=v();p(ba[0],ba);this.refreshEditForm=function(G,L){void 0===L&&(L=!1);(L||c===G)&&k(G,this,w);L&&(c=G)}}}})},viewGridRow:function(c,e){var d=a.jgrid.getRegional(this[0],"view"),f=this[0].p.styleUI,h=a.jgrid.styleUI[f].formedit,g=a.jgrid.styleUI[f].common;e=a.extend(!0,{top:0,
left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},d,e||{});J[a(this)[0].p.id]=e;return this.each(function(){function b(){!0!==J[q.p.id].closeOnEscape&&!0!==J[q.p.id].navkeys[0]||setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(n.modalhead)).attr("tabindex",
"-1").focus()},0)}function k(z,O){var U,S,K=0,ba,T;if(T=a(O).jqGrid("getInd",z,!0))a("td",T).each(function(W){U=O.p.colModel[W].name;S=O.p.colModel[W].editrules&&!0===O.p.colModel[W].editrules.edithidden?!1:!0===O.p.colModel[W].hidden?!0:!1;"cb"!==U&&"subgrid"!==U&&"rn"!==U&&"sc"!==U&&(ba=U===O.p.ExpandColumn&&!0===O.p.treeGrid?a(this).text():a(this).html(),U=a.jgrid.jqID("v_"+U),a("#"+U+" span","#"+v).html(ba),S&&a("#"+U,"#"+v).parents("tr").first().hide(),K++)}),0<K&&a("#id_g","#"+v).val(z)}function l(z,
O){var U=O[1].length-1;0===z?a("#pData","#"+v+"_2").addClass(g.disabled):void 0!==O[1][z-1]&&a("#"+a.jgrid.jqID(O[1][z-1])).hasClass(g.disabled)?a("#pData",v+"_2").addClass(g.disabled):a("#pData","#"+v+"_2").removeClass(g.disabled);z===U?a("#nData","#"+v+"_2").addClass(g.disabled):void 0!==O[1][z+1]&&a("#"+a.jgrid.jqID(O[1][z+1])).hasClass(g.disabled)?a("#nData",v+"_2").addClass(g.disabled):a("#nData","#"+v+"_2").removeClass(g.disabled)}function m(){var z=a(q).jqGrid("getDataIDs"),O=a("#id_g","#"+
v).val();if(q.p.multiselect&&J[q.p.id].viewselected){for(var U=[],S=0,K=z.length;S<K;S++)-1!==a.inArray(z[S],q.p.selarrrow)&&U.push(z[S]);O=a.inArray(O,U);return[O,U]}O=a.inArray(O,z);return[O,z]}var q=this;if(q.grid&&c){var r=q.p.id,p="ViewGrid_"+a.jgrid.jqID(r),v="ViewTbl_"+a.jgrid.jqID(r),t="ViewGrid_"+r,u="ViewTbl_"+r,n={themodal:"viewmod"+r,modalhead:"viewhd"+r,modalcontent:"viewcnt"+r,scrollelm:p},x=!0,w=1,A=0;J[q.p.id].styleUI=q.p.styleUI||"jQueryUI";e.recreateForm||a(q).data("viewProp")&&
a.extend(J[a(this)[0].p.id],a(q).data("viewProp"));var H=isNaN(J[a(this)[0].p.id].dataheight)?J[a(this)[0].p.id].dataheight:J[a(this)[0].p.id].dataheight+"px";x=isNaN(J[a(this)[0].p.id].datawidth)?J[a(this)[0].p.id].datawidth:J[a(this)[0].p.id].datawidth+"px";H=a("<form name='FormPost' id='"+t+"' class='FormGrid' style='width:"+x+";height:"+H+";'></form>");var F=a("<table id='"+u+"' class='EditTable ViewTable'><tbody></tbody></table>");a(q.p.colModel).each(function(){var z=this.formoptions;w=Math.max(w,
z?z.colpos||0:0);A=Math.max(A,z?z.rowpos||0:0)});a(H).append(F);x=a(q).triggerHandler("jqGridViewRowBeforeInitData",[H]);void 0===x&&(x=!0);x&&a.jgrid.isFunction(J[q.p.id].beforeInitData)&&(x=J[q.p.id].beforeInitData.call(q,H));if(!1!==x){(function(z,O,U,S){var K,ba,T,W=0,qa,va,ma=[],xa=!1,ta,ua="<td class='CaptionTD form-view-label "+g.content+"' width='"+e.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+g.content+"'></td>",fa="",Y="<td class='CaptionTD form-view-label "+g.content+
"'></td><td class='DataTD form-view-data "+g.content+"'></td>",G=["integer","number","currency"],L=0,X=0,da,Z;for(ta=1;ta<=S;ta++)fa+=1===ta?ua:Y;a(O.p.colModel).each(function(){(ba=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,G)?L=Math.max(L,parseInt(this.width,10)):X=Math.max(X,parseInt(this.width,10)))});var ea=0!==L?L:0!==X?X:0;xa=a(O).jqGrid("getInd",z);a(O.p.colModel).each(function(pa){K=this.name;
da=!1;va=(ba=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";Z="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==K&&"subgrid"!==K&&"rn"!==K&&Z&&"sc"!==K){qa=!1===xa?"":K===O.p.ExpandColumn&&!0===O.p.treeGrid?a("td",O.rows[xa]).eq(pa).text():a("td",O.rows[xa]).eq(pa).html();da="right"===this.align&&0!==ea?!0:!1;var wa=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),Aa=parseInt(wa.rowpos,10)||W+1,Ba=parseInt(2*(parseInt(wa.colpos,
10)||1),10);if(wa.rowabove){var la=a("<tr><td class='contentinfo' colspan='"+2*S+"'>"+wa.rowcontent+"</td></tr>");a(U).append(la);la[0].rp=Aa}T=a(U).find("tr[rowpos="+Aa+"]");0===T.length&&(T=a("<tr "+va+" rowpos='"+Aa+"'></tr>").addClass("FormData").attr("id","trv_"+K),a(T).append(fa),a(U).append(T),T[0].rp=Aa);a("td",T[0]).eq(Ba-2).html("<b>"+(void 0===wa.label?O.p.colNames[pa]:wa.label)+"</b>");a("td",T[0]).eq(Ba-1).append("<span>"+qa+"</span>").attr("id","v_"+K);da&&a("td",T[0]).eq(Ba-1).find("span").css({"text-align":"right",
width:ea+"px"});ma[W]=pa;W++}});0<W&&(z=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*S-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+z+"'/></td></tr>"),z[0].rp=W+99,a(U).append(z));return ma})(c,q,F,w);u="rtl"===q.p.direction?!0:!1;x="<a id='"+(u?"nData":"pData")+"' class='fm-button "+g.button+"'><span class='"+g.icon_base+" "+h.icon_prev+"'></span></a>";var B="<a id='"+(u?"pData":"nData")+"' class='fm-button "+
g.button+"'><span class='"+g.icon_base+" "+h.icon_next+"'></span></a>",E="<a id='cData' class='fm-button "+g.button+"'>"+e.bClose+"</a>";E=Array.isArray(J[q.p.id].buttons)?a.jgrid.buildButtons(J[q.p.id].buttons,E,g):E;if(0<A){var R=[];a.each(a(F)[0].rows,function(z,O){R[z]=O});R.sort(function(z,O){return z.rp>O.rp?1:z.rp<O.rp?-1:0});a.each(R,function(z,O){a("tbody",F).append(O)})}e.gbox="#gbox_"+a.jgrid.jqID(r);H=a("<div></div>").append(H).append("<table border='0' class='EditTable' id='"+v+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+
e.labelswidth+"'>"+(u?B+x:x+B)+"</td><td class='EditButton'>"+E+"</td></tr></tbody></table>");x=a(".ui-jqgrid").css("font-size")||"11px";a.jgrid.createModal(n,H,J[a(this)[0].p.id],"#gview_"+a.jgrid.jqID(q.p.id),a("#gview_"+a.jgrid.jqID(q.p.id))[0],null,{"font-size":x});u&&(a("#pData, #nData","#"+v+"_2").css("float","right"),a(".EditButton","#"+v+"_2").css("text-align","left"));e.viewPagerButtons||a("#pData, #nData","#"+v+"_2").hide();H=null;a("#"+n.themodal).keydown(function(z){if(27===z.which)return J[q.p.id].closeOnEscape&&
a.jgrid.hideModal("#"+a.jgrid.jqID(n.themodal),{gb:e.gbox,jqm:e.jqModal,onClose:e.onClose,removemodal:J[q.p.id].removemodal,formprop:!J[q.p.id].recreateForm,form:J[q.p.id].form}),!1;if(!0===e.navkeys[0]){if(z.which===e.navkeys[1])return a("#pData","#"+v+"_2").trigger("click"),!1;if(z.which===e.navkeys[2])return a("#nData","#"+v+"_2").trigger("click"),!1}});e.closeicon=a.extend([!0,"left",h.icon_close],e.closeicon);!0===e.closeicon[0]&&a("#cData","#"+v+"_2").addClass("right"===e.closeicon[1]?"fm-button-icon-right":
"fm-button-icon-left").append("<span class='"+g.icon_base+" "+e.closeicon[2]+"'></span>");a(q).triggerHandler("jqGridViewRowBeforeShowForm",[a("#"+p)]);a.jgrid.isFunction(e.beforeShowForm)&&e.beforeShowForm.call(q,a("#"+p));a.jgrid.viewModal("#"+a.jgrid.jqID(n.themodal),{gbox:"#gbox_"+a.jgrid.jqID(r),jqm:e.jqModal,overlay:e.overlay,modal:e.modal,onHide:function(z){var O="rtl"===a("#gbox_"+a.jgrid.jqID(r)).attr("dir")?!0:!1,U=parseFloat(a("#viewmod"+r)[0].style.width);a(q).data("viewProp",{top:parseFloat(a(z.w).css("top")),
left:O?a("#gbox_"+a.jgrid.jqID(r)).outerWidth()-U-parseFloat(a(z.w).css("left"))+12:parseFloat(a(z.w).css("left")),width:a(z.w).width(),height:a(z.w).height(),dataheight:a("#"+p).height(),datawidth:a("#"+p).width()});z.w.remove();z.o&&z.o.remove()}});a(".fm-button:not(."+g.disabled+")","#"+v+"_2").hover(function(){a(this).addClass(g.hover)},function(){a(this).removeClass(g.hover)});b();a("#cData","#"+v+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(n.themodal),{gb:"#gbox_"+a.jgrid.jqID(r),
jqm:e.jqModal,onClose:e.onClose,removemodal:J[q.p.id].removemodal,formprop:!J[q.p.id].recreateForm,form:J[q.p.id].form});return!1});a("#"+v+"_2").find("[data-index]").each(function(){var z=parseInt(a(this).attr("data-index"),10);if(0<=z&&e.buttons[z].hasOwnProperty("click"))a(this).on("click",function(O){e.buttons[z].click.call(q,a("#"+t)[0],J[q.p.id],O)})});a("#nData","#"+v+"_2").click(function(){a("#FormError","#"+v).hide();var z=m();z[0]=parseInt(z[0],10);-1!==z[0]&&z[1][z[0]+1]&&(a(q).triggerHandler("jqGridViewRowClickPgButtons",
["next",a("#"+p),z[1][z[0]]]),a.jgrid.isFunction(e.onclickPgButtons)&&e.onclickPgButtons.call(q,"next",a("#"+p),z[1][z[0]]),k(z[1][z[0]+1],q),q.p.multiselect&&J[q.p.id].viewselected||a(q).jqGrid("setSelection",z[1][z[0]+1]),a(q).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",a("#"+p),z[1][z[0]+1]]),a.jgrid.isFunction(e.afterclickPgButtons)&&e.afterclickPgButtons.call(q,"next",a("#"+p),z[1][z[0]+1]),l(z[0]+1,z));b();return!1});a("#pData","#"+v+"_2").click(function(){a("#FormError","#"+v).hide();
var z=m();-1!==z[0]&&z[1][z[0]-1]&&(a(q).triggerHandler("jqGridViewRowClickPgButtons",["prev",a("#"+p),z[1][z[0]]]),a.jgrid.isFunction(e.onclickPgButtons)&&e.onclickPgButtons.call(q,"prev",a("#"+p),z[1][z[0]]),k(z[1][z[0]-1],q),q.p.multiselect&&J[q.p.id].viewselected||a(q).jqGrid("setSelection",z[1][z[0]-1]),a(q).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",a("#"+p),z[1][z[0]-1]]),a.jgrid.isFunction(e.afterclickPgButtons)&&e.afterclickPgButtons.call(q,"prev",a("#"+p),z[1][z[0]-1]),l(z[0]-
1,z));b();return!1});H=m();l(H[0],H);this.refreshViewForm=function(z,O){void 0===O&&(O=!1);(O||c===z)&&k(z,this);O&&(c=z)}}}})},delGridRow:function(c,e){var d=a.jgrid.getRegional(this[0],"del"),f=this[0].p.styleUI,h=a.jgrid.styleUI[f].formedit,g=a.jgrid.styleUI[f].common;e=a.extend(!0,{top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,
afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},d,e||{});J[a(this)[0].p.id]=e;return this.each(function(){var b=this;if(b.grid&&c){var k=b.p.id,l={},m=!0,q="DelTbl_"+a.jgrid.jqID(k),r,p,v,t,u="DelTbl_"+k,n={themodal:"delmod"+k,modalhead:"delhd"+k,modalcontent:"delcnt"+k,scrollelm:q};J[b.p.id].styleUI=b.p.styleUI||"jQueryUI";Array.isArray(c)&&(c=c.join());if(void 0!==a("#"+a.jgrid.jqID(n.themodal))[0]){m=
a(b).triggerHandler("jqGridDelRowBeforeInitData",[a("#"+q)]);void 0===m&&(m=!0);m&&a.jgrid.isFunction(J[b.p.id].beforeInitData)&&(m=J[b.p.id].beforeInitData.call(b,a("#"+q)));if(!1===m)return;a("#DelData>td","#"+q).text(c);a("#DelError","#"+q).hide();!0===J[b.p.id].processing&&(J[b.p.id].processing=!1,a("#dData","#"+q).removeClass(g.active))}else{m=isNaN(J[b.p.id].dataheight)?J[b.p.id].dataheight:J[b.p.id].dataheight+"px";var x=isNaN(e.datawidth)?e.datawidth:e.datawidth+"px";m="<div id='"+u+"' class='formdata' style='width:"+
x+";overflow:auto;position:relative;height:"+m+";'><table class='DelTable'><tbody><tr id='DelError' style='display:none'><td class='"+(g.error+"'></td></tr>");m+="<tr id='DelData' style='display:none'><td >"+c+"</td></tr>";m+='<tr><td class="delmsg" style="white-space:pre;">'+J[b.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>";m+="</tbody></table></div>";x="<a id='dData' class='fm-button "+g.button+"'>"+e.bSubmit+"</a>";var w="<a id='eData' class='fm-button "+g.button+"'>"+e.bCancel+"</a>";x=Array.isArray(J[b.p.id].buttons)?
a.jgrid.buildButtons(J[b.p.id].buttons,x+w,g):x+w;w=a(".ui-jqgrid").css("font-size")||"11px";m+="<table class='EditTable ui-common-table' id='"+q+"_2'><tbody><tr><td><hr class='"+g.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+x+"</td></tr></tbody></table>";e.gbox="#gbox_"+a.jgrid.jqID(k);a.jgrid.createModal(n,m,J[b.p.id],"#gview_"+a.jgrid.jqID(b.p.id),a("#gview_"+a.jgrid.jqID(b.p.id))[0],null,{"font-size":w});a(".fm-button","#"+q+"_2").hover(function(){a(this).addClass(g.hover)},
function(){a(this).removeClass(g.hover)});e.delicon=a.extend([!0,"left",h.icon_del],J[b.p.id].delicon);e.cancelicon=a.extend([!0,"left",h.icon_cancel],J[b.p.id].cancelicon);!0===e.delicon[0]&&a("#dData","#"+q+"_2").addClass("right"===e.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+g.icon_base+" "+e.delicon[2]+"'></span>");!0===e.cancelicon[0]&&a("#eData","#"+q+"_2").addClass("right"===e.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+
g.icon_base+" "+e.cancelicon[2]+"'></span>");a("#dData","#"+q+"_2").click(function(){var A=[!0,""],H=a("#DelData>td","#"+q).text();l={};l=a(b).triggerHandler("jqGridDelRowClickSubmit",[J[b.p.id],H]);void 0===l&&a.jgrid.isFunction(J[b.p.id].onclickSubmit)&&(l=J[b.p.id].onclickSubmit.call(b,J[b.p.id],H)||{});A=a(b).triggerHandler("jqGridDelRowBeforeSubmit",[H]);void 0===A&&(A=[!0,"",""]);A[0]&&a.jgrid.isFunction(J[b.p.id].beforeSubmit)&&(A=J[b.p.id].beforeSubmit.call(b,H));if(A[0]&&!J[b.p.id].processing){J[b.p.id].processing=
!0;v=b.p.prmNames;r=a.extend({},J[b.p.id].delData,l);t=v.oper;r[t]=v.deloper;p=v.id;H=String(H).split(",");if(!H.length)return!1;for(B in H)H.hasOwnProperty(B)&&(H[B]=a.jgrid.stripPref(b.p.idPrefix,H[B]));r[p]=H.join();a(this).addClass(g.active);var F=a.extend({url:J[b.p.id].url||a(b).jqGrid("getGridParam","editurl"),type:J[b.p.id].mtype,data:a.jgrid.isFunction(J[b.p.id].serializeDelData)?J[b.p.id].serializeDelData.call(b,r):r,success:function(E,R,z){a("#dData","#"+q+"_2").removeClass(g.active);300<=
z.status&&304!==z.status?(A[0]=!1,A[1]=a(b).triggerHandler("jqGridDelRowErrorTextFormat",[z]),a.jgrid.isFunction(J[b.p.id].errorTextFormat)&&(A[1]=J[b.p.id].errorTextFormat.call(b,z)),void 0===A[1]&&(A[1]=R+" Status: '"+z.statusText+"'. Error code: "+z.status)):(A=a(b).triggerHandler("jqGridDelRowAfterSubmit",[z,r]),void 0===A&&(A=[!0,"",""]),A[0]&&a.jgrid.isFunction(J[b.p.id].afterSubmit)&&(A=J[b.p.id].afterSubmit.call(b,z,r)));if(!1===A[0])a("#DelError>td","#"+q).html(A[1]),a("#DelError","#"+q).show();
else{if(J[b.p.id].reloadAfterSubmit&&"local"!==b.p.datatype)a(b).trigger("reloadGrid");else{if(!0===b.p.treeGrid)try{a(b).jqGrid("delTreeNode",b.p.idPrefix+H[0],!0)}catch(O){}else for(E=0;E<H.length;E++)a(b).jqGrid("delRowData",b.p.idPrefix+H[E]);b.p.selrow=null;b.p.selarrrow=[]}(a.jgrid.isFunction(J[b.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(a._data(a(b)[0],"events"),"jqGridDelRowAfterComplete"))&&setTimeout(function(){a(b).triggerHandler("jqGridDelRowAfterComplete",[z,r]);try{J[b.p.id].afterComplete.call(b,
z,r)}catch(O){}},500)}J[b.p.id].processing=!1;A[0]&&a.jgrid.hideModal("#"+a.jgrid.jqID(n.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:e.jqModal,onClose:J[b.p.id].onClose})}},a.jgrid.ajaxOptions,J[b.p.id].ajaxDelOptions);F.url||J[b.p.id].useDataProxy||(a.jgrid.isFunction(b.p.dataProxy)?J[b.p.id].useDataProxy=!0:(A[0]=!1,A[1]+=" "+a.jgrid.getRegional(b,"errors.nourl")));if(A[0])if(J[b.p.id].useDataProxy){var B=b.p.dataProxy.call(b,F,"del_"+b.p.id);void 0===B&&(B=[!0,""]);!1===B[0]?(A[0]=!1,A[1]=B[1]||
"Error deleting the selected row!"):a.jgrid.hideModal("#"+a.jgrid.jqID(n.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:e.jqModal,onClose:J[b.p.id].onClose})}else"clientArray"===F.url?(r=F.data,F.success(H,"",{status:200,statusText:""})):"storage"===F.url?a(b).jqGrid("deleteStorageRecord",H).then(function(E){"complete"===E.type&&F.success(H,"",{status:200,statusText:""})}).catch(function(E){a.jgrid.info_dialog("Error",E.target.error.name+" : "+E.target.error.message,"Close")}):a.ajax(F)}!1===A[0]&&(a("#DelError>td",
"#"+q).html(A[1]),a("#DelError","#"+q).show());return!1});a("#eData","#"+q+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(n.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:J[b.p.id].jqModal,onClose:J[b.p.id].onClose});return!1});a("#"+q+"_2").find("[data-index]").each(function(){var A=parseInt(a(this).attr("data-index"),10);if(0<=A&&e.buttons[A].hasOwnProperty("click"))a(this).on("click",function(H){e.buttons[A].click.call(b,a("#"+u)[0],J[b.p.id],H)})});m=a(b).triggerHandler("jqGridDelRowBeforeInitData",
[a("#"+q)]);void 0===m&&(m=!0);m&&a.jgrid.isFunction(J[b.p.id].beforeInitData)&&(m=J[b.p.id].beforeInitData.call(b,a("#"+q)));if(!1===m)return}a(b).triggerHandler("jqGridDelRowBeforeShowForm",[a("#"+q)]);a.jgrid.isFunction(J[b.p.id].beforeShowForm)&&J[b.p.id].beforeShowForm.call(b,a("#"+q));a.jgrid.viewModal("#"+a.jgrid.jqID(n.themodal),{gbox:"#gbox_"+a.jgrid.jqID(k),jqm:J[b.p.id].jqModal,overlay:J[b.p.id].overlay,modal:J[b.p.id].modal});a(b).triggerHandler("jqGridDelRowAfterShowForm",[a("#"+q)]);
a.jgrid.isFunction(J[b.p.id].afterShowForm)&&J[b.p.id].afterShowForm.call(b,a("#"+q));!0===J[b.p.id].closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(n.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(c,e,d,f,h,g,b){var k=a.jgrid.getRegional(this[0],"nav"),l=this[0].p.styleUI,m=a.jgrid.styleUI[l].navigator,q=a.jgrid.styleUI[l].common;e=a.extend({edit:!0,editicon:m.icon_edit_nav,add:!0,addicon:m.icon_add_nav,del:!0,delicon:m.icon_del_nav,search:!0,
searchicon:m.icon_search_nav,refresh:!0,refreshicon:m.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:m.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},k,e||{});return this.each(function(){if(!this.p.navGrid){var r=this;if(r.grid&&"string"===typeof c){a(r).data("navGrid")||a(r).data("navGrid",e);var p=a(r).data("navGrid");r.p.force_regional&&
(p=a.extend(p,k));if(!p.alerttop&&!p.alertleft){var v=a.jgrid.findPos(this);v[0]=Math.round(v[0]);v[1]=Math.round(v[1]);var t=isNaN(this.p.height)?a(r.grid.bDiv).height():this.p.height;0===t&&(t=200);p.alertleft=v[0]+this.p.width/2-parseInt(p.alertwidth,10)/2;p.alerttop=v[1]+t/2-25}var u=function(){a.jgrid.info_dialog(p.alertcap,"<div>"+p.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>","",{jqModal:!0,drag:!0,resize:!0,caption:p.alertcap,width:p.alertwidth,height:p.alertheight,
top:p.alerttop,left:p.alertleft,closeOnEscape:p.closeOnEscape,styleUI:r.p.styleUI,zIndex:p.alertzIndex})};v=1;var n=function(){a(this).hasClass(q.disabled)||a(this).addClass(q.hover)},x=function(){a(this).removeClass(q.hover)};p.cloneToTop&&r.p.toppager&&(v=2);for(t=0;t<v;t++){var w=a("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),A="<td class='ui-pg-button "+q.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";if(0===t){var H=c;0===H.indexOf("#")&&
(H=H.substring(1),H="#"+a.jgrid.jqID(H));var F=r.p.id;H===r.p.toppager&&(F+="_top",v=1)}else H=r.p.toppager,F=r.p.id+"_top";"rtl"===r.p.direction&&a(w).attr("dir","rtl").css("float","right");f=f||{};if(p.add){var B=a("<td class='ui-pg-button "+q.cornerall+"'></td>");a(B).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+p.addicon+"'></span>"+p.addtext+"</div>");a("tr",w).append(B);a(B,w).attr({title:p.addtitle||"",id:f.id||"add_"+F}).click(function(){a(this).hasClass(q.disabled)||(a.jgrid.setSelNavIndex(r,
this),a.jgrid.isFunction(p.addfunc)?p.addfunc.call(r):a(r).jqGrid("editGridRow","new",f));return!1}).hover(n,x);B=null}d=d||{};p.edit&&(B=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(B).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+p.editicon+"'></span>"+p.edittext+"</div>"),a("tr",w).append(B),a(B,w).attr({title:p.edittitle||"",id:d.id||"edit_"+F}).click(function(){if(!a(this).hasClass(q.disabled)){var E=r.p.selrow;E?(a.jgrid.setSelNavIndex(r,this),a.jgrid.isFunction(p.editfunc)?
p.editfunc.call(r,E):a(r).jqGrid("editGridRow",E,d)):(u(),a("#jqg_alrt").focus())}return!1}).hover(n,x),B=null);b=b||{};p.view&&(B=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(B).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+p.viewicon+"'></span>"+p.viewtext+"</div>"),a("tr",w).append(B),a(B,w).attr({title:p.viewtitle||"",id:b.id||"view_"+F}).click(function(){if(!a(this).hasClass(q.disabled)){var E=r.p.selrow;E?(a.jgrid.setSelNavIndex(r,this),a.jgrid.isFunction(p.viewfunc)?
p.viewfunc.call(r,E):a(r).jqGrid("viewGridRow",E,b)):(u(),a("#jqg_alrt").focus())}return!1}).hover(n,x),B=null);h=h||{};p.del&&(B=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(B).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+p.delicon+"'></span>"+p.deltext+"</div>"),a("tr",w).append(B),a(B,w).attr({title:p.deltitle||"",id:h.id||"del_"+F}).click(function(){if(!a(this).hasClass(q.disabled)){if(r.p.multiselect){var E=r.p.selarrrow;0===E.length&&(E=null)}else E=r.p.selrow;E?(a.jgrid.setSelNavIndex(r,
this),a.jgrid.isFunction(p.delfunc)?p.delfunc.call(r,E):a(r).jqGrid("delGridRow",E,h)):u()}return!1}).hover(n,x),B=null);(p.add||p.edit||p.del||p.view)&&a("tr",w).append(A);g=g||{};p.search&&(B=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(B).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+p.searchicon+"'></span>"+p.searchtext+"</div>"),a("tr",w).append(B),a(B,w).attr({title:p.searchtitle||"",id:g.id||"search_"+F}).click(function(){a(this).hasClass(q.disabled)||(a.jgrid.setSelNavIndex(r,
this),a.jgrid.isFunction(p.searchfunc)?p.searchfunc.call(r,g):a(r).jqGrid("searchGrid",g));return!1}).hover(n,x),g.showOnLoad&&!0===g.showOnLoad&&a(B,w).click(),B=null);p.refresh&&(B=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(B).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+p.refreshicon+"'></span>"+p.refreshtext+"</div>"),a("tr",w).append(B),a(B,w).attr({title:p.refreshtitle||"",id:"refresh_"+F}).click(function(){if(!a(this).hasClass(q.disabled)){a.jgrid.isFunction(p.beforeRefresh)&&
p.beforeRefresh.call(r);r.p.search=!1;r.p.resetsearch=!0;try{if("currentfilter"!==p.refreshstate){var E=r.p.id;r.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(E)).jqFilter("resetFilter")}catch(R){}a.jgrid.isFunction(r.clearToolbar)&&r.clearToolbar.call(r,!1)}}catch(R){}switch(p.refreshstate){case "firstpage":a(r).trigger("reloadGrid",[{page:1}]);break;case "current":case "currentfilter":a(r).trigger("reloadGrid",[{current:!0}])}a.jgrid.isFunction(p.afterRefresh)&&p.afterRefresh.call(r);a.jgrid.setSelNavIndex(r,
this)}return!1}).hover(n,x),B=null);B=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid "+a.jgrid.styleUI[l].base.entrieBox+"' style='font-size:"+B+";visibility:hidden;' ></div>");B=a(w).clone().appendTo("#testpg2").width();a("#testpg2").remove();r.p._nvtd&&(p.dropmenu?(w=null,a(r).jqGrid("_buildNavMenu",H,F,a.extend(e,{ainfo:u}),d,f,h,g,b)):B>r.p._nvtd[0]?(r.p.responsive?(w=null,a(r).jqGrid("_buildNavMenu",H,F,a.extend(e,{ainfo:u}),d,f,h,g,b)):a(H+"_"+
p.position,H).append(w).width(B),r.p._nvtd[0]=B):a(H+"_"+p.position,H).append(w),r.p._nvtd[1]=B);r.p.navGrid=!0}r.p.storeNavOptions&&(r.p.navOptions=p,r.p.editOptions=d,r.p.addOptions=f,r.p.delOptions=h,r.p.searchOptions=g,r.p.viewOptions=b,r.p.navButtons=[])}}})},navButtonAdd:function(c,e){var d=this[0].p.styleUI;e=a.extend({caption:"newButton",title:"",buttonicon:a.jgrid.styleUI[d].navigator.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},e||{});return this.each(function(){if(this.grid&&
"string"===typeof c){0===c.indexOf("#")&&(c=c.substring(1));c="#"+a.jgrid.jqID(c);var f=a(".navtable",c)[0],h=this,g=a.jgrid.styleUI[d].common.disabled,b=a.jgrid.styleUI[d].common.hover,k=a.jgrid.styleUI[d].common.cornerall,l=a.jgrid.styleUI[d].common.icon_base;h.p.storeNavOptions&&!e.internal&&h.p.navButtons.push([c,e]);if(f){if(!e.id||void 0===a("#"+a.jgrid.jqID(e.id),f)[0]){var m=a("<td></td>");"NONE"===e.buttonicon.toString().toUpperCase()?a(m).addClass("ui-pg-button "+k).append("<div class='ui-pg-div'>"+
e.caption+"</div>"):a(m).addClass("ui-pg-button "+k).append("<div class='ui-pg-div'><span class='"+l+" "+e.buttonicon+"'></span>"+e.caption+"</div>");e.id&&a(m).attr("id",e.id);"first"===e.position?0===f.rows[0].cells.length?a("tr",f).append(m):a("tr td",f).eq(0).before(m):a("tr",f).append(m);a(m,f).attr("title",e.title||"").click(function(r){a(this).hasClass(g)||(a.jgrid.setSelNavIndex(h,this),a.jgrid.isFunction(e.onClickButton)&&e.onClickButton.call(h,r));return!1}).hover(function(){a(this).hasClass(g)||
a(this).addClass(b)},function(){a(this).removeClass(b)})}}else if(f=a(".dropdownmenu",c)[0]){var q=a(f).val();f=e.id||a.jgrid.randId();k=a('<li class="ui-menu-item" role="presentation"><a class="'+k+' g-menu-item" tabindex="0" role="menuitem" id="'+f+'">'+(e.caption||e.title)+"</a></li>");q&&("first"===e.position?a("#"+q).prepend(k):a("#"+q).append(k),a(k).on("click",function(r){a(this).hasClass(g)||(a("#"+q).hide(),a.jgrid.isFunction(e.onClickButton)&&e.onClickButton.call(h,r));return!1}).find("a").hover(function(){a(this).hasClass(g)||
a(this).addClass(b)},function(){a(this).removeClass(b)}))}}})},navSeparatorAdd:function(c,e){var d=a.jgrid.styleUI[this[0].p.styleUI].common;e=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},e||{});return this.each(function(){if(this.grid){"string"===typeof c&&0!==c.indexOf("#")&&(c="#"+a.jgrid.jqID(c));var f=a(".navtable",c)[0];this.p.storeNavOptions&&this.p.navButtons.push([c,e]);if(f){var h="<td class='ui-pg-button "+d.disabled+"' style='width:4px;'><span class='"+e.sepclass+"'></span>"+
e.sepcontent+"</td>";"first"===e.position?0===f.rows[0].cells.length?a("tr",f).append(h):a("tr td",f).eq(0).before(h):a("tr",f).append(h)}else f=a(".dropdownmenu",c)[0],h="<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",f&&(f=a(f).val())&&("first"===e.position?a("#"+f).prepend(h):a("#"+f).append(h))}})},_buildNavMenu:function(c,e,d,f,h,g,b,k){return this.each(function(){var l=this,m=a.jgrid.getRegional(l,"nav"),q=l.p.styleUI,r=a.jgrid.styleUI[q].filter,
p=a.jgrid.styleUI[q].common,v="form_menu_"+a.jgrid.randId();m="<button class='dropdownmenu "+p.button+"' value='"+v+"'>"+(d.navButtonText?d.navButtonText:m.selectcaption||"Actions")+"</button>";a(c+"_"+d.position,c).append(m);(function(){var t=a(".ui-jqgrid").css("font-size")||"11px",u=a('<ul id="'+v+'" class="ui-nav-menu modal-content ui-menu column-menu jqgrid-column-menu '+p.shadow+'" role="menu" tabindex="0" style="display:none;font-size:'+t+'"></ul>');d.add&&(h=h||{},t=h.id||"add_"+e,t=a('<li class="ui-menu-item" role="presentation"><a class="'+
p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+t+'">'+(d.addtext.trim()||d.addtitle)+"</a></li>").click(function(){a(this).hasClass(p.disabled)||(a.jgrid.isFunction(d.addfunc)?d.addfunc.call(l):a(l).jqGrid("editGridRow","new",h),a(u).hide());return!1}),a(u).append(t));d.edit&&(f=f||{},t=f.id||"edit_"+e,t=a('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+t+'">'+(d.edittext.trim()||d.edittitle)+"</a></li>").click(function(){if(!a(this).hasClass(p.disabled)){var n=
l.p.selrow;n?a.jgrid.isFunction(d.editfunc)?d.editfunc.call(l,n):a(l).jqGrid("editGridRow",n,f):(d.ainfo(),a("#jqg_alrt").focus());a(u).hide()}return!1}),a(u).append(t));d.view&&(k=k||{},t=k.id||"view_"+e,t=a('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+t+'">'+(d.viewtext.trim()||d.viewtitle)+"</a></li>").click(function(){if(!a(this).hasClass(p.disabled)){var n=l.p.selrow;n?a.jgrid.isFunction(d.editfunc)?d.viewfunc.call(l,
n):a(l).jqGrid("viewGridRow",n,k):(d.ainfo(),a("#jqg_alrt").focus());a(u).hide()}return!1}),a(u).append(t));d.del&&(g=g||{},t=g.id||"del_"+e,t=a('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+t+'">'+(d.deltext.trim()||d.deltitle)+"</a></li>").click(function(){if(!a(this).hasClass(p.disabled)){if(l.p.multiselect){var n=l.p.selarrrow;0===n.length&&(n=null)}else n=l.p.selrow;n?a.jgrid.isFunction(d.delfunc)?d.delfunc.call(l,n):a(l).jqGrid("delGridRow",
n,g):d.ainfo();a(u).hide()}return!1}),a(u).append(t));(d.add||d.edit||d.del||d.view)&&a(u).append("<li class='ui-menu-item "+p.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>");d.search&&(b=b||{},t=b.id||"search_"+e,t=a('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+t+'">'+(d.searchtext.trim()||d.searchtitle)+"</a></li>").click(function(){a(this).hasClass(p.disabled)||(a.jgrid.isFunction(d.searchfunc)?
d.searchfunc.call(l,b):a(l).jqGrid("searchGrid",b),a(u).hide());return!1}),a(u).append(t),b.showOnLoad&&!0===b.showOnLoad&&a(t).click());d.refresh&&(t=b.id||"search_"+e,t=a('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+t+'">'+(d.refreshtext||d.refreshtitle)+"</a></li>").click(function(){if(!a(this).hasClass(p.disabled)){a.jgrid.isFunction(d.beforeRefresh)&&d.beforeRefresh.call(l);l.p.search=!1;l.p.resetsearch=!0;try{if("currentfilter"!==
d.refreshstate){var n=l.p.id;l.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(n)).jqFilter("resetFilter")}catch(x){}a.jgrid.isFunction(l.clearToolbar)&&l.clearToolbar.call(l,!1)}}catch(x){}switch(d.refreshstate){case "firstpage":a(l).trigger("reloadGrid",[{page:1}]);break;case "current":case "currentfilter":a(l).trigger("reloadGrid",[{current:!0}])}a.jgrid.isFunction(d.afterRefresh)&&d.afterRefresh.call(l);a(u).hide()}return!1}),a(u).append(t));a(u).hide();a("body").append(u);a("#"+v).addClass("ui-menu "+
r.menu_widget);a("#"+v+" > li > a").hover(function(){a(this).addClass(p.hover)},function(){a(this).removeClass(p.hover)})})();a(".dropdownmenu",c+"_"+d.position).on("click",function(t){var u=a(this).offset(),n=u.left;u=parseInt(u.top);var x=a(this).val();a("#"+x).show().css({top:u-(a("#"+x).height()+35)+"px",left:n+"px"});t.stopPropagation()});a("body").on("click",function(t){a(t.target).hasClass("dropdownmenu")||a("#"+v).hide()})})},GridToForm:function(c,e){return this.each(function(){var d=this,
f;if(d.grid){var h=a(d).jqGrid("getRowData",c);if(h)for(f in h)h.hasOwnProperty(f)&&(a("[name="+a.jgrid.jqID(f)+"]",e).is("input:radio")||a("[name="+a.jgrid.jqID(f)+"]",e).is("input:checkbox")?a("[name="+a.jgrid.jqID(f)+"]",e).each(function(){if(a(this).val()==h[f])a(this)[d.p.useProp?"prop":"attr"]("checked",!0);else a(this)[d.p.useProp?"prop":"attr"]("checked",!1)}):a("[name="+a.jgrid.jqID(f)+"]",e).val(h[f]))}})},FormToGrid:function(c,e,d,f){return this.each(function(){if(this.grid){d||="set";
f||="first";var h=a(e).serializeArray(),g={};a.each(h,function(b,k){g[k.name]=k.value});"add"===d?a(this).jqGrid("addRowData",c,g,f):"set"===d&&a(this).jqGrid("setRowData",c,g)}})}});a.jgrid.extend({groupingInit:function(){return this.each(function(){a.extend(this.p.groupingView,{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],
prepareGroupField:null,groupRowNumbers:!1,_locgr:!1},!0)})},groupingSetup:function(){return this.each(function(){var c=this.p.colModel,e=this.p.groupingView;var d=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].grouping;if(null===e||"object"!==typeof e&&!a.jgrid.isFunction(e))this.p.grouping=!1;else if(e.plusicon||(e.plusicon=d.icon_plus),e.minusicon||(e.minusicon=d.icon_minus),e.groupField.length){void 0===e.visibiltyOnNextGrouping&&(e.visibiltyOnNextGrouping=[]);e.lastvalues=[];e._locgr||(e.groups=
[]);e.counters=[];for(d=0;d<e.groupField.length;d++){e.groupOrder[d]||(e.groupOrder[d]="asc");e.groupText[d]||(e.groupText[d]="{0}");"boolean"!==typeof e.groupColumnShow[d]&&(e.groupColumnShow[d]=!0);"boolean"!==typeof e.groupSummary[d]&&(e.groupSummary[d]=!1);e.groupSummaryPos[d]||(e.groupSummaryPos[d]="footer");var f=a.jgrid.getElemByAttrVal(this.p.colModel,"name",e.groupField[d],!1).hidden;!0===e.groupColumnShow[d]?(e.visibiltyOnNextGrouping[d]=!0,f&&a(this).jqGrid("showCol",e.groupField[d])):
(e.visibiltyOnNextGrouping[d]=a("#"+a.jgrid.jqID(this.p.id+"_"+e.groupField[d])).is(":visible"),f||a(this).jqGrid("hideCol",e.groupField[d]))}e.summary=[];e.hideFirstGroupCol&&Array.isArray(e.formatDisplayField)&&!a.jgrid.isFunction(e.formatDisplayField[0])&&(e.formatDisplayField[0]=function(h){return h});d=0;for(f=c.length;d<f;d++)e.hideFirstGroupCol&&!c[d].hidden&&e.groupField[0]===c[d].name&&(c[d].formatter=function(){return""}),c[d].summaryType&&(c[d].summaryDivider?e.summary.push({nm:c[d].name,
st:c[d].summaryType,v:"",sd:c[d].summaryDivider,vd:"",sr:c[d].summaryRound,srt:c[d].summaryRoundType||"round"}):e.summary.push({nm:c[d].name,st:c[d].summaryType,v:"",sr:c[d].summaryRound,srt:c[d].summaryRoundType||"round"}))}else this.p.grouping=!1})},groupingPrepare:function(c,e){this.each(function(){var d=this.p.groupingView,f=this,h,g=function(){a.jgrid.isFunction(this.st)?this.v=this.st.call(f,this.v,this.nm,c):(this.v=a(f).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,
this.srt,c),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=a(f).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,c)))},b=d.groupField.length,k=a.jgrid.isFunction(d.prepareGroupField),l=0;for(h=0;h<b;h++){var m=d.groupField[h];var q=d.displayField[h];var r=c[m];q=null==q?null:c[q];k&&(r=d.prepareGroupField(r,m,c));null==q&&(q=r);void 0!==r&&(0===e?(d.groups.push({idx:h,dataIndex:m,value:r,displayValue:q,startRow:e,cnt:1,summary:[]}),d.lastvalues[h]=r,d.counters[h]={cnt:1,
pos:d.groups.length-1,summary:a.extend(!0,[],d.summary)}):"object"===typeof r||(Array.isArray(d.isInTheSameGroup)&&a.jgrid.isFunction(d.isInTheSameGroup[h])?d.isInTheSameGroup[h].call(f,d.lastvalues[h],r,h,d):d.lastvalues[h]===r)?1===l?(d.groups.push({idx:h,dataIndex:m,value:r,displayValue:q,startRow:e,cnt:1,summary:[]}),d.lastvalues[h]=r,d.counters[h]={cnt:1,pos:d.groups.length-1,summary:a.extend(!0,[],d.summary)}):(d.counters[h].cnt+=1,d.groups[d.counters[h].pos].cnt=d.counters[h].cnt):(d.groups.push({idx:h,
dataIndex:m,value:r,displayValue:q,startRow:e,cnt:1,summary:[]}),d.lastvalues[h]=r,l=1,d.counters[h]={cnt:1,pos:d.groups.length-1,summary:a.extend(!0,[],d.summary)}),a.each(d.counters[h].summary,g),d.groups[d.counters[h].pos].summary=d.counters[h].summary)}});return this},groupingToggle:function(c){this.each(function(){var e=this.p.groupingView,d=c.split("_"),f=parseInt(d[d.length-2],10);d.splice(d.length-2,2);var h=d.join("_");d=e.minusicon;var g=e.plusicon,b=a("#"+a.jgrid.jqID(c));b=b.length?b[0].nextSibling:
null;var k=a("#"+a.jgrid.jqID(c)+" span.tree-wrap-"+this.p.direction),l=function(v){v=a.map(v.split(" "),function(t){if(t.substring(0,h.length+1)===h+"_")return parseInt(t.substring(h.length+1),10)});return 0<v.length?v[0]:void 0},m=!1,q=!1;if(k.hasClass(d)){if(b)for(;b;){var r=l(b.className);if(void 0!==r&&r<=f)break;var p=parseInt(a(b).attr("jqfootlevel"),10);(q=isNaN(p)?!1:e.showSummaryOnHide&&p<=f)||a(b).hide();b=b.nextSibling}k.removeClass(d).addClass(g);m=!0}else{if(b)for(e=void 0;b;){r=l(b.className);
p=parseInt(a(b).attr("jqfootlevel"),10);void 0===e&&(e=void 0===r);q=a(b).hasClass("ui-subgrid")&&a(b).hasClass("ui-sg-collapsed");if(void 0!==r){if(r<=f)break;r===f+1&&(q||a(b).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(d).addClass(g))}else e?q||a(b).show():!isNaN(p)&&0<=p&&p===f&&a(b).show();b=b.nextSibling}k.removeClass(g).addClass(d)}a(this).triggerHandler("jqGridGroupingClickGroup",[c,m]);a.jgrid.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,c,m)});return!1},
groupingRender:function(c,e,d,f){return this.each(function(){function h(F,B,E){var R=!1;if(0===B)R=E[F];else{var z=E[F].idx;if(0===z)R=E[F];else for(;0<=F;F--)if(E[F].idx===z-B){R=E[F];break}}return R}function g(F,B,E,R,z){var O=h(F,B,E),U=b.p.colModel,S;F="";var K;B=!1;var ba;for(K=R;K<e;K++){if(U[K].hidden)var T='<td role="gridcell" '+b.formatCol(K,1,"")+">&#160;</td>";else!B&&z?(T=z,B=!0):T='<td role="gridcell" '+b.formatCol(K,1,"")+">&#160;</td>";a.each(O.summary,function(){if(this.nm===U[K].name){ba=
U[K].summaryTpl?U[K].summaryTpl:"{0}";S=this.v;try{this.groupCount=O.cnt,this.groupIndex=O.dataIndex,this.groupValue=O.value}catch(W){}T='<td role="gridcell" '+b.formatCol(K,1,"")+">"+a.jgrid.template(ba,S,O.cnt,O.dataIndex,O.displayValue,O.summary)+"</td>";return!1}});F+=T}return F}var b=this,k=b.p.groupingView,l=b.p.rownumbers&&k.groupRowNumbers,m="",q="",r,p,v=k.groupCollapse?k.plusicon:k.minusicon,t,u=[],n=k.groupField.length,x=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].common;v=v+" tree-wrap-"+
b.p.direction;a.each(b.p.colModel,function(F,B){var E;for(E=0;E<n;E++)if(k.groupField[E]===B.name){u[E]=F;break}});var w=0,A=a.makeArray(k.groupSummary);A.reverse();var H=b.p.multiselect||b.p.rownumbers?' colspan="2"':"";b.p.multiselect&&b.p.rownumbers&&(H=' colspan="3"');a.each(k.groups,function(F,B){if(k._locgr&&!(B.startRow+B.cnt>(d-1)*f&&B.startRow<d*f))return!0;w++;p=b.p.id+"ghead_"+B.idx;r=p+"_"+F;q="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+x.icon_base+" "+v+"' onclick=\"jQuery('#"+
a.jgrid.jqID(b.p.id)+"').jqGrid('groupingToggle','"+r+"');return false;\"></span>";try{t=Array.isArray(k.formatDisplayField)&&a.jgrid.isFunction(k.formatDisplayField[B.idx])?k.formatDisplayField[B.idx].call(b,B.displayValue,B.value,b.p.colModel[u[B.idx]],B.idx,k):b.formatter(r,B.displayValue,u[B.idx],B.value)}catch(S){t=B.displayValue}var E;for(E=0;E<B.summary.length;E++){var R=B.summary[E],z=a.jgrid.getElemByAttrVal(b.p.colModel,"name",R.nm,!0);if(0<=z){"string"===typeof R.st&&"avg"===R.st.toLowerCase()&&
(R.sd&&R.vd?R.v/=R.vd:R.v&&0<B.cnt&&(R.v/=B.cnt));R.uv=R.v;try{R.v=b.formatter("",R.v,z,this)}catch(S){}}}E=a.jgrid.isFunction(k.groupText[B.idx])?k.groupText[B.idx].call(b,t,B.cnt,B.summary):a.jgrid.template.call(b,k.groupText[B.idx],t,B.cnt,B.summary);"string"!==typeof E&&"number"!==typeof E&&(E=t);"header"===k.groupSummaryPos[B.idx]?(m+='<tr id="'+r+'"'+(k.groupCollapse&&0<B.idx?' style="display:none;" ':" ")+'role="row" class= "'+x.content+" jqgroup ui-row-"+b.p.direction+" "+p+'">',m+=g(F,0,
k.groups,""===H?0:1,'<td role="gridcell" style="padding-left:'+12*B.idx+'px;"'+H+" "+b.formatCol(0,1,"")+">"+q+E+"</td>"),m+="</tr>"):m+='<tr id="'+r+'"'+(k.groupCollapse&&0<B.idx?' style="display:none;" ':" ")+'role="row" class= "'+x.content+" jqgroup ui-row-"+b.p.direction+" "+p+'"><td class="for-sticky" style="padding-left:'+12*B.idx+'px;">'+q+E+'</td><td colspan="'+(!1===k.groupColumnShow[B.idx]?e-2:e-1)+'"></td></tr>';if(n-1===B.idx){R=k.groups[F+1];z=0;E=B.startRow;var O=void 0!==R?R.startRow:
k.groups[F].startRow+k.groups[F].cnt;k._locgr&&(z=(d-1)*f,z>B.startRow&&(E=z));let S=0;for(;E<O&&c[E-z];E++){if(l){let K=a(c[E-z][1]);K.attr("aria-describedby")===b.id+"_rn"&&(S++,K.attr("title",S+"").text(S+""),c[E-z][1]=K.prop("outerHTML"))}m+=c[E-z].join("")}if("header"!==k.groupSummaryPos[B.idx]){var U;if(void 0!==R){for(U=0;U<k.groupField.length&&R.dataIndex!==k.groupField[U];U++);w=k.groupField.length-U}for(E=0;E<w;E++)A[E]&&(R="",k.groupCollapse&&!k.showSummaryOnHide&&(R=' style="display:none;"'),
m+="<tr"+R+' jqfootlevel="'+(B.idx-E)+'" role="row" class="'+x.content+" jqfoot ui-row-"+b.p.direction+'">',m+=g(F,E,k.groups,0,!1),m+="</tr>");w=U}}});a("#"+a.jgrid.jqID(b.p.id)+" tbody").first().append(m);m=null})},groupingGroupBy:function(c,e){return this.each(function(){"string"===typeof c&&(c=[c]);var d=this.p.groupingView;this.p.grouping=!0;d._locgr=!1;void 0===d.visibiltyOnNextGrouping&&(d.visibiltyOnNextGrouping=[]);var f;for(f=0;f<d.groupField.length;f++)!d.groupColumnShow[f]&&d.visibiltyOnNextGrouping[f]&&
a(this).jqGrid("showCol",d.groupField[f]);for(f=0;f<c.length;f++)d.visibiltyOnNextGrouping[f]=a("#"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(c[f])).is(":visible");this.p.groupingView=a.extend(this.p.groupingView,e||{});d.groupField=c;a(this).trigger("reloadGrid")})},groupingRemove:function(c,e){return this.each(function(){void 0===c&&(c=!0);void 0===e&&(e=!1);this.p.grouping=!1;if(!0===c){var d=this.p.groupingView,f;for(f=0;f<d.groupField.length;f++)!d.groupColumnShow[f]&&d.visibiltyOnNextGrouping[f]&&
a(this).jqGrid("showCol",d.groupField);a("#"+a.jgrid.jqID(this.p.id)+" tbody").first().find("tr.jqgroup, tr.jqfoot").remove();a("#"+a.jgrid.jqID(this.p.id)+" tbody").first().find("tr.jqgrow:hidden").show()}else a(this).trigger("reloadGrid");e&&a(this).jqGrid("groupingInit")})},groupingCalculations:{handler:function(c,e,d,f,h,g){var b={sum:function(){return a.jgrid.floatNum(e)+a.jgrid.floatNum(g[d])},min:function(){return""===e?a.jgrid.floatNum(g[d]):Math.min(a.jgrid.floatNum(e),a.jgrid.floatNum(g[d]))},
max:function(){return""===e?a.jgrid.floatNum(g[d]):Math.max(a.jgrid.floatNum(e),a.jgrid.floatNum(g[d]))},count:function(){""===e&&(e=0);return g.hasOwnProperty(d)?e+1:0},avg:function(){return b.sum()}};if(!b[c])throw"jqGrid Grouping No such method: "+c;c=b[c]();null!=f&&("fixed"===h?c=c.toFixed(f):(f=Math.pow(10,f),c=Math.round(c*f)/f));return c}},groupingResetCalcs:function(){return this.each(function(){this.p.groupingView._locgr=!1})},setColSpanHeader:function(c){return this.each(function(){var e=
0,d,f=this.p.colModel,h=f.length,g=this.grid.headers;var b=a("table.ui-jqgrid-htable",this.grid.hDiv);var k=b.children("thead"),l=b.find(".jqg-first-row-header"),m=!1,q=k.children("tr").length;Array.isArray(c)&&(this.p.colSpanHeader=c);void 0===l[0]?l=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):l.empty();this.p.frozenColumns&&(a(this).jqGrid("destroyFrozenColumns"),m=!0);for(b=0;b<h;b++){e=g[b].el;e=a(e);var r=f[b];e={height:"0px",width:g[b].width+
"px",display:r.hidden?"none":""};a("<th>",{role:"gridcell"}).css(e).addClass("ui-first-th-"+this.p.direction+" "+(r.labelClasses||"")).appendTo(l)}k.prepend(l);a(this).on("jqGridResizeStop.setGroupHeaders",function(x,w,A){l.find("th").eq(A)[0].style.width=w+"px"});for(b=0;b<h;b++){e=g[b].el;e=a(e);r=f[b];var p=a.jgrid.inColumnHeader(r.name,this.p.colSpanHeader);if(0<=p){var v=this.p.colSpanHeader[p];r=v.numberOfColumns;var t=v.titleText||"";var u=v.className||"";var n=v.toolTip||"";for(p=d=0;p<r&&
b+p<h;p++)f[b+p].hidden||d++;if(0<d&&(e.attr("colspan",String(d)),1<q))for(p=1;p<q;p++)a("tr",k).eq(p+1).find("th").eq(b).attr("colspan",String(d));t&&(p=e.find("div.ui-th-div")[0],v.savedLabel=p.innerHTML,p.innerHTML=t,"string"===typeof n&&""!==n?e.attr("title",n):this.p.headertitles&&e.attr("title",t));e.addClass(u);for(e=0;e<r-1;e++)if(a(g[e+b+1].el).hide(),this.p.colModel[e+b+1].hidedlg=!0,this.p.colModel[e+b+1]._colspancell=!0,1<q)for(p=1;p<q;p++)a("tr",k).eq(p+1).find("th").eq(b+e+1).hide()}}m&&
a(this).jqGrid("setFrozenColumns")})},destroyColSpanHeader:function(c){void 0===c&&(c=!0);return this.each(function(){var e,d,f,h,g=a("table.ui-jqgrid-htable",this.grid.hDiv).children("thead");a("tr.jqg-first-row-header",g).remove();if(this.p.colSpanHeader.length)for(f=0;f<this.p.colSpanHeader.length;f++){var b=this.p.colSpanHeader[f];var k=a.jgrid.getElemByAttrVal(this.p.colModel,"name",b.startColumnName,!0);if(!(0>k)){for(d=k+1;d<k+b.numberOfColumns;d++)this.p.colModel[d].hidedlg=!1,this.p.colModel[d]._colspancell=
!1;a(">tr",g).each(function(l,m){h=a("th",m).eq(k);h.className||(h.className="");a(h).attr("colspan","").removeClass(h.className);a(m).hasClass("ui-jqgrid-labels")&&(e=h.find("div.ui-th-div")[0],e.innerHTML=b.savedLabel);for(d=1;d<b.numberOfColumns;d++)a("th",m).eq(k+d).show()})}}c&&(this.p.colSpanHeader=[])})},setGroupHeaders:function(c){c=a.extend({useColSpanStyle:!1,groupHeaders:[]},c||{});return this.each(function(){var e,d=0,f,h=this.p.colModel,g=h.length,b=this.grid.headers,k=a("table.ui-jqgrid-htable",
this.grid.hDiv),l=k.children("thead").children("tr.ui-jqgrid-labels").last().addClass("jqg-second-row-header");var m=k.children("thead");var q=k.find(".jqg-first-row-header"),r=!1,p=!1,v=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].base;this.p.groupHeader||(this.p.groupHeader=[]);this.p.groupHeader.push(c);this.p.groupHeaderOn=!0;void 0===q[0]?q=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):q.empty();this.p.frozenColumns&&(a(this).jqGrid("destroyFrozenColumns"),
p=!0);if(a(document.activeElement).is("input")||a(document.activeElement).is("textarea"))r=document.activeElement;a(this).prepend(m);m=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(e=0;e<g;e++){var t=b[e].el;var u=a(t);var n=h[e];var x={height:"0px",width:b[e].width+"px",display:n.hidden?"none":""};a("<th>",{role:"gridcell"}).css(x).addClass("ui-first-th-"+this.p.direction+" "+(n.labelClasses||"")).appendTo(q);t.style.width="";var w=a.jgrid.inColumnHeader(n.name,c.groupHeaders);
if(0<=w){w=c.groupHeaders[w];d=w.numberOfColumns;var A=w.titleText;x=w.toolTip||"";var H=w.className||"";for(w=f=0;w<d&&e+w<g;w++)h[e+w].hidden||f++;n=a("<th>").attr({role:"columnheader","data-spname":n.name}).addClass(v.headerBox+" ui-th-column-header ui-th-"+this.p.direction+" "+H+" "+(n.labelClasses||"")).html(A);0<f&&n.attr("colspan",String(f));"string"===typeof x&&""!==x?n.attr("title",x):this.p.headertitles&&n.attr("title",n.text());0===f&&n.hide();u.before(n);m.append(t);--d}else 0===d?c.useColSpanStyle?
(t=u.attr("rowspan")?parseInt(u.attr("rowspan"),10)+1:2,u.attr("rowspan",t)):(a("<th>",{role:"columnheader"}).addClass(v.headerBox+" ui-th-column-header ui-th-"+this.p.direction).css({display:n.hidden?"none":""}).attr({"data-spname":n.name}).insertBefore(u),m.append(t)):(m.append(t),d--)}h=a(this).children("thead");h.prepend(q);m.insertAfter(l);k.append(h);c.useColSpanStyle&&(k.find("span.ui-jqgrid-resize").each(function(){var B=a(this).parent();B.is(":visible")&&(this.style.cssText="height: "+B.height()+
"px !important; cursor: col-resize;")}),k.find("div.ui-jqgrid-sortable").each(function(){var B=a(this),E=B.parent();E.is(":visible")&&E.is(":has(span.ui-jqgrid-resize)")&&B.css("top",(E.height()-B.outerHeight())/2-4+"px")}));var F=h.find("tr.jqg-first-row-header");a(this).on("jqGridResizeStop.setGroupHeaders",function(B,E,R){F.find("th").eq(R)[0].style.width=E+"px"});if(r)try{a(r).focus()}catch(B){}k=a("tr.jqg-second-row-header th").eq(0);"object"===a.jgrid.type(k)&&k.length&&""===a.jgrid.trim(k[0].outerText)&&
a("tr.jqg-second-row-header th").eq(0).prepend("&nbsp;");p&&a(this).jqGrid("setFrozenColumns");a(this).triggerHandler("afterSetGroupHandler",[c])})},destroyGroupHeader:function(c){void 0===c&&(c=!0);return this.each(function(){var e;var d=this.grid;var f=a("table.ui-jqgrid-htable thead",d.hDiv),h=this.p.colModel,g=!1;if(d){this.p.frozenColumns&&(a(this).jqGrid("destroyFrozenColumns"),g=!0);a(this).off(".setGroupHeaders");this.p.groupHeaderOn=!1;var b=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");
var k=d.headers;d=0;for(e=k.length;d<e;d++){var l=h[d].hidden?"none":"";l=a(k[d].el).width(a("tr.jqg-first-row-header th",f).eq(d).width()).css("display",l);try{l.removeAttr("rowSpan")}catch(q){l.attr("rowSpan",1)}b.append(l);var m=l.children("span.ui-jqgrid-resize");0<m.length&&(m[0].style.height="");l.children("div")[0].style.top=""}a(f).children("tr.ui-jqgrid-labels").remove();a(f).children("tr.jqg-first-row-header").remove();a(f).prepend(b);!0===c&&a(this).jqGrid("setGridParam",{groupHeader:null});
g&&a(this).jqGrid("setFrozenColumns");a(this).off("afterSetGroupHandler")}})},isGroupHeaderOn:function(){var c=this[0];return!0===c.p.groupHeaderOn&&c.p.groupHeader&&(Array.isArray(c.p.groupHeader)||a.jgrid.isFunction(c.p.groupHeader))},refreshGroupHeaders:function(){return this.each(function(){var c=a(this).jqGrid("isGroupHeaderOn");if(c){a(this).jqGrid("destroyGroupHeader",!1);var e=a.extend([],this.p.groupHeader);this.p.groupHeader=null}if(c&&e)for(c=0;c<e.length;c++)a(this).jqGrid("setGroupHeaders",
e[c])})}});a.jgrid=a.jgrid||{};a.extend(a.jgrid,{saveState:function(c,e){e=a.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:!1,saveData:!0},e||{});if(c){var d="",f="";c=a("#"+c)[0];if(c.grid){(d=a(c).data("inlineNav"))&&c.p.inlineNav&&a(c).jqGrid("setGridParam",{_iN:d});(d=a(c).data("filterToolbar"))&&c.p.filterToolbar&&a(c).jqGrid("setGridParam",{_fT:d});d=a(c).jqGrid("jqGridExport",{exptype:"jsonstring",
ident:"",root:"",data:e.saveData});f="";if(e.saveData){f=a(c.grid.bDiv).find(".ui-jqgrid-btable tbody").first().html();var h=f.indexOf("</tr>");f=f.slice(h+5)}if(a.jgrid.isFunction(e.beforeSetItem)){var g=e.beforeSetItem.call(c,d);null!=g&&(d=g)}if(e.debug){a("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data</a>');h=[];var b={};h.push("Grid Options\n");h.push(d);h.push("\n");h.push("GridData\n");h.push(f);b.type="plain/text;charset=utf-8";
try{var k=new File(h,"jqGrid_dump.txt",b)}catch(l){k=new Blob(h,b)}k=URL.createObjectURL(k);a("#link_save").attr("href",k).on("click",function(){a(this).remove()})}if(e.compression&&e.compressionModule)try{g=window[e.compressionModule][e.compressionMethod](d),null!=g&&(d=g,f=window[e.compressionModule][e.compressionMethod](f))}catch(l){}if(e.useStorage&&a.jgrid.isLocalStorage())try{window[e.storageType].setItem("jqGrid"+c.p.id,d),window[e.storageType].setItem("jqGrid"+c.p.id+"_data",f)}catch(l){22===
l.code&&alert("Local storage limit is over!")}return d}}},loadState:function(c,e,d){d=a.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16",restoreData:!0},d||{});if(c){var f=a("#"+c)[0];if(d.useStorage)try{e=window[d.storageType].getItem("jqGrid"+f.id);var h=window[d.storageType].getItem("jqGrid"+f.id+"_data")}catch(v){}if(e){if(d.decompression&&d.decompressionModule)try{var g=
window[d.decompressionModule][d.decompressionMethod](e);null!=g&&(e=g,h=window[d.decompressionModule][d.decompressionMethod](h))}catch(v){}if((g=a.jgrid.parseFunc(e))&&"object"===a.jgrid.type(g)){f.grid&&a.jgrid.gridUnload(c);a.jgrid.isFunction(d.beforeSetGrid)&&(e=d.beforeSetGrid(g))&&"object"===a.jgrid.type(e)&&(g=e);e={reccount:g.reccount,records:g.records,lastpage:g.lastpage,shrinkToFit:g.shrinkToFit,data:g.data,datatype:g.datatype,grouping:g.grouping};g.shrinkToFit=!1;g.data=[];g.datatype="local";
g.grouping=!1;if(g.inlineNav){var b=g._iN;g._iN=null;delete g._iN}if(g.filterToolbar){var k=g._fT;g._fT=null;delete g._fT}var l=a("#"+c).jqGrid(g);l.jqGrid("delRowData","norecs");d.restoreData&&""!==a.jgrid.trim(h)&&l.append(h);l.jqGrid("setGridParam",e);if(g.storeNavOptions&&g.navGrid&&(l[0].p.navGrid=!1,l.jqGrid("navGrid",g.pager,g.navOptions,g.editOptions,g.addOptions,g.delOptions,g.searchOptions,g.viewOptions),g.navButtons&&g.navButtons.length))for(h=0;h<g.navButtons.length;h++)"sepclass"in g.navButtons[h][1]?
l.jqGrid("navSeparatorAdd",g.navButtons[h][0],g.navButtons[h][1]):l.jqGrid("navButtonAdd",g.navButtons[h][0],g.navButtons[h][1]);l[0].refreshIndex();g.subGrid&&(l.jqGrid("addSubGrid",(1===g.multiselect?1:0)+(!0===g.rownumbers?1:0)),a.each(l[0].rows,function(v,t){a(t).hasClass("ui-sg-expanded")&&a(l[0].rows[v-1]).find("td.sgexpanded").click().click()}));if(g.treeGrid){h=1;e=l[0].rows.length;for(var m=g.expColInd,q=g.treeReader.leaf_field,r=g.treeReader.expanded_field;h<e;){a(l[0].rows[h].cells[m]).find("div.treeclick").on("click",
function(v){v=a.jgrid.stripPref(g.idPrefix,a(v.target||v.srcElement,l[0].rows).closest("tr.jqgrow")[0].id);v=l[0].p._index[v];l[0].p.data[v][q]||(l[0].p.data[v][r]?(l.jqGrid("collapseRow",l[0].p.data[v]),l.jqGrid("collapseNode",l[0].p.data[v])):(l.jqGrid("expandRow",l[0].p.data[v]),l.jqGrid("expandNode",l[0].p.data[v])));return!1});if(!0===g.ExpandColClick)a(l[0].rows[h].cells[m]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(v){v=a.jgrid.stripPref(g.idPrefix,a(v.target||v.srcElement,
l[0].rows).closest("tr.jqgrow")[0].id);var t=l[0].p._index[v];l[0].p.data[t][q]||(l[0].p.data[t][r]?(l.jqGrid("collapseRow",l[0].p.data[t]),l.jqGrid("collapseNode",l[0].p.data[t])):(l.jqGrid("expandRow",l[0].p.data[t]),l.jqGrid("expandNode",l[0].p.data[t])));l.jqGrid("setSelection",v);return!1});h++}}g.multiselect&&a.each(g.selarrrow,function(){a("#jqg_"+c+"_"+this)[g.useProp?"prop":"attr"]("checked","checked")});l.jqGrid("isGroupHeaderOn")&&l.jqGrid("refreshGroupHeaders");if(g.searchCols)for(var p in g._results)g._results.hasOwnProperty(p)&&
a("#jqs_"+c+"_"+p).val(g._results[p].v);g.inlineNav&&b&&(l.jqGrid("setGridParam",{inlineNav:!1}),l.jqGrid("inlineNav",g.pager,b));g.filterToolbar&&k&&(l.jqGrid("setGridParam",{filterToolbar:!1}),k.restoreFromFilters=!0,l.jqGrid("filterToolbar",k));g.frozenColumns&&l.jqGrid("setFrozenColumns");l[0].updatepager(!0,!0);a.jgrid.isFunction(d.afterSetGrid)&&d.afterSetGrid(l);d.clearAfterLoad&&(window[d.storageType].removeItem("jqGrid"+f.id),window[d.storageType].removeItem("jqGrid"+f.id+"_data"))}else alert("can not convert to object")}}},
isGridInStorage:function(c,e){var d={storageType:"localStorage"};d=a.extend(d,e||{});try{var f=window[d.storageType].getItem("jqGrid"+c);var h=window[d.storageType].getItem("jqGrid"+c+"_data");var g=null!=f&&null!=h&&"string"===typeof f&&"string"===typeof h}catch(b){g=!1}return g},setRegional:function(c,e){var d={storageType:"sessionStorage"};d=a.extend(d,e||{});if(d.regional){a.jgrid.saveState(c,d);d.beforeSetGrid=function(b){b.regional=d.regional;b.force_regional=!0;return b};a.jgrid.loadState(c,
null,d);e=a("#"+c)[0];var f=a(e).jqGrid("getGridParam","colModel"),h=-1,g=a.jgrid.getRegional(e,"nav");a.each(f,function(b){if(this.formatter&&"actions"===this.formatter)return h=b,!1});-1!==h&&g&&a("#"+c+" tbody tr").each(function(){var b=this.cells[h];a(b).find(".ui-inline-edit").attr("title",g.edittitle);a(b).find(".ui-inline-del").attr("title",g.deltitle);a(b).find(".ui-inline-save").attr("title",g.savetitle);a(b).find(".ui-inline-cancel").attr("title",g.canceltitle)});try{window[d.storageType].removeItem("jqGrid"+
e.id),window[d.storageType].removeItem("jqGrid"+e.id+"_data")}catch(b){}}},jqGridImport:function(c,e){e=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},e||{});var d=(0===c.indexOf("#")?"":"#")+a.jgrid.jqID(c),f=function(g,b){var k=a(b.xmlGrid.config,g)[0];b=a(b.xmlGrid.data,g)[0];var l;if(a.grid.xmlToJSON){k=a.jgrid.xmlToJSON(k);for(m in k)k.hasOwnProperty(m)&&(l=k[m]);if(b){var m=
k.grid.datatype;k.grid.datatype="xmlstring";k.grid.datastr=g;a(d).jqGrid(l).jqGrid("setGridParam",{datatype:m})}else setTimeout(function(){a(d).jqGrid(l)},0)}else alert("xml2json or parse are not present")},h=function(g,b){if(g&&"string"===typeof g){var k=a.jgrid.parseFunc(g);g=k[b.jsonGrid.config];(b=k[b.jsonGrid.data])?(k=g.datatype,g.datatype="jsonstring",g.datastr=b,a(d).jqGrid(g).jqGrid("setGridParam",{datatype:k})):a(d).jqGrid(g)}};switch(e.imptype){case "xml":a.ajax(a.extend({url:e.impurl,
type:e.mtype,data:e.impData,dataType:"xml",complete:function(g,b){"success"===b&&(f(g.responseXML,e),a(d).triggerHandler("jqGridImportComplete",[g,e]),a.jgrid.isFunction(e.importComplete)&&e.importComplete(g))}},e.ajaxOptions));break;case "xmlstring":e.impstring&&"string"===typeof e.impstring&&(c=a.parseXML(e.impstring))&&(f(c,e),a(d).triggerHandler("jqGridImportComplete",[c,e]),a.jgrid.isFunction(e.importComplete)&&e.importComplete(c));break;case "json":a.ajax(a.extend({url:e.impurl,type:e.mtype,
data:e.impData,dataType:"json",complete:function(g){try{h(g.responseText,e),a(d).triggerHandler("jqGridImportComplete",[g,e]),a.jgrid.isFunction(e.importComplete)&&e.importComplete(g)}catch(b){}}},e.ajaxOptions));break;case "jsonstring":e.impstring&&"string"===typeof e.impstring&&(h(e.impstring,e),a(d).triggerHandler("jqGridImportComplete",[e.impstring,e]),a.jgrid.isFunction(e.importComplete)&&e.importComplete(e.impstring))}}});a.jgrid.extend({jqGridExport:function(c){c=a.extend({exptype:"xmlstring",
root:"grid",ident:"\t",addOptions:{},data:!0},c||{});var e=null;this.each(function(){if(this.grid){var d=a.extend(!0,{},a(this).jqGrid("getGridParam"),c.addOptions);d.rownumbers&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.multiselect&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.searchCols&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.subGrid&&(d.colNames.splice(0,1),d.colModel.splice(0,1));d.knv=null;c.data||(d.data=[],d._index={});switch(c.exptype){case "xmlstring":e="<"+c.root+
">"+a.jgrid.jsonToXML(d,{xmlDecl:""})+"</"+c.root+">";break;case "jsonstring":e=a.jgrid.stringify(d),c.root&&(e="{"+c.root+":"+e+"}")}}});return e},excelExport:function(c){c=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:!1,exportgrouping:!1,exportOptions:{},method:"GET"},c||{});return this.each(function(){if(this.grid&&"remote"===c.exptype){var e=a.extend({},this.p.postData);e[c.oper]=c.tag;if(a.jgrid.isFunction(c.beforeExport)){var d=c.beforeExport.call(this,
e);a.isPlainObject(d)&&(e=d)}if(c.exporthidden){d=this.p.colModel;var f,h=d.length,g=[];for(f=0;f<h;f++)void 0===d[f].hidden&&(d[f].hidden=!1),g.push({name:d[f].name,hidden:d[f].hidden});d=JSON.stringify(g);"string"===typeof d&&(e.colModel=d)}c.exportgrouping&&(d=JSON.stringify(this.p.groupingView),"string"===typeof d&&(e.groupingView=d));try{a.jgrid.postForm(c.url,e,c.method)}catch(b){e=jQuery.param(e),e=-1!==c.url.indexOf("?")?c.url+"&"+e:c.url+"?"+e,window.location=e}}})}});a.jgrid.inlineEdit=
a.jgrid.inlineEdit||{};a.jgrid.extend({editRow:function(c,e,d,f,h,g,b,k,l){var m={},q=a.makeArray(arguments).slice(1),r=this[0];"object"===a.jgrid.type(q[0])?m=q[0]:(void 0!==e&&(m.keys=e),a.jgrid.isFunction(d)&&(m.oneditfunc=d),a.jgrid.isFunction(f)&&(m.successfunc=f),void 0!==h&&(m.url=h),void 0!==g&&(m.extraparam=g),a.jgrid.isFunction(b)&&(m.aftersavefunc=b),a.jgrid.isFunction(k)&&(m.errorfunc=k),a.jgrid.isFunction(l)&&(m.afterrestorefunc=l));m=a.extend(!0,{keys:!1,keyevent:"keydown",onEnter:null,
onEscape:null,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0,saveui:"enable",savetext:a.jgrid.getRegional(r,"defaults.savetext")},a.jgrid.inlineEdit,m);return this.each(function(){var p,v,t=0,u=null,n={},x=a(this).jqGrid("getStyleUI",r.p.styleUI+".inlinedit","inputClass",!0),w=a(this).jqGrid("getStyleUI",r.p.styleUI+".inlinedit","selectClass",!0);if(r.grid){var A=a(r).jqGrid("getInd",c,
!0);if(!1!==A){r.p.beforeAction=!0;var H=a.jgrid.isFunction(m.beforeEditRow)?m.beforeEditRow.call(r,m,c):void 0;void 0===H&&(H=!0);if(!H)r.p.beforeAction=!1;else if("0"===(a(A).attr("editable")||"0")&&!a(A).hasClass("not-editable-row")){var F=r.p.colModel;a(A).children('td[role="gridcell"]').each(function(B){p=F[B].name;var E=!0===r.p.treeGrid&&p===r.p.ExpandColumn;if(E)v=a(this).find("span").first().html();else try{v=a.unformat.call(r,this,{rowId:c,colModel:F[B]},B)}catch(O){v=F[B].edittype&&"textarea"===
F[B].edittype?a(this).text():a(this).html()}if("cb"!==p&&"subgrid"!==p&&"rn"!==p&&"sc"!==p&&(r.p.autoencode&&(v=a.jgrid.htmlDecode(v)),!0===F[B].editable)){n[p]=v;null===u&&(u=B);E?a(this).find("span").first().html(""):a(this).html("");var R=a.extend({},F[B].editoptions||{},{id:c+"_"+p,name:p,rowId:c,oper:"edit",module:"inline"});F[B].edittype||(F[B].edittype="text");if("&nbsp;"===v||"&#160;"===v||null!==v&&1===v.length&&160===v.charCodeAt(0))v="";var z=a.jgrid.createEl.call(r,F[B].edittype,R,v,!0,
a.extend({},a.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));a(z).addClass("editable inline-edit-cell");-1<a.inArray(F[B].edittype,["text","textarea","password"])?a(z).addClass(x):"select"===F[B].edittype&&a(z).addClass(w);E?a(this).find("span").first().append(z):a(this).append(z);a.jgrid.bindEv.call(r,z,R);"select"===F[B].edittype&&void 0!==F[B].editoptions&&!0===F[B].editoptions.multiple&&void 0===F[B].editoptions.dataUrl&&a.jgrid.msie()&&a(z).width(a(z).width());t++}});if(0<t){n.id=c;r.p.savedRow.push(n);
a(A).attr("editable","1");m.focusField&&("number"===typeof m.focusField&&parseInt(m.focusField,10)<=F.length&&(u=m.focusField),setTimeout(function(){var B=a("td",A).eq(u).find(":input:visible").not(":disabled");0<B.length&&B.focus()},0));if(!0===m.keys)a(A).on(m.keyevent,function(B){if(27===B.keyCode){if(a.jgrid.isFunction(m.onEscape))return m.onEscape.call(r,c,m,B),!0;a(r).jqGrid("restoreRow",c,m);if(r.p.inlineNav)try{a(r).jqGrid("showAddEditButtons")}catch(E){}return!1}if(13===B.keyCode){B.preventDefault();
if(a.jgrid.isFunction(m.onEnter))return m.onEnter.call(r,c,m,B),!0;if("TEXTAREA"===B.target.tagName)return!0;if(a(r).jqGrid("saveRow",c,m)&&r.p.inlineNav)try{a(r).jqGrid("showAddEditButtons")}catch(E){}return!1}});a(r).triggerHandler("jqGridInlineEditRow",[c,m]);a.jgrid.isFunction(m.oneditfunc)&&m.oneditfunc.call(r,c)}}}}})},saveRow:function(c,e,d,f,h,g,b){var k=a.makeArray(arguments).slice(1),l={},m=this[0];"object"===a.jgrid.type(k[0])?l=k[0]:(a.jgrid.isFunction(e)&&(l.successfunc=e),void 0!==d&&
(l.url=d),void 0!==f&&(l.extraparam=f),a.jgrid.isFunction(h)&&(l.aftersavefunc=h),a.jgrid.isFunction(g)&&(l.errorfunc=g),a.jgrid.isFunction(b)&&(l.afterrestorefunc=b));l=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:a.jgrid.getRegional(m,"defaults.savetext")},a.jgrid.inlineEdit,l);var q=!1,r,p={},v={},t={},u,n=!1,x=a.jgrid.trim(a(m).jqGrid("getStyleUI",m.p.styleUI+".common","error",
!0));if(!m.grid)return q;var w=a(m).jqGrid("getInd",c,!0);if(!1===w)return q;var A=a.jgrid.getRegional(m,"errors"),H=a.jgrid.getRegional(m,"edit");k=a.jgrid.isFunction(l.beforeSaveRow)?l.beforeSaveRow.call(m,l,c):void 0;void 0===k&&(k=!0);if(k){k=a(w).attr("editable");l.url=l.url||m.p.editurl;if("1"===k){var F,B,E;a(w).children('td[role="gridcell"]').each(function(S){F=m.p.colModel[S];r=F.name;E="";if("cb"!==r&&"subgrid"!==r&&!0===F.editable&&"rn"!==r&&"sc"!==r&&!a(this).hasClass("not-editable-cell")){switch(F.edittype){case "checkbox":var K=
["Yes","No"];F.editoptions&&F.editoptions.value&&(K=F.editoptions.value.split(":"));p[r]=a("input",this).is(":checked")?K[0]:K[1];E=a("input",this);break;case "text":case "password":case "textarea":case "button":p[r]=a("input, textarea",this).val();E=a("input, textarea",this);break;case "select":if(F.editoptions.multiple){K=a("select",this);var ba=[];p[r]=a(K).val();p[r]=p[r]?p[r].join(","):"";a("select option:selected",this).each(function(T,W){ba[T]=a(W).text()});v[r]=ba.join(",")}else p[r]=a("select option:selected",
this).val(),v[r]=a("select option:selected",this).text();F.formatter&&(v={});E=a("select",this);break;case "custom":try{if(F.editoptions&&a.jgrid.isFunction(F.editoptions.custom_value)){if(p[r]=F.editoptions.custom_value.call(m,a(".customelement",this),"get"),void 0===p[r])throw"e2";}else throw"e1";}catch(T){"e1"===T?a.jgrid.info_dialog(A.errcap,"function 'custom_value' "+H.msg.nodefined,H.bClose,{styleUI:m.p.styleUI}):a.jgrid.info_dialog(A.errcap,T.message,H.bClose,{styleUI:m.p.styleUI})}}u=a.jgrid.checkValues.call(m,
p[r],S);if(!1===u[0])return B=S,!1;m.p.autoencode&&(p[r]=a.jgrid.htmlEncode(p[r]));"clientArray"!==l.url&&F.editoptions&&!0===F.editoptions.NullIfEmpty&&""===p[r]&&(t[r]="null",n=!0)}});if(!1===u[0]){try{if(a.jgrid.isFunction(m.p.validationCell))m.p.validationCell.call(m,E,u[1],w.rowIndex,B);else{var R=a(m).jqGrid("getGridRowById",c),z=a.jgrid.findPos(R);a.jgrid.info_dialog(A.errcap,u[1],H.bClose,{left:z[0],top:z[1]+a(R).outerHeight(),styleUI:m.p.styleUI,onClose:function(){0<=B&&a("#"+c+"_"+m.p.colModel[B].name).focus()}})}}catch(S){alert(u[1])}return q}z=
m.p.prmNames;var O=c;R=!1===m.p.keyName?z.id:m.p.keyName;a.isEmptyObject(p)||(p[z.oper]=z.editoper,void 0===p[R]||""===p[R]?p[R]=c:w.id!==m.p.idPrefix+p[R]&&(z=a.jgrid.stripPref(m.p.idPrefix,c),void 0!==m.p._index[z]&&(m.p._index[p[R]]=m.p._index[z],delete m.p._index[z]),c=m.p.idPrefix+p[R],a(w).attr("id",c),m.p.selrow===O&&(m.p.selrow=c),Array.isArray(m.p.selarrrow)&&(z=a.inArray(O,m.p.selarrrow),0<=z&&(m.p.selarrrow[z]=c)),m.p.multiselect&&(z="jqg_"+m.p.id+"_"+c,a("input.cbox",w).attr("id",z).attr("name",
z))),void 0===m.p.inlineData&&(m.p.inlineData={}),p=a.extend({},p,m.p.inlineData,l.extraparam));if("clientArray"===l.url){p=a.extend({},p,v);m.p.autoencode&&a.each(p,function(S,K){p[S]=a.jgrid.htmlDecode(K)});p=a.jgrid.isFunction(m.p.serializeRowData)?m.p.serializeRowData.call(m,p):p;z=a(m).jqGrid("setRowData",c,p);a(w).attr("editable","0");for(R=0;R<m.p.savedRow.length;R++)if(String(m.p.savedRow[R].id)===String(O)){var U=R;break}a(m).triggerHandler("jqGridInlineAfterSaveRow",[c,z,p,l]);a.jgrid.isFunction(l.aftersavefunc)&&
l.aftersavefunc.call(m,c,z,p,l);0<=U&&m.p.savedRow.splice(U,1);q=!0;a(w).removeClass("jqgrid-new-row").off("keydown")}else"storage"===l.url?(p=a.extend({},p,v),m.p.autoencode&&a.each(p,function(S,K){p[S]=a.jgrid.htmlDecode(K)}),p=a.jgrid.isFunction(m.p.serializeRowData)?m.p.serializeRowData.call(m,p):p,a(w).hasClass("jqgrid-new-row")?a(m).jqGrid("addStorageRecord",p).then(function(S){if("complete"===S.type){var K=a(m).jqGrid("setRowData",c,p);a(w).attr("editable","0");for(S=0;S<m.p.savedRow.length;S++)if(String(m.p.savedRow[S].id)===
String(O)){U=S;break}a(m).triggerHandler("jqGridInlineAfterSaveRow",[c,K,p,l]);a.jgrid.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(m,c,K,p,l);0<=U&&m.p.savedRow.splice(U,1);q=!0;a(w).removeClass("jqgrid-new-row").off("keydown");!0===m.p.inlineNav&&a(m).jqGrid("showAddEditButtons")}}).catch(function(S){a.jgrid.info_dialog("Error",S.target.error.name+" : "+S.target.error.message,"Close")}):a(m).jqGrid("updateStorageRecord",p).then(function(S){if("complete"===S.type){var K=a(m).jqGrid("setRowData",
c,p);a(w).attr("editable","0");for(S=0;S<m.p.savedRow.length;S++)if(String(m.p.savedRow[S].id)===String(O)){U=S;break}a(m).triggerHandler("jqGridInlineAfterSaveRow",[c,K,p,l]);a.jgrid.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(m,c,K,p,l);0<=U&&m.p.savedRow.splice(U,1);q=!0;a(w).off("keydown");!0===m.p.inlineNav&&a(m).jqGrid("showAddEditButtons")}}).catch(function(S){a.jgrid.info_dialog("Error",S.target.error.name+" : "+S.target.error.message,"Close")})):(a(m).jqGrid("progressBar",{method:"show",
loadtype:l.saveui,htmlcontent:l.savetext}),t=a.extend({},p,t),t[R]=a.jgrid.stripPref(m.p.idPrefix,t[R]),a.ajax(a.extend({url:l.url,data:a.jgrid.isFunction(m.p.serializeRowData)?m.p.serializeRowData.call(m,t):t,type:l.mtype,async:!1,success:function(S,K,ba){a(m).jqGrid("progressBar",{method:"hide",loadtype:l.saveui,htmlcontent:l.savetext});if("success"===K){S=!0;var T=a(m).triggerHandler("jqGridInlineSuccessSaveRow",[ba,c,l]);Array.isArray(T)||(T=[!0,t]);T[0]&&a.jgrid.isFunction(l.successfunc)&&(T=
l.successfunc.call(m,ba));Array.isArray(T)?(S=T[0],p=T[1]||p):S=T;if(!0===S){m.p.autoencode&&a.each(p,function(W,qa){p[W]=a.jgrid.htmlDecode(qa)});n&&a.each(p,function(W){"null"===p[W]&&(p[W]="")});p=a.extend({},p,v);a(m).jqGrid("setRowData",c,p);a(w).attr("editable","0");for(K=0;K<m.p.savedRow.length;K++)if(String(m.p.savedRow[K].id)===String(c)){U=K;break}a(m).triggerHandler("jqGridInlineAfterSaveRow",[c,ba,p,l]);a.jgrid.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(m,c,ba,p,l);0<=U&&m.p.savedRow.splice(U,
1);q=!0;a(w).removeClass("jqgrid-new-row").off("keydown")}else a(m).triggerHandler("jqGridInlineErrorSaveRow",[c,ba,K,null,l]),a.jgrid.isFunction(l.errorfunc)&&l.errorfunc.call(m,c,ba,K,null),!0===l.restoreAfterError&&a(m).jqGrid("restoreRow",c,l)}},error:function(S,K,ba){a("#lui_"+a.jgrid.jqID(m.p.id)).hide();a(m).triggerHandler("jqGridInlineErrorSaveRow",[c,S,K,ba,l]);if(a.jgrid.isFunction(l.errorfunc))l.errorfunc.call(m,c,S,K,ba);else{S=S.responseText||S.statusText;try{a.jgrid.info_dialog(A.errcap,
'<div class="'+x+'">'+S+"</div>",H.bClose,{buttonalign:"right",styleUI:m.p.styleUI})}catch(T){alert(S)}}!0===l.restoreAfterError&&a(m).jqGrid("restoreRow",c,l)}},a.jgrid.ajaxOptions,m.p.ajaxRowOptions||{})))}return q}},restoreRow:function(c,e){var d=a.makeArray(arguments).slice(1),f={};"object"===a.jgrid.type(d[0])?f=d[0]:a.jgrid.isFunction(e)&&(f.afterrestorefunc=e);f=a.extend(!0,{},a.jgrid.inlineEdit,f);return this.each(function(){var h=this,g=-1,b={};if(h.grid){var k=a(h).jqGrid("getInd",c,!0);
if(!1!==k){var l=a.jgrid.isFunction(f.beforeCancelRow)?f.beforeCancelRow.call(h,f,c):void 0;void 0===l&&(l=!0);if(l){for(l=0;l<h.p.savedRow.length;l++)if(String(h.p.savedRow[l].id)===String(c)){g=l;break}if(0<=g){if(a.jgrid.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+a.jgrid.jqID(k.id)).datepicker("hide")}catch(m){}a.each(h.p.colModel,function(){h.p.savedRow[g].hasOwnProperty(this.name)&&(b[this.name]=h.p.savedRow[g][this.name])});a(h).jqGrid("setRowData",c,b);a(k).attr("editable",
"0").off("keydown");h.p.savedRow.splice(g,1);a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(h.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){a(h).jqGrid("delRowData",c);a(h).jqGrid("showAddEditButtons")},0)}a(h).triggerHandler("jqGridInlineAfterRestoreRow",[c]);a.jgrid.isFunction(f.afterrestorefunc)&&f.afterrestorefunc.call(h,c)}}}})},addRow:function(c){c=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},c||{});return this.each(function(){if(this.grid){var e=
this;e.p.beforeAction=!0;var d=a.jgrid.isFunction(c.beforeAddRow)?c.beforeAddRow.call(e,c.addRowParams):void 0;void 0===d&&(d=!0);d?(c.rowID=a.jgrid.isFunction(c.rowID)?c.rowID.call(e,c):null!=c.rowID?c.rowID:a.jgrid.randId(),!0===c.useDefValues&&a(e.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var f=this.editoptions.defaultValue;f=a.jgrid.isFunction(f)?f.call(e):f;c.initdata[this.name]=f}}),a(e).jqGrid("addRowData",c.rowID,c.initdata,c.position),c.rowID=e.p.idPrefix+
c.rowID,a("#"+a.jgrid.jqID(c.rowID),"#"+a.jgrid.jqID(e.p.id)).addClass("jqgrid-new-row"),c.useFormatter?a("#"+a.jgrid.jqID(c.rowID)+" .ui-inline-edit","#"+a.jgrid.jqID(e.p.id)).click():(d=e.p.prmNames,c.addRowParams.extraparam[d.oper]=d.addoper,a(e).jqGrid("editRow",c.rowID,c.addRowParams),a(e).jqGrid("setSelection",c.rowID))):e.p.beforeAction=!1}})},inlineNav:function(c,e){var d=this[0],f=a.jgrid.getRegional(d,"nav"),h=a.jgrid.styleUI[d.p.styleUI].inlinedit;e=a.extend(!0,{edit:!0,editicon:h.icon_edit_nav,
add:!0,addicon:h.icon_add_nav,save:!0,saveicon:h.icon_save_nav,cancel:!0,cancelicon:h.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0,saveAfterSelect:!1},f,e||{});return this.each(function(){if(this.grid&&!this.p.inlineNav){var g=a.jgrid.jqID(d.p.id),b=a.jgrid.trim(a(d).jqGrid("getStyleUI",d.p.styleUI+".common","disabled",!0));d.p.navGrid||a(d).jqGrid("navGrid",c,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1});a(d).data("inlineNav")||a(d).data("inlineNav",
e);d.p.force_regional&&(e=a.extend(e,f));d.p.inlineNav=!0;if(!0===e.addParams.useFormatter){var k=d.p.colModel,l;for(l=0;l<k.length;l++)if(k[l].formatter&&"actions"===k[l].formatter){k[l].formatoptions&&(k=a.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},k[l].formatoptions),e.addParams.addRowParams={keys:k.keys,oneditfunc:k.onEdit,successfunc:k.onSuccess,url:k.url,extraparam:k.extraparam,aftersavefunc:k.afterSave,errorfunc:k.onError,
afterrestorefunc:k.afterRestore});break}}e.add&&a(d).jqGrid("navButtonAdd",c,{caption:e.addtext,title:e.addtitle,buttonicon:e.addicon,id:d.p.id+"_iladd",internal:!0,onClickButton:function(){void 0===d.p.beforeAction&&(d.p.beforeAction=!0);a(d).jqGrid("addRow",e.addParams);!e.addParams.useFormatter&&d.p.beforeAction&&(a("#"+g+"_ilsave").removeClass(b),a("#"+g+"_ilcancel").removeClass(b),a("#"+g+"_iladd").addClass(b),a("#"+g+"_iledit").addClass(b))}});e.edit&&a(d).jqGrid("navButtonAdd",c,{caption:e.edittext,
title:e.edittitle,buttonicon:e.editicon,id:d.p.id+"_iledit",internal:!0,onClickButton:function(){var m=a(d).jqGrid("getGridParam","selrow");m?(void 0===d.p.beforeAction&&(d.p.beforeAction=!0),a(d).jqGrid("editRow",m,e.editParams),d.p.beforeAction&&(a("#"+g+"_ilsave").removeClass(b),a("#"+g+"_ilcancel").removeClass(b),a("#"+g+"_iladd").addClass(b),a("#"+g+"_iledit").addClass(b))):(a.jgrid.viewModal("#alertmod_"+g,{gbox:"#gbox_"+g,jqm:!0}),a("#jqg_alrt").focus())}});e.save&&(a(d).jqGrid("navButtonAdd",
c,{caption:e.savetext||"",title:e.savetitle||"Save row",buttonicon:e.saveicon,id:d.p.id+"_ilsave",internal:!0,onClickButton:function(){var m=d.p.savedRow[0].id;if(m){var q=d.p.prmNames,r=q.oper,p=e.editParams;a("#"+a.jgrid.jqID(m),"#"+g).hasClass("jqgrid-new-row")?(e.addParams.addRowParams.extraparam[r]=q.addoper,p=e.addParams.addRowParams):(e.editParams.extraparam||(e.editParams.extraparam={}),e.editParams.extraparam[r]=q.editoper);a(d).jqGrid("saveRow",m,p)&&a(d).jqGrid("showAddEditButtons")}else a.jgrid.viewModal("#alertmod_"+
g,{gbox:"#gbox_"+g,jqm:!0}),a("#jqg_alrt").focus()}}),a("#"+g+"_ilsave").addClass(b));e.cancel&&(a(d).jqGrid("navButtonAdd",c,{caption:e.canceltext||"",title:e.canceltitle||"Cancel row editing",buttonicon:e.cancelicon,id:d.p.id+"_ilcancel",internal:!0,onClickButton:function(){var m=d.p.savedRow[0].id,q=e.editParams;m?(a("#"+a.jgrid.jqID(m),"#"+g).hasClass("jqgrid-new-row")&&(q=e.addParams.addRowParams),a(d).jqGrid("restoreRow",m,q),a(d).jqGrid("showAddEditButtons")):(a.jgrid.viewModal("#alertmod",
{gbox:"#gbox_"+g,jqm:!0}),a("#jqg_alrt").focus())}}),a("#"+g+"_ilcancel").addClass(b));if(!0===e.restoreAfterSelect||!0===e.saveAfterSelect)a(d).on("jqGridBeforeSelectRow.inlineNav",function(m,q){0<d.p.savedRow.length&&!0===d.p.inlineNav&&q!==d.p.selrow&&null!==d.p.selrow&&(m=!0,d.p.selrow===e.addParams.rowID?a(d).jqGrid("delRowData",d.p.selrow):!0===e.restoreAfterSelect?a(d).jqGrid("restoreRow",d.p.selrow,e.editParams):m=a(d).jqGrid("saveRow",d.p.selrow,e.editParams),m&&a(d).jqGrid("showAddEditButtons"))})}})},
showAddEditButtons:function(){return this.each(function(){if(this.grid){var c=a.jgrid.jqID(this.p.id),e=a.jgrid.trim(a(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));a("#"+c+"_ilsave").addClass(e);a("#"+c+"_ilcancel").addClass(e);a("#"+c+"_iladd").removeClass(e);a("#"+c+"_iledit").removeClass(e)}})},showSaveCancelButtons:function(){return this.each(function(){if(this.grid){var c=a.jgrid.jqID(this.p.id),e=a.jgrid.trim(a(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",
!0));a("#"+c+"_ilsave").removeClass(e);a("#"+c+"_ilcancel").removeClass(e);a("#"+c+"_iladd").addClass(e);a("#"+c+"_iledit").addClass(e)}})}});a.jgrid.msie()&&8===a.jgrid.msiever()&&(a.expr[":"].hidden=function(c){return 0===c.offsetWidth||0===c.offsetHeight||"none"===c.style.display});a.jgrid._multiselect=!1;if(a.ui&&a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var oc=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(c,e){c=oc.call(this,c,e);
if(e&&this.selectedList){var d=this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(d)})}return c}}a.ui.multiselect.prototype.destroy&&(a.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();void 0===a.Widget?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)});a.jgrid._multiselect=!0}a.jgrid.extend({sortableColumns:function(c){return this.each(function(){function e(){f.p.disableClick=
!0;f.p.frozenColumns&&(a(f).jqGrid("destroyFrozenColumns"),g=!0)}function d(){setTimeout(function(){f.p.disableClick=!1;g&&(a(f).jqGrid("setFrozenColumns"),g=!1)},50)}var f=this,h=a.jgrid.jqID(f.p.id),g=!1;h={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+h+"_cb,#jqgh_"+h+"_rn,#jqgh_"+h+"_subgrid),:hidden)",cancel:".sortable-disabled",placeholder:{element:function(l){return a(document.createElement(l[0].nodeName)).addClass(l[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},
update:function(l,m){m.height(l.currentItem.innerHeight()-parseInt(l.currentItem.css("paddingTop")||0,10)-parseInt(l.currentItem.css("paddingBottom")||0,10));m.width(l.currentItem.innerWidth()-parseInt(l.currentItem.css("paddingLeft")||0,10)-parseInt(l.currentItem.css("paddingRight")||0,10))}},update:function(l,m){l=a(m.item).parent();l=a(">th",l);var q={},r=f.p.id+"_";a.each(f.p.colModel,function(v){q[this.name]=v});var p=[];l.each(function(){var v=a(">div",this).get(0).id.replace(/^jqgh_/,"").replace(r,
"");q.hasOwnProperty(v)&&p.push(q[v])});a(f).jqGrid("remapColumns",p,!0,!0);a.jgrid.isFunction(f.p.sortable.update)&&f.p.sortable.update(p)}};f.p.sortable.options?a.extend(h,f.p.sortable.options):a.jgrid.isFunction(f.p.sortable)&&(f.p.sortable={update:f.p.sortable});if(h.start){var b=h.start;h.start=function(l,m){e();b.call(this,l,m)}}else h.start=e;if(h.stop){var k=h.stop;h.stop=function(l,m){d();k.call(this,l,m)}}else h.stop=d;f.p.sortable.exclude&&(h.items+=":not("+f.p.sortable.exclude+")");h=
c.sortable(h);h=h.data("sortable")||h.data("uiSortable");null!=h&&(h.data("sortable").floating=!0)})},columnChooser:function(c){function e(u,n){u&&("string"===typeof u?a.fn[u]&&a.fn[u].apply(n,a.makeArray(arguments).slice(2)):a.jgrid.isFunction(u)&&u.apply(n,a.makeArray(arguments).slice(2)))}function d(){var u=m(p),n=u.container.closest(".ui-dialog-content");0<n.length&&"object"===typeof n[0].style?n[0].style.width="":n.css("width","");u.selectedList.height(Math.max(u.selectedContainer.height()-u.selectedActions.outerHeight()-
1,1));u.availableList.height(Math.max(u.availableContainer.height()-u.availableActions.outerHeight()-1,1))}var f=this,h={},g=[],b,k=f.jqGrid("getGridParam","colModel"),l=a.extend([],f.jqGrid("getGridParam","colNames")),m=function(u){return a.ui.multiselect.prototype&&u.data(a.ui.multiselect.prototype.widgetFullName||a.ui.multiselect.prototype.widgetName)||u.data("ui-multiselect")||u.data("multiselect")};var q=a.jgrid.getRegional(this[0],"col");if(!a("#colchooser_"+a.jgrid.jqID(f[0].p.id)).length){var r=
a('<div id="colchooser_'+f[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');var p=a("select",r);c=a.extend({width:400,height:240,classname:null,groupHeaders:!1,done:function(u){u&&f.jqGrid("remapColumns",u,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(u){var n={};n[u.bSubmit]=function(){u.apply_perm();u.cleanup(!1)};n[u.bCancel]=function(){u.cleanup(!0)};return a.extend(!0,
{buttons:n,close:function(){u.cleanup(!0)},modal:u.modal||!1,resizable:u.resizable||!0,width:u.width+70,resize:d},u.dialog_opts||{})},apply_perm:function(){var u=[];a("option",p).each(function(){a(this).is(":selected")?f.jqGrid("showCol",k[this.value].name):f.jqGrid("hideCol",k[this.value].name)});a("option[selected]",p).each(function(){this.selected&&u.push(parseInt(this.value,10))});a.each(u,function(){delete h[k[parseInt(this,10)].name]});a.each(h,function(){var n=parseInt(this,10);var x=u,w=n;
if(0<=w){var A=x.slice();var H=A.splice(w,Math.max(x.length-w,w));w>x.length&&(w=x.length);A[w]=n;u=A.concat(H)}else u=x});c.done&&c.done.call(f,u);f.jqGrid("setGridWidth",f[0].p.width,f[0].p.shrinkToFit)},cleanup:function(u){e(c.dlog,r,"destroy");e(c.msel,p,"destroy");r.remove();u&&c.done&&c.done.call(f)},msel_opts:{dividerLocation:.5}},q,c||{});if(a.ui&&a.ui.multiselect&&a.ui.multiselect.defaults){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");
return}c.msel_opts=a.extend(a.ui.multiselect.defaults,c.msel_opts)}if(f.jqGrid("isGroupHeaderOn")&&c.groupHeaders)for(q=f[0].p.groupHeader[f[0].p.groupHeader.length-1],b=0;b<l.length;b++){var v=a.jgrid.inColumnHeader(k[b].name,q.groupHeaders);if(0<=v){l[b]=q.groupHeaders[v].titleText+"::"+l[b];for(var t=1;t<=q.groupHeaders[v].numberOfColumns-1;t++)l[b+t]=q.groupHeaders[v].titleText+"::"+l[b+t];b=b+q.groupHeaders[v].numberOfColumns-1}}c.caption&&r.attr("title",c.caption);c.classname&&(r.addClass(c.classname),
p.addClass(c.classname));c.width&&(a(">div",r).css({width:c.width,margin:"0 auto"}),p.css("width",c.width));c.height&&(a(">div",r).css("height",c.height),p.css("height",c.height-10));p.empty();a.each(k,function(u){h[this.name]=u;this.hidedlg?this.hidden||g.push(u):p.append("<option value='"+u+"' "+(this.hidden?"":"selected='selected'")+">"+a.jgrid.stripHtml(l[u])+"</option>")});q=a.jgrid.isFunction(c.dlog_opts)?c.dlog_opts.call(f,c):c.dlog_opts;e(c.dlog,r,q);q=a.jgrid.isFunction(c.msel_opts)?c.msel_opts.call(f,
c):c.msel_opts;e(c.msel,p,q);q=a("#colchooser_"+a.jgrid.jqID(f[0].p.id));b=a(".ui-jqgrid").css("font-size")||"11px";q.parent().css("font-size",b);q.css({margin:"auto"});q.find(">div").css({width:"100%",height:"100%",margin:"auto"});q=m(p);q.container.css({width:"100%",height:"100%",margin:"auto"});q.selectedContainer.css({width:100*q.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"});q.availableContainer.css({width:100-100*q.options.dividerLocation+"%",height:"100%",
margin:"auto",boxSizing:"border-box"});q.selectedList.css("height","auto");q.availableList.css("height","auto");b=Math.max(q.selectedList.height(),q.availableList.height());b=Math.min(b,a(window).height());q.selectedList.css("height",b);q.availableList.css("height",b);d()}},sortableRows:function(c){return this.each(function(){var e=this;e.grid&&!e.p.treeGrid&&a.fn.sortable&&(c=a.extend({cursor:"move",axis:"y",items:" > .jqgrow"},c||{}),c.start&&a.jgrid.isFunction(c.start)?(c._start_=c.start,delete c.start):
c._start_=!1,c.update&&a.jgrid.isFunction(c.update)?(c._update_=c.update,delete c.update):c._update_=!1,c.start=function(d,f){a(f.item).css("border-width","0");a("td",f.item).each(function(g){this.style.width=e.grid.cols[g].style.width});if(e.p.subGrid){var h=a(f.item).attr("id");try{a(e).jqGrid("collapseSubGridRow",h)}catch(g){}}c._start_&&c._start_.apply(this,[d,f])},c.update=function(d,f){a(f.item).css("border-width","");!0===e.p.rownumbers&&a("td.jqgrid-rownum",e.rows).each(function(h){a(this).html(h+
1+(parseInt(e.p.page,10)-1)*parseInt(e.p.rowNum,10))});c._update_&&c._update_.apply(this,[d,f])},a(e).find("tbody").first().sortable(c),a("tbody",e).first().find(" > .jqgrow").disableSelection())})},gridDnD:function(c){return this.each(function(){function e(){var b=a.data(d,"dnd");a("tr.jqgrow:not(.ui-draggable)",d).draggable(a.jgrid.isFunction(b.drag)?b.drag.call(a(d),b):b.drag)}var d=this,f;if(d.grid&&!d.p.treeGrid&&a.fn.draggable&&a.fn.droppable)if(void 0===a("#jqgrid_dnd")[0]&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),
"string"===typeof c&&"updateDnD"===c&&!0===d.p.jqgdnd)e();else{var h;c=a.extend({drag:function(b){return a.extend({start:function(k,l){if(d.p.subGrid){var m=a(l.helper).attr("id");try{a(d).jqGrid("collapseSubGridRow",m)}catch(q){}}for(m=0;m<a.data(d,"dnd").connectWith.length;m++)0===a(a.data(d,"dnd").connectWith[m]).jqGrid("getGridParam","reccount")&&a(a.data(d,"dnd").connectWith[m]).jqGrid("addRowData","jqg_empty_row",{});l.helper.addClass("ui-state-highlight");a("td",l.helper).each(function(q){this.style.width=
d.grid.headers[q].width+"px"});b.onstart&&a.jgrid.isFunction(b.onstart)&&b.onstart.call(a(d),k,l)},stop:function(k,l){if(l.helper.dropped&&!b.dragcopy){var m=a(l.helper).attr("id");void 0===m&&(m=a(this).attr("id"));a(d).jqGrid("delRowData",m)}for(m=0;m<a.data(d,"dnd").connectWith.length;m++)a(a.data(d,"dnd").connectWith[m]).jqGrid("delRowData","jqg_empty_row");b.onstop&&a.jgrid.isFunction(b.onstop)&&b.onstop.call(a(d),k,l)}},b.drag_opts||{})},drop:function(b){return a.extend({accept:function(k){if(!a(k).hasClass("jqgrow"))return k;
h=a(k).closest("table.ui-jqgrid-btable");k=a(this).find("table.ui-jqgrid-btable").first()[0];if(0<h.length&&void 0!==a.data(h[0],"dnd")){var l=a.data(h[0],"dnd").connectWith;return-1!==a.inArray("#"+a.jgrid.jqID(k.id),l)?!0:!1}return!1},drop:function(k,l){if(a(l.draggable).hasClass("jqgrow")){var m=a(l.draggable).attr("id");m=l.draggable.parent().parent().jqGrid("getRowData",m);var q=[],r=a(this).find("table.ui-jqgrid-btable").first()[0];a.isPlainObject(m)&&(q=Object.keys(m));if(!b.dropbyname){var p,
v={},t=0,u=a("#"+a.jgrid.jqID(r.id)).jqGrid("getGridParam","colModel");try{for(p=0;p<u.length;p++){var n=u[p].name;"cb"!==n&&"rn"!==n&&"subgrid"!==n&&"sc"!==n&&(void 0!==q[t]&&(v[n]=m[q[t]]),t++)}m=v}catch(w){}}l.helper.dropped=!0;a.data(h[0],"dnd").beforedrop&&a.jgrid.isFunction(a.data(h[0],"dnd").beforedrop)&&(p=a.data(h[0],"dnd").beforedrop.call(r,k,l,m,a(h[0]),a(r)),void 0!==p&&null!==p&&"object"===typeof p&&(m=p));if(l.helper.dropped){if(b.autoid)if(a.jgrid.isFunction(b.autoid))var x=b.autoid.call(r,
m);else x=Math.ceil(1E3*Math.random()),x=b.autoidprefix+x;a("#"+a.jgrid.jqID(r.id)).jqGrid("addRowData",x,m,b.droppos)}b.ondrop&&a.jgrid.isFunction(b.ondrop)&&b.ondrop.call(r,k,l,m)}}},b.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover",tolerance:"intersect"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5E3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},
c||{});if(c.connectWith)for(c.connectWith=c.connectWith.split(","),c.connectWith=a.map(c.connectWith,function(b){return a.jgrid.trim(b)}),a.data(d,"dnd",c),0===d.p.reccount||d.p.jqgdnd||e(),d.p.jqgdnd=!0,f=0;f<c.connectWith.length;f++){var g=c.connectWith[f];a(g).closest(".ui-jqgrid-bdiv").droppable(a.jgrid.isFunction(c.drop)?c.drop.call(a(d),c):c.drop)}}})},gridResize:function(c){return this.each(function(){var e=this,d=a.jgrid.jqID(e.p.id),f;if(e.grid&&a.fn.resizable){c=a.extend({},{resizeclass:"ui-resizable-icon"},
c||{});c.alsoResize?(c._alsoResize_=c.alsoResize,delete c.alsoResize):c._alsoResize_=!1;c.stop&&a.jgrid.isFunction(c.stop)?(c._stop_=c.stop,delete c.stop):c._stop_=!1;var h=c.resizeclass;if("jQueryUI"!==e.p.styleUI){if(c.handles)c.handles.se?h+=" "+c.handles.se.replace(".",""):c.handles.se="."+h;else{c.handles={};var g=h.split(" ");c.handles.se="."+g[0]}h+=" ui-resizable-se ui-resizable-handle";a("#gbox_"+d).append('<span class="'+h+'"></span>')}c.stop=function(b,k){a(e).jqGrid("setGridParam",{height:a("#gview_"+
d+" .ui-jqgrid-bdiv").height()});a(e).jqGrid("setGridWidth",k.size.width,c.shrinkToFit);c._stop_&&c._stop_.call(e,b,k);e.p.caption&&a("#gbox_"+d).css({height:"auto"});e.p.frozenColumns&&(f&&clearTimeout(f),f=setTimeout(function(){f&&clearTimeout(f);a("#"+d).jqGrid("destroyFrozenColumns");a("#"+d).jqGrid("setFrozenColumns")}))};c.alsoResize=c._alsoResize_?"#gview_"+d+" .ui-jqgrid-bdiv,"+c._alsoResize_:a(".ui-jqgrid-bdiv","#gview_"+d);delete c._alsoResize_;a("#gbox_"+d).resizable(c)}})}});a.assocArraySize=
function(c){var e=0,d;for(d in c)c.hasOwnProperty(d)&&e++;return e};a.jgrid.extend({pivotSetup:function(c,e){var d=[],f=[],h=[],g=[],b=[],k={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},l=[],m=a.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,xMeta:[]},e||{});this.each(function(){function q(ma,xa,ta){var ua,fa=[];if(!ma||"function"!==typeof xa||xa instanceof RegExp)throw new TypeError;var Y=ma.length;
for(ua=0;ua<Y;ua++)if(ma.hasOwnProperty(ua)){var G=ma[ua];if(xa.call(ta,G,ua,ma)){fa.push(G);break}}return 0<fa.length?fa[0]:null}function r(ma,xa){var ta=0,ua=!0,fa;for(fa in ma)if(ma.hasOwnProperty(fa)){if(ma[fa]!=this[ta]){ua=!1;break}ta++;if(ta>=this.length)break}ua&&(ba=xa);return ua}function p(ma,xa,ta,ua){var fa=xa.length,Y,G,L="",X=[],da=1;if(Array.isArray(ta)){var Z=ta.length;X=ta}else Z=1,X[0]=ta;g=[];b=[];for(G=g.root=0;G<Z;G++){var ea=[];for(Y=0;Y<fa;Y++){var pa="string"===typeof xa[Y].aggregator?
xa[Y].aggregator:"cust";if(null==ta){var wa=a.jgrid.trim(xa[Y].member)+"_"+pa;X[0]=xa[Y].label||pa+" "+a.jgrid.trim(xa[Y].member)}else{var Aa=ta[G].replace(/\s+/g,"");try{wa=1===fa?L+Aa:L+Aa+"_"+pa+"_"+String(Y)}catch(Qa){}X[G]=ta[G]}wa=isNaN(parseInt(wa,10))?wa:wa+" ";"avg"===xa[Y].aggregator&&(da=-1===ba?f.length+"_"+wa:ba+"_"+wa,R[da]?R[da]++:R[da]=1,da=R[da]);pa=wa;Aa=ea;var Ba=wa,la=void 0,Ca=xa[Y].aggregator,za=ua[wa],Ea=xa[Y].member,Fa=ma,Xa=da;if(a.jgrid.isFunction(Ca))la=Ca.call(t,za,Ea,
Fa);else switch(Ca){case "sum":la=a.jgrid.floatNum(za)+a.jgrid.floatNum(Fa[Ea]);break;case "count":if(""===za||null==za)za=0;la=Fa.hasOwnProperty(Ea)?za+1:0;break;case "min":la=""===za||null==za?a.jgrid.floatNum(Fa[Ea]):Math.min(a.jgrid.floatNum(za),a.jgrid.floatNum(Fa[Ea]));break;case "max":la=""===za||null==za?a.jgrid.floatNum(Fa[Ea]):Math.max(a.jgrid.floatNum(za),a.jgrid.floatNum(Fa[Ea]));break;case "avg":la=(a.jgrid.floatNum(za)*(Xa-1)+a.jgrid.floatNum(Fa[Ea]))/Xa}ua[pa]=Aa[Ba]=la}L+=ta&&null!=
ta[G]?ta[G].replace(/\s+/g,""):"";g[wa]=ea;b[wa]=X[G]}return ua}function v(ma){var xa,ta,ua;for(ta in ma)if(ma.hasOwnProperty(ta)){if("object"!==typeof ma[ta]){if("level"===ta){void 0===W[ma.level]&&(W[ma.level]="",0<ma.level&&-1===ma.text.indexOf("_r_Totals")&&(l[ma.level-1]={useColSpanStyle:!1,groupHeaders:[]}));if(W[ma.level]!==ma.text&&ma.children.length&&-1===ma.text.indexOf("_r_Totals")&&0<ma.level){l[ma.level-1].groupHeaders.push({titleText:ma.label,numberOfColumns:0});var fa=l[ma.level-1].groupHeaders.length-
1;var Y=0===fa?va:qa;if(ma.level-1===(m.rowTotals?1:0)&&0<fa){for(var G=0,L=0;L<fa;L++)G+=l[ma.level-1].groupHeaders[L].numberOfColumns;G&&(Y=G+w)}d[Y]&&(l[ma.level-1].groupHeaders[fa].startColumnName=d[Y].name,l[ma.level-1].groupHeaders[fa].numberOfColumns=d.length-Y);qa=d.length}W[ma.level]=ma.text}if(ma.level===A&&"level"===ta&&0<A)if(1<H){fa=1;for(xa in ma.fields)ma.fields.hasOwnProperty(xa)&&(1===fa&&l[A-1].groupHeaders.push({startColumnName:xa,numberOfColumns:1,titleText:ma.label||ma.text}),
fa++);l[A-1].groupHeaders[l[A-1].groupHeaders.length-1].numberOfColumns=fa-1}else l.splice(A-1,1)}null!=ma[ta]&&"object"===typeof ma[ta]&&v(ma[ta]);if("level"===ta&&0<ma.level&&(ma.level===(0===A?ma.level:A)||-1!==W[ma.level].indexOf("_r_Totals")))for(xa in fa=0,ma.fields)if(ma.fields.hasOwnProperty(xa)){Y={};for(ua in m.aggregates[fa])if(m.aggregates[fa].hasOwnProperty(ua))switch(ua){case "member":case "label":case "aggregator":break;default:Y[ua]=m.aggregates[fa][ua]}1<H?(Y.name=xa,Y.label=m.aggregates[fa].label||
ma.label):(Y.name=ma.text,Y.label="_r_Totals"===ma.text?m.rowTotalsText:ma.label);d.push(Y);fa++}}}var t=this,u,n=c.length,x=0;m.rowTotals&&0<m.yDimension.length&&(m.yDimension.splice(0,0,{dataName:m.yDimension[0].dataName}),m.yDimension[0].converter=function(){return"_r_Totals"});var w=Array.isArray(m.xDimension)?m.xDimension.length:0;var A=m.yDimension.length;var H=Array.isArray(m.aggregates)?m.aggregates.length:0;if(0===w||0===H)throw"xDimension or aggregates optiona are not set!";var F=[],B=0;
for(u=0;u<w;u++)if(m.xDimension[u].hasOwnProperty("dataName")){var E={name:m.xDimension[u].dataName,frozen:m.frozenStaticCols};null==m.xDimension[u].isGroupField&&(m.xDimension[u].isGroupField=!0);m.xDimension[u].isGroupField&&F.push(m.xDimension[u].dataName);E=a.extend(!0,E,m.xDimension[u]);d.push(E)}else B++;w-=B;B={};var R=[];for(E=F.length;x<n;){var z=c[x];var O=[],U=[];var S={};for(u=u=0;u<d.length;u++){var K=d[u].name;z.hasOwnProperty(K)&&(O.push(a.jgrid.trim(z[K])),S[K]=a.jgrid.trim(z[K]))}u=
0;var ba=-1;K=q(f,r,O);if(!K){u=0;if(1<=A){for(u=0;u<A;u++)U[u]=a.jgrid.trim(z[m.yDimension[u].dataName]),void 0===U[u]?U[u]=null:m.yDimension[u].converter&&a.jgrid.isFunction(m.yDimension[u].converter)&&(U[u]=m.yDimension[u].converter.call(this,U[u],O,U));S=p(z,m.aggregates,U,S)}else 0===A&&(S=p(z,m.aggregates,null,S));for(u=0;u<m.xMeta.length;u++)O=m.xMeta[u],Object.hasOwn(O,"dataName")&&Object.hasOwn(z,O.dataName)&&(S[O.dataName]=z[O.dataName]+"");f.push(S)}else if(0<=ba){u=0;if(1<=A){for(u=0;u<
A;u++)U[u]=a.jgrid.trim(z[m.yDimension[u].dataName]),void 0===U[u]?U[u]=null:m.yDimension[u].converter&&a.jgrid.isFunction(m.yDimension[u].converter)&&(U[u]=m.yDimension[u].converter.call(this,U[u],O,U));K=p(z,m.aggregates,U,K)}else 0===A&&(K=p(z,m.aggregates,null,K));for(u=0;u<m.xMeta.length;u++)O=m.xMeta[u],Object.hasOwn(O,"dataName")&&Object.hasOwn(z,O.dataName)&&(S=Object.hasOwn(O,"separator")?O.separator:", ",K[O.dataName]+=S+z[O.dataName]);f[ba]=K}z=0;K=S=null;for(var T in g)if(g.hasOwnProperty(T)){if(0===
z)B.children&&void 0!==B.children||(B={text:T,level:0,children:[],label:T}),S=B.children;else{K=null;for(u=0;u<S.length;u++)if(S[u].text===T){K=S[u];break}K?S=K.children:(S.push({children:[],text:T,level:z,fields:g[T],label:b[T]}),S=S[S.length-1].children)}z++}x++}R=null;var W=[],qa=d.length,va=qa;0<A&&(l[A-1]={useColSpanStyle:!1,groupHeaders:[]});v(B);if(m.colTotals)for(x=f.length;x--;)for(u=w;u<d.length;u++)n=d[u].name,h[n]=h[n]?h[n]+a.jgrid.floatNum(f[x][n]):a.jgrid.floatNum(f[x][n]);if(0<E){for(u=
0;u<E;u++)k.groupingView.groupField.push(F[u]),k.groupingView.groupSummary.push(m.groupSummary),k.groupingView.groupSummaryPos.push(m.groupSummaryPos);k.sortname=F[u]}else k.grouping=!1;k.groupingView.hideFirstGroupCol=!0});return{colModel:d,rows:f,groupOptions:k,groupHeaders:l,summary:h}},jqPivot:function(c,e,d,f){return this.each(function(){function h(k){a.jgrid.isFunction(e.onInitPivot)&&e.onInitPivot.call(g);Array.isArray(k)||(k=[]);var l=jQuery(g).jqGrid("pivotSetup",k,e),m=0<a.assocArraySize(l.summary)?
!0:!1,q=a.jgrid.from.call(g,l.rows);e.ignoreCase&&(q=q.ignoreCase());for(k=0;k<l.groupOptions.groupingView.groupField.length;k++){var r=e.xDimension[k].sortorder?e.xDimension[k].sortorder:"asc";var p=e.xDimension[k].sorttype?e.xDimension[k].sorttype:"text";q.orderBy(l.groupOptions.groupingView.groupField[k],r,p,"",p)}var v=e.xDimension.length;if(d.sortname){r=d.sortorder?d.sortorder:"asc";p="text";for(k=0;k<v;k++)if(e.xDimension[k].dataName===d.sortname){p=e.xDimension[k].sorttype?e.xDimension[k].sorttype:
"text";break}q.orderBy(d.sortname,r,p,"",p)}else l.groupOptions.sortname&&v&&(r=e.xDimension[v-1].sortorder?e.xDimension[v-1].sortorder:"asc",p=e.xDimension[v-1].sorttype?e.xDimension[v-1].sorttype:"text",q.orderBy(l.groupOptions.sortname,r,p,"",p));jQuery(g).jqGrid(a.extend(!0,{data:a.extend(q.select(),m?{userdata:l.summary}:{}),datatype:"local",footerrow:m,userDataOnFooter:m,colModel:l.colModel,viewrecords:!0,formatFooterData:!0===e.colTotals?!0:!1,sortname:e.xDimension[0].dataName},l.groupOptions,
d||{}));l=l.groupHeaders;if(l.length)for(k=0;k<l.length;k++)l[k]&&l[k].groupHeaders.length&&jQuery(g).jqGrid("setGroupHeaders",l[k]);e.frozenStaticCols&&jQuery(g).jqGrid("setFrozenColumns");a.jgrid.isFunction(e.onCompletePivot)&&e.onCompletePivot.call(g);e.loadMsg&&a(".loading_pivot").remove()}var g=this,b=d.regional?d.regional:"en";void 0===e.loadMsg&&(e.loadMsg=!0);e.loadMsg&&a("<div class='loading_pivot ui-state-default ui-state-active row'>"+a.jgrid.getRegional(g,"regional."+b+".defaults.loadtext")+
"</div>").insertBefore(g).show();"string"===typeof c?a.ajax(a.extend({url:c,dataType:"json",success:function(k){h(a.jgrid.getAccessor(k,f&&f.reader?f.reader:"rows"))}},f||{})):h(c)})}});a.jgrid.extend({setSubGrid:function(){return this.each(function(){var c;var e=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].subgrid;this.p.subGridOptions=a.extend({plusicon:e.icon_plus,minusicon:e.icon_minus,openicon:e.icon_open,expandOnLoad:!1,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0,onErrorLoadData:null},
this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:a.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});e=this.p.subGridModel;if(e[0])for(e[0].align=a.extend([],e[0].align||[]),c=0;c<e[0].name.length;c++)e[0].align[c]=e[0].align[c]||"left"})},addSubGridCell:function(c,e){var d="",f,h,g;this.each(function(){d=this.formatCol(c,e);h=this.p.id;f=this.p.subGridOptions.plusicon;
g=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common});return'<td role="gridcell" aria-describedby="'+h+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+d+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+g.icon_base+" "+f+"'></span></a></td>"},addSubGrid:function(c,e){return this.each(function(){var d=this;if(d.grid){var f=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].base,h=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].common,g=a.jgrid.getRegional(this,"errors"),b=function(F,B,E){B=a("<td align='"+
d.p.subGridModel[0].align[E]+"'></td>").html(B);a(F).append(B)},k=function(F,B){var E,R=a("<table class='"+f.rowTable+" ui-common-table'><tbody></tbody></table>"),z=a("<tr></tr>");for(E=0;E<d.p.subGridModel[0].name.length;E++){var O=a("<th class='"+f.headerBox+" ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>");a(O).html(d.p.subGridModel[0].name[E]);a(O).width(d.p.subGridModel[0].width[E]);a(z).append(O)}a(R).append(z);if(F){var U=d.p.xmlReader.subgrid;a(U.root+" "+U.row,F).each(function(){z=
a("<tr class='"+h.content+" ui-subtblcell'></tr>");if(!0===U.repeatitems)a(U.cell,this).each(function(K){b(z,a(this).text()||"&#160;",K)});else{var S=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(S)for(E=0;E<S.length;E++)b(z,a.jgrid.getXmlData(this,S[E])||"&#160;",E)}a(R).append(z)})}F=a(d.grid.bDiv).find("table").first().attr("id")+"_";a("#"+a.jgrid.jqID(F+B)).append(R);d.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(d.p.id)).hide();return!1},l=function(F,B){var E,R,z=a("<table class='"+
f.rowTable+" ui-common-table'><tbody></tbody></table>"),O=a("<tr></tr>");for(E=0;E<d.p.subGridModel[0].name.length;E++){var U=a("<th class='"+f.headerBox+" ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>");a(U).html(d.p.subGridModel[0].name[E]);a(U).width(d.p.subGridModel[0].width[E]);a(O).append(U)}a(z).append(O);if(F&&(U=d.p.jsonReader.subgrid,F=a.jgrid.getAccessor(F,U.root),void 0!==F))for(E=0;E<F.length;E++){var S=F[E];O=a("<tr class='"+h.content+" ui-subtblcell'></tr>");if(!0===U.repeatitems)for(U.cell&&
(S=S[U.cell]),R=0;R<S.length;R++)b(O,S[R]||"&#160;",R);else{var K=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(K.length)for(R=0;R<K.length;R++)b(O,a.jgrid.getAccessor(S,K[R])||"&#160;",R)}a(z).append(O)}E=a(d.grid.bDiv).find("table").first().attr("id")+"_";a("#"+a.jgrid.jqID(E+B)).append(z);d.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(d.p.id)).hide();return!1},m=function(F){var B,E;var R=a(F).attr("id");var z={nd_:(new Date).getTime()};z[d.p.prmNames.subgridid]=R;if(!d.p.subGridModel[0])return!1;
if(d.p.subGridModel[0].params)for(E=0;E<d.p.subGridModel[0].params.length;E++)for(B=0;B<d.p.colModel.length;B++)d.p.colModel[B].name===d.p.subGridModel[0].params[E]&&(z[d.p.colModel[B].name]=a("td",F).eq(B).text().replace(/&#160;/ig,""));if(!d.grid.hDiv.loading)switch(d.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(d.p.id)).show(),d.p.subgridtype||(d.p.subgridtype=d.p.datatype),a.jgrid.isFunction(d.p.subgridtype)?d.p.subgridtype.call(d,z):d.p.subgridtype=d.p.subgridtype.toLowerCase(),d.p.subgridtype){case "xml":case "json":a.ajax(a.extend({type:d.p.mtype,
url:a.jgrid.isFunction(d.p.subGridUrl)?d.p.subGridUrl.call(d,z):d.p.subGridUrl,dataType:d.p.subgridtype,data:a.jgrid.isFunction(d.p.serializeSubGridData)?d.p.serializeSubGridData.call(d,z):z,success:function(O,U,S){"xml"===d.p.subgridtype?k(S.responseXML,R):l(a.jgrid.parse(S.responseText),R)},error:function(O,U,S){if(a.jgrid.isFunction(d.p.subGridOptions.onErrorLoadData))d.p.subGridOptions.onErrorLoadData.call(d,rowid,O,U,S);else{O=O.responseText+" <br/>"+O.statusText;try{a.jgrid.info_dialog(g.errcap,
'<div class="'+h.error+'">'+O+"</div>",edit.bClose,{buttonalign:"right",styleUI:d.p.styleUI})}catch(K){alert(O)}}}},a.jgrid.ajaxOptions,d.p.ajaxSubgridOptions||{}))}return!1},q,r,p,v=0,t,u;a.each(d.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name&&"sc"!==this.name||v++});var n=d.rows.length,x=1,w=a.jgrid.isFunction(d.p.isHasSubGrid);void 0!==e&&0<e&&(x=e,n=e+1);for(;x<n;){if(a(d.rows[x]).hasClass("jqgrow")){d.p.scroll&&a(d.rows[x].cells[c]).off("click");var A=null;w&&(A=
d.p.isHasSubGrid.call(d,d.rows[x].id));if(!1===A)d.rows[x].cells[c].innerHTML="";else a(d.rows[x].cells[c]).on("click",function(){var F=a(this).parent("tr")[0];r=d.p.id;q=F.id;u=a("#"+a.jgrid.jqID(r+"_"+q+"_expandedContent"));if(a(this).hasClass("sgcollapsed")){t=a(d).triggerHandler("jqGridSubGridBeforeExpand",[r+"_"+q,q]);(t=!1===t||"stop"===t?!1:!0)&&a.jgrid.isFunction(d.p.subGridBeforeExpand)&&(t=d.p.subGridBeforeExpand.call(d,r+"_"+q,q));if(!1===t)return!1;!0===d.p.subGridOptions.reloadOnExpand||
!1===d.p.subGridOptions.reloadOnExpand&&!u.hasClass("ui-subgrid")?(p=1<=c?"<td colspan='"+c+"'>&#160;</td>":"",a(F).after("<tr role='row' id='"+r+"_"+q+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+p+"<td class='"+h.content+" subgrid-cell'><span class='"+h.icon_base+" "+d.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(d.p.colNames.length-1-v,10)+"' class='"+h.content+" subgrid-data'><div id="+r+"_"+q+" class='tablediv'></div></td></tr>"),a(d).triggerHandler("jqGridSubGridRowExpanded",
[r+"_"+q,q]),a.jgrid.isFunction(d.p.subGridRowExpanded)?d.p.subGridRowExpanded.call(d,r+"_"+q,q):m(F)):u.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded");a(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+h.icon_base+" "+d.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");d.p.subGridOptions.selectOnExpand&&a(d).jqGrid("setSelection",q)}else if(a(this).hasClass("sgexpanded")){t=a(d).triggerHandler("jqGridSubGridRowColapsed",
[r+"_"+q,q]);(t=!1===t||"stop"===t?!1:!0)&&a.jgrid.isFunction(d.p.subGridRowColapsed)&&(t=d.p.subGridRowColapsed.call(d,r+"_"+q,q));if(!1===t)return!1;!0===d.p.subGridOptions.reloadOnExpand?u.remove(".ui-subgrid"):u.hasClass("ui-subgrid")&&u.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded");a(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+h.icon_base+" "+d.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");d.p.subGridOptions.selectOnCollapse&&
a(d).jqGrid("setSelection",q)}return!1})}x++}if(!0===d.p.subGridOptions.expandOnLoad){var H=0;d.p.multiselect&&H++;d.p.rownumbers&&H++;a(d.rows).filter(".jqgrow").each(function(F,B){a(B.cells[H]).click()})}d.subGridXml=function(F,B){k(F,B)};d.subGridJson=function(F,B){l(F,B)}}})},expandSubGridRow:function(c){return this.each(function(){if((this.grid||c)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",c,!0);e&&(e=a("td.sgcollapsed",e)[0])&&a(e).trigger("click")}})},collapseSubGridRow:function(c){return this.each(function(){if((this.grid||
c)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",c,!0);e&&(e=a("td.sgexpanded",e)[0])&&a(e).trigger("click")}})},toggleSubGridRow:function(c){return this.each(function(){if((this.grid||c)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",c,!0);if(e){var d=a("td.sgcollapsed",e)[0];d?a(d).trigger("click"):(d=a("td.sgexpanded",e)[0])&&a(d).trigger("click")}}})}});a.jgrid.extend({setTreeNode:function(c,e){return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var f=d.p.expColInd,h=d.p.treeReader.expanded_field,
g=d.p.treeReader.leaf_field,b=d.p.treeReader.level_field,k=d.p.treeReader.icon_field,l=d.p.treeReader.loaded,m=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].common,q=c;a(d).triggerHandler("jqGridBeforeSetTreeNode",[q,e]);for(a.jgrid.isFunction(d.p.beforeSetTreeNode)&&d.p.beforeSetTreeNode.call(d,q,e);c<e;){var r=a.jgrid.stripPref(d.p.idPrefix,d.rows[c].id);r=d.p.data[d.p._index[r]];if("nested"===d.p.treeGridModel&&!r[g]){var p=parseInt(r[d.p.treeReader.left_field],10);var v=parseInt(r[d.p.treeReader.right_field],
10);r[g]=v===p+1?"true":"false";d.rows[c].cells[d.p._treeleafpos].innerHTML=r[g]}p=parseInt(r[b],10);if(0===d.p.tree_root_level){var t=p+1;v=p}else t=p,v=p-1;t="<div class='tree-wrap tree-wrap-"+d.p.direction+"' style='width:"+18*t+"px;'>";t+="<div style='"+("rtl"===d.p.direction?"right:":"left:")+18*v+"px;' class='"+m.icon_base+" ";void 0!==r[l]&&(r[l]="true"===r[l]||!0===r[l]?!0:!1);"true"===r[g]||!0===r[g]?(t+=(void 0!==r[k]&&""!==r[k]?r[k]:d.p.treeIcons.leaf)+" tree-leaf treeclick",r[g]=!0,v=
"leaf"):(r[g]=!1,v="");r[h]=("true"===r[h]||!0===r[h]?!0:!1)&&(r[l]||void 0===r[l]);t=!1===r[h]?t+(!0===r[g]?"'":d.p.treeIcons.plus+" tree-plus treeclick'"):t+(!0===r[g]?"'":d.p.treeIcons.minus+" tree-minus treeclick'");t+="></div></div>";a(d.rows[c].cells[f]).wrapInner("<span class='cell-wrapper"+v+"'></span>").prepend(t);p!==parseInt(d.p.tree_root_level,10)&&((r=a(d).jqGrid("isVisibleNode",r))||a(d.rows[c]).css("display","none"));a(d.rows[c].cells[f]).find("div.treeclick").on("click",function(u){u=
a.jgrid.stripPref(d.p.idPrefix,a(u.target||u.srcElement,d.rows).closest("tr.jqgrow")[0].id);u=d.p._index[u];d.p.data[u][g]||(d.p.data[u][h]?(a(d).jqGrid("collapseRow",d.p.data[u]),a(d).jqGrid("collapseNode",d.p.data[u])):(a(d).jqGrid("expandRow",d.p.data[u]),a(d).jqGrid("expandNode",d.p.data[u])))});if(!0===d.p.ExpandColClick)a(d.rows[c].cells[f]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(u){u=a.jgrid.stripPref(d.p.idPrefix,a(u.target||u.srcElement,d.rows).closest("tr.jqgrow")[0].id);
var n=d.p._index[u];d.p.data[n][g]||(d.p.data[n][h]?(a(d).jqGrid("collapseRow",d.p.data[n]),a(d).jqGrid("collapseNode",d.p.data[n])):(a(d).jqGrid("expandRow",d.p.data[n]),a(d).jqGrid("expandNode",d.p.data[n])));a(d).jqGrid("setSelection",u)});c++}a(d).triggerHandler("jqGridAfterSetTreeNode",[q,e]);a.jgrid.isFunction(d.p.afterSetTreeNode)&&d.p.afterSetTreeNode.call(d,q,e)}})},setTreeGrid:function(){return this.each(function(){var c=this,e=0,d=!1,f,h,g=[],b=a.jgrid.styleUI[c.p.styleUI||"jQueryUI"].treegrid;
if(c.p.treeGrid){c.p.treedatatype||a.extend(c.p,{treedatatype:c.p.datatype});c.p.loadonce&&(c.p.treedatatype="local");c.p.subGrid=!1;c.p.altRows=!1;c.p.treeGrid_bigData||(c.p.pgbuttons=!1,c.p.pginput=!1,c.p.rowList=[]);c.p.gridview=!0;null!==c.p.rowTotal||c.p.treeGrid_bigData||(c.p.rowNum=1E4);c.p.multiselect=!1;c.p.expColInd=0;var k=b.icon_plus;"jQueryUI"===c.p.styleUI&&(k+="rtl"===c.p.direction?"w":"e");c.p.treeIcons=a.extend({plus:k,minus:b.icon_minus,leaf:b.icon_leaf},c.p.treeIcons||{});"nested"===
c.p.treeGridModel?c.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},c.p.treeReader):"adjacency"===c.p.treeGridModel&&(c.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},c.p.treeReader));for(f in c.p.colModel)if(c.p.colModel.hasOwnProperty(f)){k=c.p.colModel[f].name;k!==c.p.ExpandColumn||d||
(d=!0,c.p.expColInd=e);e++;if(k===c.p.treeReader.level_field||k===c.p.treeReader.left_field||k===c.p.treeReader.right_field)c.p.colModel[f].sorttype="integer";for(h in c.p.treeReader)c.p.treeReader.hasOwnProperty(h)&&c.p.treeReader[h]===k&&g.push(k)}a.each(c.p.treeReader,function(l,m){m&&-1===a.inArray(m,g)&&("leaf_field"===l&&(c.p._treeleafpos=e),e++,c.p.colNames.push(m),c.p.colModel.push({name:m,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(c){this.each(function(){var e=
this;if(!e.p.treeGrid_bigData)var d=e.p.lastpage;if(e.grid&&e.p.treeGrid){var f=a(e).jqGrid("getNodeChildren",c),h=e.p.treeReader.expanded_field,g=c[e.p.localReader.id],b=a(e).triggerHandler("jqGridBeforeExpandTreeGridRow",[g,c,f]);void 0===b&&(b=!0);b&&a.jgrid.isFunction(e.p.beforeExpandTreeGridRow)&&(b=e.p.beforeExpandTreeGridRow.call(e,g,c,f));!1!==b&&(a(f).each(function(){var k=e.p.idPrefix+a.jgrid.getAccessor(this,e.p.localReader.id);a(a(e).jqGrid("getGridRowById",k)).css("display","");this[h]&&
a(e).jqGrid("expandRow",this)}),a(e).triggerHandler("jqGridAfterExpandTreeGridRow",[g,c,f]),a.jgrid.isFunction(e.p.afterExpandTreeGridRow)&&e.p.afterExpandTreeGridRow.call(e,g,c,f),e.p.treeGrid_bigData||(e.p.lastpage=d))}})},collapseRow:function(c){this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var d=a(e).jqGrid("getNodeChildren",c),f=e.p.treeReader.expanded_field,h=c[e.p.localReader.id],g=a(e).triggerHandler("jqGridBeforeCollapseTreeGridRow",[h,c,d]);void 0===g&&(g=!0);g&&a.jgrid.isFunction(e.p.beforeCollapseTreeGridRow)&&
(g=e.p.beforeCollapseTreeGridRow.call(e,h,c,d));!1!==g&&(a(d).each(function(){var b=e.p.idPrefix+a.jgrid.getAccessor(this,e.p.localReader.id);a(a(e).jqGrid("getGridRowById",b)).css("display","none");this[f]&&a(e).jqGrid("collapseRow",this)}),a(e).triggerHandler("jqGridAfterCollapseTreeGridRow",[h,c,d]),a.jgrid.isFunction(e.p.afterCollapseTreeGridRow)&&e.p.afterCollapseTreeGridRow.call(e,h,c,d))}})},getRootNodes:function(){var c=[];this.each(function(){var e=this,d=e.p.data;if(e.grid&&e.p.treeGrid)switch(e.p.treeGridModel){case "nested":var f=
e.p.treeReader.level_field;a(d).each(function(){parseInt(this[f],10)===parseInt(e.p.tree_root_level,10)&&c.push(this)});break;case "adjacency":var h=e.p.treeReader.parent_id_field;a(d).each(function(){null!==this[h]&&"null"!==String(this[h]).toLowerCase()||c.push(this)})}});return c},getNodeDepth:function(c){var e=null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":e=parseInt(c[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;
case "adjacency":e=a(this).jqGrid("getNodeAncestors",c).length}});return e},getNodeParent:function(c){var e=null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":var d=this.p.treeReader.left_field,f=this.p.treeReader.right_field,h=this.p.treeReader.level_field,g=parseInt(c[d],10),b=parseInt(c[f],10),k=parseInt(c[h],10);a(this.p.data).each(function(){if(parseInt(this[h],10)===k-1&&parseInt(this[d],10)<g&&parseInt(this[f],10)>b)return e=this,!1});break;case "adjacency":for(var l=
this.p.treeReader.parent_id_field,m=this.p.localReader.id,q=this.p._index[c[m]];q--;)if(String(this.p.data[q][m])===String(a.jgrid.stripPref(this.p.idPrefix,c[l]))){e=this.p.data[q];break}}});return e},getNodeChildren:function(c){var e=[];this.each(function(){if(this.grid&&this.p.treeGrid){var d,f=this.p.data.length,h;switch(this.p.treeGridModel){case "nested":var g=this.p.treeReader.left_field,b=this.p.treeReader.right_field,k=this.p.treeReader.level_field,l=parseInt(c[g],10),m=parseInt(c[b],10),
q=parseInt(c[k],10);for(d=0;d<f;d++)(h=this.p.data[d])&&parseInt(h[k],10)===q+1&&parseInt(h[g],10)>l&&parseInt(h[b],10)<m&&e.push(h);break;case "adjacency":for(g=this.p.treeReader.parent_id_field,b=this.p.localReader.id,d=0;d<f;d++)(h=this.p.data[d])&&String(h[g])===String(a.jgrid.stripPref(this.p.idPrefix,c[b]))&&e.push(h)}}});return e},getFullTreeNode:function(c,e){var d=[];this.each(function(){var f=this,h,g=f.p.treeReader.expanded_field;if(f.grid&&f.p.treeGrid){if(null==e||"boolean"!==typeof e)e=
!1;switch(f.p.treeGridModel){case "nested":var b=f.p.treeReader.left_field,k=f.p.treeReader.right_field,l=f.p.treeReader.level_field,m=parseInt(c[b],10),q=parseInt(c[k],10),r=parseInt(c[l],10);a(this.p.data).each(function(){parseInt(this[l],10)>=r&&parseInt(this[b],10)>=m&&parseInt(this[b],10)<=q&&(e&&(this[g]=!0),d.push(this))});break;case "adjacency":if(c){d.push(c);var p=f.p.treeReader.parent_id_field,v=f.p.localReader.id;a(this.p.data).each(function(t){h=d.length;for(t=0;t<h;t++)if(String(a.jgrid.stripPref(f.p.idPrefix,
d[t][v]))===String(this[p])){e&&(this[g]=!0);d.push(this);break}})}}}});return d},getNodeAncestors:function(c,e,d){var f=[];void 0===e&&(e=!1);this.each(function(){if(this.grid&&this.p.treeGrid){d=void 0===d?!1:this.p.treeReader.expanded_field;for(var h=a(this).jqGrid("getNodeParent",c);h;){if(d)try{h[d]=!0}catch(g){}e?f.unshift(h):f.push(h);h=a(this).jqGrid("getNodeParent",h)}}});return f},isVisibleNode:function(c){var e=!0;this.each(function(){if(this.grid&&this.p.treeGrid){var d=a(this).jqGrid("getNodeAncestors",
c),f=this.p.treeReader.expanded_field;a(d).each(function(){e=e&&this[f];if(!e)return!1})}});return e},isNodeLoaded:function(c){var e;this.each(function(){if(this.grid&&this.p.treeGrid){var d=this.p.treeReader.leaf_field,f=this.p.treeReader.loaded;e=void 0!==c?void 0!==c[f]?c[f]:c[d]||0<a(this).jqGrid("getNodeChildren",c).length?!0:!1:!1}});return e},setLeaf:function(c,e,d){return this.each(function(){var f=a.jgrid.getAccessor(c,this.p.localReader.id),h=a("#"+f,this.grid.bDiv)[0],g=this.p.treeReader.leaf_field;
try{var b=this.p._index[f];null!=b&&(this.p.data[b][g]=e)}catch(k){}!0===e?a("div.treeclick",h).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf"):!1===e&&(f=this.p.treeIcons.minus+" tree-minus",d&&(f=this.p.treeIcons.plus+" tree-plus"),a("div.treeclick",h).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(f))})},reloadNode:function(c,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var d=this.p.localReader.id,
f=this.p.selrow;a(this).jqGrid("delChildren",c[d]);void 0===e&&(e=!1);if(!e&&!jQuery._data(this,"events").jqGridAfterSetTreeNode)a(this).on("jqGridAfterSetTreeNode.reloadNode",function(){var p=this.p.treeReader.leaf_field;if(this.p.reloadnode){var v=this.p.reloadnode,t=a(this).jqGrid("getNodeChildren",v);v[p]&&t.length?a(this).jqGrid("setLeaf",v,!1):v[p]||0!==t.length||a(this).jqGrid("setLeaf",v,!0)}this.p.reloadnode=!1});d=this.p.treeReader.expanded_field;var h=this.p.treeReader.parent_id_field,
g=this.p.treeReader.loaded,b=this.p.treeReader.level_field,k=this.p.treeReader.leaf_field,l=this.p.treeReader.left_field,m=this.p.treeReader.right_field,q=a.jgrid.getAccessor(c,this.p.localReader.id),r=a("#"+q,this.grid.bDiv)[0];c[d]=!0;c[k]||a("div.treeclick",r).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=r.rowIndex;this.p.datatype=this.p.treedatatype;this.p.reloadnode=c;e&&(this.p.treeANode=0<r.rowIndex?r.rowIndex-1:1,a(this).jqGrid("delRowData",
q));"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:q,n_left:c[l],n_right:c[m],n_level:c[b]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:q,parentid:c[h],n_level:c[b]}});a(this).trigger("reloadGrid");c[g]=!0;"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(c){return this.each(function(){if(this.grid&&
this.p.treeGrid){var e=this.p.treeReader.expanded_field,d=this.p.treeReader.parent_id_field,f=this.p.treeReader.loaded,h=this.p.treeReader.level_field,g=this.p.treeReader.left_field,b=this.p.treeReader.right_field;if(!c[e]){var k=a.jgrid.getAccessor(c,this.p.localReader.id),l=a("#"+this.p.idPrefix+a.jgrid.jqID(k),this.grid.bDiv)[0],m=this.p._index[k],q=a(this).triggerHandler("jqGridBeforeExpandTreeGridNode",[k,c]);void 0===q&&(q=!0);q&&a.jgrid.isFunction(this.p.beforeExpandTreeGridNode)&&(q=this.p.beforeExpandTreeGridNode.call(this,
k,c));!1!==q&&(a(this).jqGrid("isNodeLoaded",this.p.data[m])?(c[e]=!0,a("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(c[e]=!0,a("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=l.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:k,n_left:c[g],n_right:c[b],
n_level:c[h]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:k,parentid:c[d],n_level:c[h]}}),a(this).trigger("reloadGrid"),c[f]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})),a(this).triggerHandler("jqGridAfterExpandTreeGridNode",[k,c]),a.jgrid.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,k,c))}}})},collapseNode:function(c){return this.each(function(){if(this.grid&&
this.p.treeGrid){var e=this.p.treeReader.expanded_field;if(c[e]){var d=a.jgrid.getAccessor(c,this.p.localReader.id),f=a("#"+this.p.idPrefix+a.jgrid.jqID(d),this.grid.bDiv)[0],h=a(this).triggerHandler("jqGridBeforeCollapseTreeGridNode",[d,c]);void 0===h&&(h=!0);h&&a.jgrid.isFunction(this.p.beforeCollapseTreeGridNode)&&(h=this.p.beforeCollapseTreeGridNode.call(this,d,c));c[e]=!1;!1!==h&&(a("div.treeclick",f).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"),
a(this).triggerHandler("jqGridAfterCollapseTreeGridNode",[d,c]),a.jgrid.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,d,c))}}})},SortTree:function(c,e,d,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var h=[],g=this;var b=a(this).jqGrid("getRootNodes",g.p.search);b=a.jgrid.from.call(this,b);if(g.p.sortTreeByNodeType){var k=g.p.sortTreeNodeOrder&&"desc"===g.p.sortTreeNodeOrder.toLowerCase()?"d":"a";b.orderBy(g.p.treeReader.leaf_field,k,d,f)}b.orderBy(c,
e,d,f);var l=b.select();b=0;for(k=l.length;b<k;b++){var m=l[b];h.push(m);a(this).jqGrid("collectChildrenSortTree",h,m,c,e,d,f)}var q=a(this).jqGrid("getDataIDs"),r=1;a.each(h,function(p){p=a.jgrid.getAccessor(this,g.p.localReader.id);-1!==a.inArray(p,q)&&(a("#"+a.jgrid.jqID(g.p.id)+" tbody tr").eq(r).after(a("#"+a.jgrid.jqID(g.p.id)+" tbody tr#"+a.jgrid.jqID(p))),r++)});h=l=b=null}})},searchTree:function(c){var e=c.length||0,d=[],f,h=[],g=[],b,k,l,m,q,r;this.each(function(){if(this.grid&&this.p.treeGrid&&
e)for(f=this.p.localReader.id,r=0;r<e;r++){d=a(this).jqGrid("getNodeAncestors",c[r],!0,!0);if(this.p.FullTreeSearchResult){var p=a(this).jqGrid("getFullTreeNode",c[r],!0);d=d.concat(p)}else d.push(c[r]);b=d[0][f];if(-1!==a.inArray(b,h))for(m=0,k=d.length;m<k;m++){p=!1;q=0;for(l=g.length;q<l;q++)if(d[m][f]===g[q][f]){p=!0;break}p||g.push(d[m])}else h.push(b),g=g.concat(d)}});return g},collectChildrenSortTree:function(c,e,d,f,h,g){return this.each(function(){if(this.grid&&this.p.treeGrid){var b;var k=
a(this).jqGrid("getNodeChildren",e,this.p.search);k=a.jgrid.from.call(this,k);k.orderBy(d,f,h,g);var l=k.select();k=0;for(b=l.length;k<b;k++){var m=l[k];c.push(m);a(this).jqGrid("collectChildrenSortTree",c,m,d,f,h,g)}}})},setTreeRow:function(c,e){var d=!1;this.each(function(){this.grid&&this.p.treeGrid&&(d=a(this).jqGrid("setRowData",c,e))});return d},delTreeNode:function(c,e){return this.each(function(){var d=this.p.localReader.id,f,h=this.p.treeReader.left_field,g,b=this.p.treeReader.right_field,
k;if(this.grid&&this.p.treeGrid){c=a.jgrid.stripPref(this.p.idPrefix,c);var l=this.p._index[c];e&&(g=a(this).jqGrid("getNodeParent",this.p.data[l]));if(void 0!==l){var m=parseInt(this.p.data[l][b],10);var q=m-parseInt(this.p.data[l][h],10)+1;var r=a(this).jqGrid("getFullTreeNode",this.p.data[l]);if(0<r.length)for(f=0;f<r.length;f++)a(this).jqGrid("delRowData",this.p.idPrefix+r[f][d]);if("nested"===this.p.treeGridModel){d=a.jgrid.from.call(this,this.p.data).greater(h,m,{stype:"integer"}).select();
if(d.length)for(k in d)d.hasOwnProperty(k)&&(d[k][h]=parseInt(d[k][h],10)-q);d=a.jgrid.from.call(this,this.p.data).greater(b,m,{stype:"integer"}).select();if(d.length)for(k in d)d.hasOwnProperty(k)&&(d[k][b]=parseInt(d[k][b],10)-q)}e&&(h=this.p.treeReader.leaf_field,b=a(this).jqGrid("getNodeChildren",g),g[h]&&b.length?a(this).jqGrid("setLeaf",g,!1):l[h]||0!==b.length||a(this).jqGrid("setLeaf",g,!0))}}})},delChildren:function(c){return this.each(function(){var e=this.p.localReader.id,d=this.p.treeReader.left_field,
f=this.p.treeReader.right_field,h;if(this.grid&&this.p.treeGrid){c=a.jgrid.stripPref(this.p.idPrefix,c);var g=this.p._index[c];if(void 0!==g){var b=parseInt(this.p.data[g][f],10);var k=b-parseInt(this.p.data[g][d],10)+1;g=a(this).jqGrid("getFullTreeNode",this.p.data[g]);if(0<g.length)for(var l=0;l<g.length;l++)g[l][e]!==c&&a(this).jqGrid("delRowData",this.p.idPrefix+g[l][e]);if("nested"===this.p.treeGridModel){e=a.jgrid.from(this.p.data).greater(d,b,{stype:"integer"}).select();if(e.length)for(h in e)e.hasOwnProperty(h)&&
(e[h][d]=parseInt(e[h][d],10)-k);e=a.jgrid.from(this.p.data).greater(f,b,{stype:"integer"}).select();if(e.length)for(h in e)e.hasOwnProperty(h)&&(e[h][f]=parseInt(e[h][f],10)-k)}}}})},addChildNode:function(c,e,d,f){var h=this[0];if(d){var g=h.p.treeReader.expanded_field,b=h.p.treeReader.leaf_field,k=h.p.treeReader.level_field,l=h.p.treeReader.parent_id_field,m=h.p.treeReader.left_field,q=h.p.treeReader.right_field,r=h.p.treeReader.loaded;var p=0;var v=e;void 0===f&&(f=!1);if(null==c){var t=h.p.data.length-
1;if(0<=t)for(;0<=t;)p=Math.max(p,parseInt(h.p.data[t][h.p.localReader.id],10)),t--;c=p+1}var u=a(h).jqGrid("getInd",e);var n=!1;if(void 0===e||null===e||""===e){v=e=null;p="last";var x=h.p.tree_root_level;t=h.p.data.length+1}else{p="after";e=a.jgrid.stripPref(h.p.idPrefix,e);var w=h.p._index[e];var A=h.p.data[w];e=A[h.p.localReader.id];x=parseInt(A[k],10)+1;t=a(h).jqGrid("getFullTreeNode",A);t.length?(v=t=t[t.length-1][h.p.localReader.id],t=a(h).jqGrid("getInd",h.p.idPrefix+v)):t=a(h).jqGrid("getInd",
h.p.idPrefix+e);A[b]&&(n=!0,A[g]=!0,a(h.rows[u]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(h.p.treeIcons.leaf+" tree-leaf").addClass(h.p.treeIcons.minus+" tree-minus"),h.p.data[w][b]=!1,A[r]=!0);if(!1===t)throw"Parent item with id: "+v+" ("+e+") can't be found";t++}w=t+1;void 0===d[g]&&(d[g]=!1);void 0===d[r]&&(d[r]=!1);d[k]=x;void 0===d[b]&&(d[b]=!0);"adjacency"===h.p.treeGridModel&&(d[l]=e);if("nested"===h.p.treeGridModel){var H;
if(null!==e){b=parseInt(A[q],10);k=a.jgrid.from.call(h,h.p.data);k=k.greaterOrEquals(q,b,{stype:"integer"});k=k.select();if(k.length)for(H in k)k.hasOwnProperty(H)&&(k[H][m]=k[H][m]>b?parseInt(k[H][m],10)+2:k[H][m],k[H][q]=k[H][q]>=b?parseInt(k[H][q],10)+2:k[H][q]);d[m]=b;d[q]=b+1}else{b=parseInt(a(h).jqGrid("getCol",q,!1,"max"),10);k=a.jgrid.from.call(h,h.p.data).greater(m,b,{stype:"integer"}).select();if(k.length)for(H in k)k.hasOwnProperty(H)&&(k[H][m]=parseInt(k[H][m],10)+2);k=a.jgrid.from.call(h,
h.p.data).greater(q,b,{stype:"integer"}).select();if(k.length)for(H in k)k.hasOwnProperty(H)&&(k[H][q]=parseInt(k[H][q],10)+2);d[m]=b+1;d[q]=b+2}}if(null===e||a(h).jqGrid("isNodeLoaded",A)||n)a(h).jqGrid("addRowData",c,d,p,h.p.idPrefix+v),a(h).jqGrid("setTreeNode",t,w);A&&!A[g]&&f&&a(h.rows[u]).find("div.treeclick").click()}}});a.fn.jqDrag=function(c){return dc(this,c,"d")};a.fn.jqResize=function(c,e){return dc(this,c,"r",e)};a.jqDnR={dnr:{},e:0,drag:function(c){"d"==nb.k?ob.css({left:nb.X+c.pageX-
nb.pX,top:nb.Y+c.pageY-nb.pY}):(ob.css({width:Math.max(c.pageX-nb.pX+nb.W,0),height:Math.max(c.pageY-nb.pY+nb.H,0)}),Bb&&Cb.css({width:Math.max(c.pageX-Bb.pX+Bb.W,0),height:Math.max(c.pageY-Bb.pY+Bb.H,0)}));return!1},stop:function(){a(document).off("mousemove",Ob.drag).off("mouseup",Ob.stop)}};var Ob=a.jqDnR,nb=Ob.dnr,ob=Ob.e,Cb,Bb,dc=function(c,e,d,f){return c.each(function(){e=e?a(e,c):c;e.on("mousedown",{e:c,k:d},function(h){var g=h.data,b={};ob=g.e;Cb=f?a(f):!1;if("relative"!=ob.css("position"))try{ob.position(b)}catch(k){}nb=
{X:b.left||Db("left")||0,Y:b.top||Db("top")||0,W:Db("width")||ob[0].scrollWidth||0,H:Db("height")||ob[0].scrollHeight||0,pX:h.pageX,pY:h.pageY,k:g.k};Bb=Cb&&"d"!=g.k?{X:b.left||Pb("left")||0,Y:b.top||Pb("top")||0,W:Cb[0].offsetWidth||Pb("width")||0,H:Cb[0].offsetHeight||Pb("height")||0,pX:h.pageX,pY:h.pageY,k:g.k}:!1;if(a("input.hasDatepicker",ob[0])[0])try{a("input.hasDatepicker",ob[0]).datepicker("hide")}catch(k){}a(document).mousemove(a.jqDnR.drag).mouseup(a.jqDnR.stop);return!1})})},Db=function(c){return parseInt(ob.css(c),
10)||!1},Pb=function(c){return parseInt(Cb.css(c),10)||!1};a.fn.tinyDraggable=function(c){var e=a.extend({handle:0,exclude:0},c);return this.each(function(){var d,f,h=a(this);(e.handle?a(e.handle,h):h).on({mousedown:function(g){if(!e.exclude||!~a.inArray(g.target,a(e.exclude,h))){g.preventDefault();var b=h.offset();d=g.pageX-b.left;f=g.pageY-b.top;a(document).on("mousemove.drag",function(k){h.offset({top:k.pageY-f,left:k.pageX-d})})}},mouseup:function(g){a(document).off("mousemove.drag")}})})};a.fn.jqm=
function(c){var e={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:Za,ajaxText:"",target:Za,modal:Za,toTop:Za,onShow:Za,onHide:Za,onLoad:Za};return this.each(function(){if(this._jqm)return rb[this._jqm].c=a.extend({},rb[this._jqm].c,c);Fb++;this._jqm=Fb;rb[Fb]={c:a.extend(e,a.jqm.params,c),a:Za,w:a(this).addClass("jqmID"+Fb),s:Fb};e.trigger&&a(this).jqmAddTrigger(e.trigger)})};a.fn.jqmAddClose=function(c){return ec(this,c,"jqmHide")};a.fn.jqmAddTrigger=
function(c){return ec(this,c,"jqmShow")};a.fn.jqmShow=function(c){return this.each(function(){a.jqm.open(this._jqm,c)})};a.fn.jqmHide=function(c){return this.each(function(){a.jqm.close(this._jqm,c)})};a.jqm={hash:{},open:function(c,e){var d=rb[c],f=d.c,h="."+f.closeClass,g=parseInt(d.w.css("z-index"));g=0<g?g:3E3;var b=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":g-1,opacity:f.overlay/100});if(d.a)return Za;d.t=e;d.a=!0;d.w.css("z-index",g);f.modal?(ub[0]||
setTimeout(function(){new fc("bind")},1),ub.push(c)):0<f.overlay?f.closeoverlay&&d.w.jqmAddClose(b):b=Za;d.o=b?b.addClass(f.overlayClass).prependTo("body"):Za;f.ajax?(c=f.target||d.w,g=f.ajax,c="string"===typeof c?a(c,d.w):a(c),g="@"===g.substr(0,1)?a(e).attr(g.substring(1)):g,c.html(f.ajaxText).load(g,function(){f.onLoad&&f.onLoad.call(this,d);h&&d.w.jqmAddClose(a(h,d.w));gc(d)})):h&&d.w.jqmAddClose(a(h,d.w));f.toTop&&d.o&&d.w.before('<span id="jqmP'+d.w[0]._jqm+'"></span>').insertAfter(d.o);f.onShow?
f.onShow(d):d.w.show();gc(d);return Za},close:function(c){c=rb[c];if(!c.a)return Za;c.a=Za;ub[0]&&(ub.pop(),ub[0]||new fc("unbind"));c.c.toTop&&c.o&&a("#jqmP"+c.w[0]._jqm).after(c.w).remove();if(c.c.onHide)c.c.onHide(c);else c.w.hide(),c.o&&c.o.remove();return Za},params:{}};var Fb=0,rb=a.jqm.hash,ub=[],Za=!1,gc=function(c){void 0===c.c.focusField&&(c.c.focusField=0);0<=c.c.focusField&&Db(c)};Db=function(c){try{a(":input:visible",c.w)[parseInt(c.c.focusField,10)].focus()}catch(e){}};var fc=function(c){a(document)[c]("keypress",
Zb)[c]("keydown",Zb)[c]("mousedown",Zb)},Zb=function(c){var e=rb[ub[ub.length-1]],d=!a(c.target).parents(".jqmID"+e.s)[0];d&&a(".jqmID"+e.s).each(function(){var f=a(this),h=f.offset();if(h.top<=c.pageY&&c.pageY<=h.top+f.height()&&h.left<=c.pageX&&c.pageX<=h.left+f.width())return d=!1});return!d},ec=function(c,e,d){return c.each(function(){var f=this._jqm;a(e).each(function(){this[d]||(this[d]=[],a(this).click(function(){for(var h in{jqmShow:1,jqmHide:1})for(var g in this[h])if(rb[this[h][g]])rb[this[h][g]].w[h](this);
return Za}));this[d].push(f)})})};a.fmatter={};a.extend(a.fmatter,{isBoolean:function(c){return"boolean"===typeof c},isObject:function(c){return c&&("object"===typeof c||a.jgrid.isFunction(c))||!1},isString:function(c){return"string"===typeof c},isNumber:function(c){return"number"===typeof c&&isFinite(c)},isValue:function(c){return this.isObject(c)||this.isString(c)||this.isNumber(c)||this.isBoolean(c)},isEmpty:function(c){if(!this.isString(c)&&this.isValue(c))return!1;if(!this.isValue(c))return!0;
c=a.jgrid.trim(c).replace(/&nbsp;/ig,"").replace(/&#160;/ig,"");return""===c}});a.fn.fmatter=function(c,e,d,f,h){var g=e;d=a.extend({},a.jgrid.getRegional(this,"formatter"),d);try{g=a.fn.fmatter[c].call(this,e,d,f,h)}catch(b){}return g};a.fmatter.util={NumberFormat:function(c,e){a.fmatter.isNumber(c)||(c*=1);if(a.fmatter.isNumber(c)){var d=0>c,f=String(c),h=e.decimalSeparator||".";if(a.fmatter.isNumber(e.decimalPlaces)){var g=e.decimalPlaces;f=String(Number(Math.round(c+"e"+g)+"e-"+g));c=f.lastIndexOf(".");
if(0<g)for(0>c?(f+=h,c=f.length-1):"."!==h&&(f=f.replace(".",h));f.length-1-c<g;)f+="0"}if(e.thousandsSeparator){g=e.thousandsSeparator;c=f.lastIndexOf(h);c=-1<c?c:f.length;h=f.substring(c);var b=-1,k;for(k=c;0<k;k--)b++,0===b%3&&k!==c&&(!d||1<k)&&(h=g+h),h=f.charAt(k-1)+h;f=h}f=e.prefix?e.prefix+f:f;return f=e.suffix?f+e.suffix:f}return c}};a.fn.fmatter.defaultFormat=function(c,e){return a.fmatter.isValue(c)&&""!==c?c:e.defaultValue||"&#160;"};a.fn.fmatter.email=function(c,e){return a.fmatter.isEmpty(c)?
a.fn.fmatter.defaultFormat(c,e):'<a href="mailto:'+c+'">'+c+"</a>"};a.fn.fmatter.checkbox=function(c,e){var d=a.extend({},e.checkbox);var f=Object.keys(a.jgrid.regional)[0];void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(d=a.extend({},d,e.colModel.formatoptions));e=!0===d.disabled?'disabled="disabled"':"";if(a.fmatter.isEmpty(c)||void 0===c)c=a.fn.fmatter.defaultFormat(c,d);c=String(c);c=(c+"").toLowerCase();var h=0>c.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"";d=a.jgrid.regional[f].defaults.valueCheckbox;
var g=a.jgrid.regional[f].defaults.valT;f=a.jgrid.regional[f].defaults.valF;return'<input title="'+(void 0!==d&&"true"===c?d+" "+g:void 0!==d&&"false"===c?d+" "+f:c)+'" type="checkbox" '+h+' value="'+c+'" offval="no" '+e+"/>"};a.fn.fmatter.link=function(c,e){var d={target:e.target},f="";void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(d=a.extend({},d,e.colModel.formatoptions));d.target&&(f="target="+d.target);return a.fmatter.isEmpty(c)?a.fn.fmatter.defaultFormat(c,e):"<a "+f+' href="'+c+
'">'+c+"</a>"};a.fn.fmatter.showlink=function(c,e){var d={baseLinkUrl:e.baseLinkUrl,showAction:e.showAction,addParam:e.addParam||"",target:e.target,idName:e.idName},f="";void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(d=a.extend({},d,e.colModel.formatoptions));d.target&&(f="target="+d.target);d=d.baseLinkUrl+d.showAction+"?"+d.idName+"="+e.rowId+d.addParam;return a.fmatter.isString(c)||a.fmatter.isNumber(c)?"<a "+f+' href="'+d+'">'+c+"</a>":a.fn.fmatter.defaultFormat(c,e)};a.fn.fmatter.integer=
function(c,e){var d=a.extend({},e.integer);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(d=a.extend({},d,e.colModel.formatoptions));return a.fmatter.isEmpty(c)?d.defaultValue:a.fmatter.util.NumberFormat(c,d)};a.fn.fmatter.number=function(c,e){var d=a.extend({},e.number);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(d=a.extend({},d,e.colModel.formatoptions));return a.fmatter.isEmpty(c)?d.defaultValue:a.fmatter.util.NumberFormat(c,d)};a.fn.fmatter.currency=function(c,e){var d=
a.extend({},e.currency);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(d=a.extend({},d,e.colModel.formatoptions));return a.fmatter.isEmpty(c)?d.defaultValue:a.fmatter.util.NumberFormat(c,d)};a.fn.fmatter.date=function(c,e,d,f){d=a.extend({},e.date);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(d=a.extend({},d,e.colModel.formatoptions));return d.reformatAfterEdit||"edit"!==f?a.fmatter.isEmpty(c)?a.fn.fmatter.defaultFormat(c,e):a.jgrid.parseDate.call(this,d.srcformat,c,d.newformat,
d):a.fn.fmatter.defaultFormat(c,e)};a.fn.fmatter.select=function(c,e){c=String(c);var d=!1,f=[];if(void 0!==e.colModel.formatoptions){d=e.colModel.formatoptions.value;var h=void 0===e.colModel.formatoptions.separator?":":e.colModel.formatoptions.separator;var g=void 0===e.colModel.formatoptions.delimiter?";":e.colModel.formatoptions.delimiter}else void 0!==e.colModel.editoptions&&(d=e.colModel.editoptions.value,h=void 0===e.colModel.editoptions.separator?":":e.colModel.editoptions.separator,g=void 0===
e.colModel.editoptions.delimiter?";":e.colModel.editoptions.delimiter);if(d){var b=!0===(null!=e.colModel.editoptions&&!0===e.colModel.editoptions.multiple)?!0:!1,k=[];b&&(k=c.split(","),k=a.map(k,function(r){return a.jgrid.trim(r)}));if(a.fmatter.isString(d)){var l=d.split(g),m=0,q;for(q=0;q<l.length;q++)if(g=l[q].split(h),2<g.length&&(g[1]=a.map(g,function(r,p){if(0<p)return r}).join(h)),b)-1<a.inArray(g[0],k)&&(f[m]=g[1],m++);else if(a.jgrid.trim(g[0])===a.jgrid.trim(c)){f[0]=g[1];break}}else a.fmatter.isObject(d)&&
(b?f=a.map(k,function(r){return d[r]}):f[0]=d[c]||"")}c=f.join(", ");return""===c?a.fn.fmatter.defaultFormat(c,e):c};a.fn.fmatter.rowactions=function(c){var e=a(this).closest("tr.jqgrow"),d=e.attr("id"),f=a(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1");f=a("#"+f);var h=f[0],g=h.p,b=g.colModel[a.jgrid.getCellIndex(this)],k=b.frozen?a("tr#"+d+" td",f).eq(a.jgrid.getCellIndex(this)).find("> div"):a(this).parent(),l={extraparam:{}},m=function(q){a.jgrid.isFunction(l.afterRestore)&&
l.afterRestore.call(h,q);k.find("div.ui-inline-edit,div.ui-inline-del").show();k.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==b.formatoptions&&(b=a.extend(!0,{},b.formatoptions),l=a.extend(l,b));void 0!==g.editOptions&&(l.editOptions=g.editOptions);void 0!==g.delOptions&&(l.delOptions=g.delOptions);e.hasClass("jqgrid-new-row")&&(l.extraparam[g.prmNames.oper]=g.prmNames.addoper);e={keys:l.keys,oneditfunc:l.onEdit,successfunc:l.onSuccess,url:l.url,extraparam:l.extraparam,aftersavefunc:function(q,
r){a.jgrid.isFunction(l.afterSave)&&l.afterSave.call(h,q,r);k.find("div.ui-inline-edit,div.ui-inline-del").show();k.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:l.onError,afterrestorefunc:m,restoreAfterError:l.restoreAfterError,mtype:l.mtype};switch(c){case "edit":f.jqGrid("editRow",d,e);f[0].p.beforeAction&&(k.find("div.ui-inline-edit,div.ui-inline-del").hide(),k.find("div.ui-inline-save,div.ui-inline-cancel").show(),f.triggerHandler("jqGridAfterGridComplete"));break;case "save":f.jqGrid("saveRow",
d,e)&&(k.find("div.ui-inline-edit,div.ui-inline-del").show(),k.find("div.ui-inline-save,div.ui-inline-cancel").hide(),f.triggerHandler("jqGridAfterGridComplete"));break;case "cancel":f.jqGrid("restoreRow",d,m);k.find("div.ui-inline-edit,div.ui-inline-del").show();k.find("div.ui-inline-save,div.ui-inline-cancel").hide();f.triggerHandler("jqGridAfterGridComplete");break;case "del":f.jqGrid("delGridRow",d,l.delOptions);break;case "formedit":f.jqGrid("setSelection",d),f.jqGrid("editGridRow",d,l.editOptions)}};
a.fn.fmatter.actions=function(c,e){c={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1};var d=e.rowId,f="",h=a.jgrid.getRegional(this,"nav"),g=a.jgrid.styleUI[e.styleUI||"jQueryUI"].fmatter,b=a.jgrid.styleUI[e.styleUI||"jQueryUI"].common;void 0!==e.colModel.formatoptions&&(c=a.extend(c,e.colModel.formatoptions));if(void 0===d||a.fmatter.isEmpty(d))return"";e="onmouseover=jQuery(this).addClass('"+b.hover+"'); onmouseout=jQuery(this).removeClass('"+b.hover+"');  ";c.editformbutton?f+="<div title='"+
h.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' id='jEditButton_"+(d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+e)+"><span class='"+b.icon_base+" "+g.icon_edit+"'></span></div>":c.editbutton&&(f+="<div title='"+h.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' id='jEditButton_"+(d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+e)+"><span class='"+b.icon_base+" "+g.icon_edit+"'></span></div>");c.delbutton&&
(f+="<div title='"+h.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' id='jDeleteButton_"+(d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+e)+"><span class='"+b.icon_base+" "+g.icon_del+"'></span></div>");f+="<div title='"+h.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' id='jSaveButton_"+(d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+e)+"><span class='"+b.icon_base+" "+g.icon_save+"'></span></div>";f+="<div title='"+h.canceltitle+
"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' id='jCancelButton_"+(d+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+e)+"><span class='"+b.icon_base+" "+g.icon_cancel+"'></span></div>";return"<div  class='jqgrid_actions' style='margin-left:8px;'>"+f+"</div>"};a.unformat=function(c,e,d,f){var h=e.colModel.formatter,g=e.colModel.formatoptions||{},b=/([\.\*_'\(\)\{\}\+\?\\])/g,k=e.colModel.unformat||a.fn.fmatter[h]&&a.fn.fmatter[h].unformat;if(void 0!==k&&a.jgrid.isFunction(k))var l=
k.call(this,a(c).text(),e,c);else if(void 0!==h&&a.fmatter.isString(h))switch(l=a.jgrid.getRegional(this,"formatter")||{},h){case "integer":g=a.extend({},l.integer,g);e=g.thousandsSeparator.replace(b,"\\$1");e=new RegExp(e,"g");l=a(c).text().replace(e,"");break;case "number":g=a.extend({},l.number,g);e=g.thousandsSeparator.replace(b,"\\$1");e=new RegExp(e,"g");l=a(c).text().replace(e,"").replace(g.decimalSeparator,".");break;case "currency":g=a.extend({},l.currency,g);e=g.thousandsSeparator.replace(b,
"\\$1");e=new RegExp(e,"g");l=a(c).text();g.prefix&&g.prefix.length&&(l=l.slice(g.prefix.length));g.suffix&&g.suffix.length&&(l=l.slice(0,l.length-g.suffix.length));l=l.replace(e,"").replace(g.decimalSeparator,".");break;case "checkbox":g=e.colModel.editoptions?e.colModel.editoptions.value.split(":"):["Yes","No"];l=a("input",c).is(":checked")?g[0]:g[1];break;case "select":l=a.unformat.select(c,e,d,f);break;case "actions":return"";default:l=a(c).text()}return void 0!==l?l:!0===f?a(c).text():a.jgrid.htmlDecode(a(c).html())};
a.unformat.select=function(c,e,d,f){d=[];c=a(c).text();if(!0===f)return c;e=a.extend({},void 0!==e.colModel.formatoptions?e.colModel.formatoptions:e.colModel.editoptions);f=void 0===e.separator?":":e.separator;var h=void 0===e.delimiter?";":e.delimiter;if(e.value){var g=e.value,b=!0===e.multiple?!0:!1,k=[];b&&(k=c.split(","),k=a.map(k,function(r){return a.jgrid.trim(r)}));if(a.fmatter.isString(g)){var l=g.split(h),m=0,q;for(q=0;q<l.length;q++)if(h=l[q].split(f),2<h.length&&(h[1]=a.map(h,function(r,
p){if(0<p)return r}).join(f)),e.decodeValue&&!0===e.decodeValue&&(h[1]=a.jgrid.htmlDecode(h[1])),b)-1<a.inArray(a.jgrid.trim(h[1]),k)&&(d[m]=h[0],m++);else if(a.jgrid.trim(h[1])===a.jgrid.trim(c)){d[0]=h[0];break}}else if(a.fmatter.isObject(g)||Array.isArray(g))b||(k[0]=c),d=a.map(k,function(r){var p;a.each(g,function(v,t){if(t===r)return p=v,!1});if(void 0!==p)return p});return d.join(", ")}return c||""};a.unformat.date=function(c,e){var d=a.jgrid.getRegional(this,"formatter.date")||{};void 0!==
e.formatoptions&&(d=a.extend({},d,e.formatoptions));return a.fmatter.isEmpty(c)?a.fn.fmatter.defaultFormat(c,e):a.jgrid.parseDate.call(this,d.newformat,c,d.srcformat,d)};var bb,vb=a();a.fn.html5sortable=function(c){var e=String(c);c=a.extend({connectWith:!1},c);return this.each(function(){if(/^enable|disable|destroy$/.test(e)){var d=a(this).children(a(this).data("items")).attr("draggable","enable"===e);"destroy"===e&&d.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}else{var f,
h;d=a(this).children(c.items);var g=a("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+c.placeholderClass+'">').html("&nbsp;");d.find(c.handle).mousedown(function(){f=!0}).mouseup(function(){f=!1});a(this).data("items",c.items);vb=vb.add(g);c.connectWith&&a(c.connectWith).add(this).data("connectWith",c.connectWith);d.attr("draggable","true").on("dragstart.h5s",function(b){if(c.handle&&!f)return!1;f=!1;b=b.originalEvent.dataTransfer;
b.effectAllowed="move";b.setData("Text","dummy");h=(bb=a(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){bb&&(bb.removeClass("sortable-dragging").show(),vb.detach(),h!==bb.index()&&bb.parent().trigger("sortupdate",{item:bb,startindex:h,endindex:bb.index()}),bb=null)}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return!1}).end().add([this,g]).on("dragover.h5s dragenter.h5s drop.h5s",function(b){if(!d.is(bb)&&c.connectWith!==a(bb).parent().data("connectWith"))return!0;
if("drop"===b.type)return b.stopPropagation(),vb.filter(":visible").after(bb),bb.trigger("dragend.h5s"),!1;b.preventDefault();b.originalEvent.dataTransfer.dropEffect="move";d.is(this)?(c.forcePlaceholderSize&&g.height(bb.outerHeight()),bb.hide(),a(this)[g.index()<a(this).index()?"after":"before"](g),vb.not(g).detach()):vb.is(this)||a(this).children(c.items).length||(vb.detach(),a(this).append(g));return!1})}})};a.extend(a.jgrid,{isJSON:function(c){"string"!==typeof c&&(c=JSON.stringify(c));try{return JSON.parse(c),
!0}catch(e){return!1}},stringify:function(c){return JSON.stringify(c,function(e,d){return"function"===typeof d?d.toString():d})},parseFunc:function(c){return JSON.parse(c,function(e,d){return"string"===typeof d&&-1!==d.indexOf("function")&&(e=d.split(" "),e[0]=a.jgrid.trim(e[0].toLowerCase()),0===e[0].indexOf("function")&&"}"===d.trim().slice(-1))?a.jgrid.runCode(d):d})},encode:function(c){return String(c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(c,
e){var d=a.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},e||{}),f=this,h=function(k,l){return"#text"===k?d.encode?f.encode(l):l:"function"===typeof l?"<"+k+"><![CDATA["+l+"]]\x3e</"+k+">\n":""===l?"<"+k+">__EMPTY_STRING_</"+k+">\n":"<"+k+">"+(d.encode?f.encode(l):l)+"</"+k+">\n"},g=function(k,l){for(var m=[],q=0;q<l.length;q++){var r=l[q];m[m.length]="undefined"===typeof r||null==r?"<"+k+" />":"object"===typeof r&&r.constructor==Array?g(k,r):"object"===typeof r?
b(k,r):h(k,r)}m.length||(m[0]="<"+k+">__EMPTY_ARRAY_</"+k+">\n");return m.join("")},b=function(k,l){var m=[],q=[],r;for(r in l)if(l.hasOwnProperty(r)){var p=l[r];r.charAt(0)!==d.attr_prefix?m[m.length]=null==p?"<"+r+" />":"object"===typeof p&&p.constructor===Array?g(r,p):"object"===typeof p?b(r,p):h(r,p):q[q.length]=" "+r.substring(1)+'="'+(d.encode?f.encode(p):p)+'"'}l=q.join("");q=m.join("");null!=k&&(q=0<m.length?q.match(/\n/)?"<"+k+l+">\n"+q+"</"+k+">\n":"<"+k+l+">"+q+"</"+k+">\n":"<"+k+l+" />\n");
return q};c=b(null,c);return d.xmlDecl+c},xmlToJSON:function(c,e){var d=a.extend({force_array:[],attr_prefix:"-"},e||{});if(c){var f={};if(d.force_array)for(e=0;e<d.force_array.length;e++)f[d.force_array[e]]=1;"string"===typeof c&&(c=a.parseXML(c));c.documentElement&&(c=c.documentElement);var h=function(k,l,m,q){if("string"===typeof q)if(-1!==q.indexOf("function"))q=a.jgrid.runCode(q);else switch(q){case "__EMPTY_ARRAY_":q=[];break;case "__EMPTY_STRING_":q="";break;case "false":q=!1;break;case "true":q=
!0}f[l]?(1===m&&(k[l]=[]),k[l][k[l].length]=q):1===m?k[l]=q:2===m?k[l]=[k[l],q]:k[l][k[l].length]=q},g=function(k){if(7!==k.nodeType){if(3===k.nodeType||4===k.nodeType)return null==k.nodeValue.match(/[^\x00-\x20]/)?void 0:k.nodeValue;var l={},m,q;if(k.attributes&&k.attributes.length){var r={};for(m=0;m<k.attributes.length;m++){var p=k.attributes[m].nodeName;"string"===typeof p&&(q=k.attributes[m].nodeValue)&&(p=d.attr_prefix+p,"undefined"===typeof l[p]&&(l[p]=0),l[p]++,h(r,p,l[p],q))}}if(k.childNodes&&
k.childNodes.length){p=!0;r&&(p=!1);for(m=0;m<k.childNodes.length&&p;m++)q=k.childNodes[m].nodeType,3!==q&&4!==q&&(p=!1);if(p)for(r||="",m=0;m<k.childNodes.length;m++)r+=k.childNodes[m].nodeValue;else for(r||={},m=0;m<k.childNodes.length;m++)if(p=k.childNodes[m].nodeName,"string"===typeof p&&(q=g(k.childNodes[m])))"undefined"===typeof l[p]&&(l[p]=0),l[p]++,h(r,p,l[p],q)}return r}};e=g(c);f[c.nodeName]&&(e=[e]);if(11!==c.nodeType){var b={};b[c.nodeName]=e;e=b}return e}},saveAs:function(c,e,d){d=a.extend(!0,
{type:"plain/text;charset=utf-8"},d||{});var f=[];e=null==e||""===e?"jqGridFile.txt":e;Array.isArray(c)?f=c:f[0]=c;try{var h=new File(f,e,d)}catch(k){h=new Blob(f,d)}if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(h,e);else{var g=URL.createObjectURL(h);var b=document.createElement("a");b.href=g;b.download=e;document.body.appendChild(b);b.click();setTimeout(function(){document.body.removeChild(b);window.URL.revokeObjectURL(g)},0)}},csvToArray:function(c,e){void 0===
e&&(e=",");for(var d=[],f,h=[],g={},b=0,k,l=0,m=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi");f=m.exec(c);){var q=f[1];q.length&&q!==e&&(l++,g={},b=0);f=f[2]?f[2].replace(RegExp('""',"g"),'"'):f[3];0===l?(d.push(f),k=d.length):(g[d[b]]=f,b===k-1?h.push(g):b++)}return h}});a.jgrid=a.jgrid||{};a.extend(a.jgrid,{formatCell:function(c,e,d,f,h,g,b,k){var l=c;void 0===b&&(b=!0);void 0===k&&(k=!0);void 0!==f.formatter&&(e={rowId:"",colModel:f,gid:h.p.id,pos:e,styleUI:"",
isExported:!0,exporttype:g},a.jgrid.isFunction(f.formatter)?k&&(l=f.formatter.call(h,c,e,d)):a.fmatter&&b&&(l=a.fn.fmatter.call(h,f.formatter,c,e,d)));return null==l?"":l},formatCellCsv:function(c,e){c=null==c?"":String(c);try{c=a.jgrid.stripHtml(c.replace(e._regexsep,e.separatorReplace).replace(/\r\n/g,e.replaceNewLine).replace(/\n/g,e.replaceNewLine))}catch(d){c=""}e.escquote&&(c=c.replace(e._regexquot,e.escquote+e.quote));if(-1===c.indexOf(e.separator)||-1===c.indexOf(e.qoute))c=e.quote+c+e.quote;
return c},excelCellPos:function(c){for(var e="";0<=c;)e=String.fromCharCode(c%26+65)+e,c=Math.floor(c/26)-1;return e},makeNode:function(c,e,d){var f=c.createElement(e);d&&(d.attr&&a(f).attr(d.attr),d.children&&a.each(d.children,function(h,g){f.appendChild(g)}),d.hasOwnProperty("text")&&f.appendChild(c.createTextNode(d.text)));return f},xmlToString:function(c){return"undefined"!==typeof XMLSerializer?(new window.XMLSerializer).serializeToString(c):c.xml},xmlToZip:function(c,e){var d=this,f=new XMLSerializer,
h=-1===f.serializeToString(a.parseXML(a.jgrid.excelStrings["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r"),g,b,k,l,m,q=[],r;a.each(e,function(p,v){if(a.isPlainObject(v))g=c.folder(p),d.xmlToZip(g,v);else{if(h){b=v.childNodes[0];for(k=b.attributes.length-1;0<=k;k--){var t=b.attributes[k].nodeName,u=b.attributes[k].nodeValue;-1!==t.indexOf(":")&&(q.push({name:t,value:u}),b.removeAttribute(t))}k=0;for(l=q.length;k<l;k++)m=v.createAttribute(q[k].name.replace(":","_dt_b_namespace_token_")),m.value=q[k].value,
b.setAttributeNode(m)}r=f.serializeToString(v);h&&(-1===r.indexOf("<?xml")&&(r='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+r),r=r.replace(/_dt_b_namespace_token_/g,":"));r=r.replace(/<row xmlns="" /g,"<row ").replace(/<cols xmlns="">/g,"<cols>").replace(/<mergeCells xmlns="" /g,"<mergeCells ").replace(/<numFmt xmlns="" /g,"<numFmt ").replace(/<xf xmlns="" /g,"<xf ");c.file(p,r)}})},excelStrings:{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',
"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',
"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets></workbook>',
"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="7"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;\u00a3&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$\u20ac-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/><numFmt numFmtId="170" formatCode="yyyy/mm/dd;@"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="69"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="170" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="49" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},
excelParsers:[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(c){return c/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(c){return c/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?\u00a3[\d,]+.?\d*$/,style:58},{match:/^\-?\u20ac[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(c){return-1*c.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(c){return-1*c.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,
style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64},{match:/^\d{4}\-\d{2}\-\d{2}$/,style:67},{match:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi,style:4}],addExcelStyle:function(c,e,d,f){e=a.extend({numFmtId:"0",fontId:"0",fillId:"0",borderId:"0",applyFont:"1",applyFill:"1",applyBorder:"1",xfId:"0",applyNumberFormat:"0",applyAlignment:"0"},e||{});d=a.extend({horizontal:"left",indent:"0",shrinkToFit:"1",textRotation:"0",vertical:"center",wrapText:"0"},d||{});a.isEmptyObject(c)&&
(c.excel_parsers=!0);var h=!0;if(null==f){var g=a.jgrid.excelStrings;f=a.parseXML(g["xl/styles.xml"]);h=!1}var b=f.getElementsByTagName("numFmts")[0],k=f.getElementsByTagName("cellXfs")[0],l=null,m=null;for(p in c)c.hasOwnProperty(p)&&(-1!==p.indexOf("format")&&(l=p),-1!==p.indexOf("style")&&(m=p));if(m&&!c[m]){var q=0,r=0;if(l&&c[l]){var p=a(b.getElementsByTagName("numFmt"));a.each(p,function(v,t){q++;r=Math.max(r,parseInt(a(t).attr("numFmtId"),10))});l=a.jgrid.makeNode(f,"numFmt",{attr:{numFmtId:r+
1,formatCode:c[l]}});b.appendChild(l);a(b).attr("count",q+1)}q=0;e.numFmtId=0!==r?r+1+"":"0";l="1"===e.applyAlignment?a.jgrid.makeNode(f,"xf",{attr:e,children:[a.jgrid.makeNode(f,"alignment",{attr:d})]}):a.jgrid.makeNode(f,"xf",{attr:e});k.appendChild(l);q=a("cellXfs xf",f).length;a(k).attr("count",q);c[m]=q-1;h||(g["xl/styles.xml"]=a.jgrid.xmlToString(f))}return c},newExcelStyle:function(c,e){e=a.extend(!0,{font:{size:11,name:"Calibri",options:""},color:{patternType:"solid",fgColor:"FFFFFFF",bgColor:64},
border:0},e||{});c=c.xl["styles.xml"];var d=a("cellXfs xf",c).length-1,f=a("fonts font",c).length-1,h=a("fills fill",c).length-1,g=a("borders border",c).length-1;c.childNodes[0].childNodes[1].innerHTML+='<font><sz val="'+e.font.size+'" /><name val="'+e.font.name+'" />'+e.font.options+"</font>";var b="rgb =";0<=parseInt(e.color.bgColor,10)&&(b="indexed =");b+='"'+e.color.bgColor+'"';c.childNodes[0].childNodes[2].innerHTML+='<fill><patternFill patternType="'+e.color.patternType+'"><fgColor rgb="'+e.color.fgColor+
'" /><bgColor '+b+" /></patternFill></fill>";if(a.isPlainObject(e.border)){e.border=a.extend({leftStyle:"none",rightStyle:"none",topStyle:"none",bottomStyle:"none",color:"auto"},e.border||{});var k;"auto"===e.border.color?k='auto="1"':a.fmatter.isNumber(e.border.color)?k='indexed="'+e.border.color+'"':a.fmatter.isString(e.border.color)&&(k='rgb="'+e.border.color+'"');c.childNodes[0].childNodes[3].innerHTML+='<border diagonalUp="false" diagonalDown="false"><left style="'+e.border.leftStyle+'"><color '+
k+' /></left><right style="'+e.border.rightStyle+'"><color '+k+' /></right><top style="'+e.border.topStyle+'"><color '+k+' /></top><bottom style="'+e.border.bottomStyle+'"><color '+k+" /></bottom><diagonal /></border>"}else g=parseInt(e.border,10)-1;c.childNodes[0].childNodes[5].innerHTML+='<xf numFmtId="0" fontId="'+(f+1)+'" fillId="'+(h+1)+'" borderId="'+(g+1)+'" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"></xf>';return d+1}});a.jgrid.extend({exportToCsv:function(c){c=
a.extend(!0,{separator:",",separatorReplace:" ",quote:'"',escquote:'"',newLine:"\r\n",replaceNewLine:" ",includeCaption:!0,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,includeHeader:!0,fileName:"jqGridExport.csv",mimetype:"text/csv;charset=utf-8",returnAsString:!1,onBeforeExport:null,treeindent:" ",visibleTreeNodes:!1,loadIndicator:!0,applyDefFmt:!0,applyCustFmt:!0},c||{});var e="";this.each(function(){function d(B,E){function R(ua,fa,Y){var G=!1;if(0===fa)G=Y[ua];else{var L=Y[ua].idx;
if(0===L)G=Y[ua];else for(;0<=ua;ua--)if(Y[ua].idx===L-fa){G=Y[ua];break}}return G}function z(ua,fa,Y,G){var L=R(ua,fa,Y),X,da=L.cnt,Z,ea=Array(E.collen),pa=0;for(Z=G;Z<T;Z++)if(ba[Z]._expcol){var wa="{0}";a.each(L.summary,function(){if(this.nm===ba[Z].name){ba[Z].summaryTpl&&(wa=ba[Z].summaryTpl);X=this.v;"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?X=this.v/this.vd:this.v&&0<da&&(X=this.v/da));try{this.groupCount=L.cnt,this.groupIndex=L.dataIndex,this.groupValue=L.value,
X=f.formatter("",X,Z,this)}catch(Aa){X=this.v}ea[pa]=a.jgrid.formatCellCsv(a.jgrid.stripHtml(a.jgrid.template(wa,X)),E);return!1}});pa++}return ea}var O="",U=f.p.groupingView,S=[],K=U.groupField.length,ba=f.p.colModel,T=ba.length,W=0;a.each(ba,function(ua,fa){var Y;for(Y=0;Y<K;Y++)if(U.groupField[Y]===fa.name){S[Y]=ua;break}});var qa=a.makeArray(U.groupSummary),va,ma;qa.reverse();if("local"===f.p.datatype&&!f.p.loadonce){a(f).jqGrid("groupingSetup");for(var xa=a.jgrid.getMethod("groupingPrepare"),
ta=0;ta<g;ta++)xa.call(a(f),h[ta],ta)}a.each(U.groups,function(ua,fa){W++;try{va=Array.isArray(U.formatDisplayField)&&a.jgrid.isFunction(U.formatDisplayField[fa.idx])?U.formatDisplayField[fa.idx].call(f,fa.displayValue,fa.value,f.p.colModel[S[fa.idx]],fa.idx,U):f.formatter("",fa.displayValue,S[fa.idx],fa.value)}catch(pa){va=fa.displayValue}var Y=a.jgrid.isFunction(U.groupText[fa.idx])?U.groupText[fa.idx].call(f,va,fa.cnt,fa.summary):a.jgrid.template(U.groupText[fa.idx],va,fa.cnt,fa.summary);"string"!==
typeof Y&&"number"!==typeof Y&&(Y=va);var G="header"===U.groupSummaryPos[fa.idx]?z(ua,0,U.groups,0):Array(E.collen);G[0]=a.jgrid.formatCellCsv(a.jgrid.stripHtml(Y),E);O+=G.join(E.separator)+E.newLine;if(K-1===fa.idx){Y=U.groups[ua+1];var L,X,da=void 0!==Y?Y.startRow:U.groups[ua].startRow+U.groups[ua].cnt;for(L=fa.startRow;L<da&&B[L-0];L++){var Z=B[L-0];for(X=ma=0;X<ba.length;X++)ba[X]._expcol&&(G[ma]=a.jgrid.formatCellCsv(a.jgrid.formatCell(a.jgrid.getAccessor(Z,ba[X].name),X,Z,ba[X],f,"csv",E.applyDefFmt,
E.applyCustFmt),E),ma++);O+=G.join(E.separator)+E.newLine}if("header"!==U.groupSummaryPos[fa.idx]){var ea;if(void 0!==Y){for(ea=0;ea<U.groupField.length&&Y.dataIndex!==U.groupField[ea];ea++);W=U.groupField.length-ea}for(X=0;X<W;X++)qa[X]&&(G=z(ua,X,U.groups,0),O+=G.join(E.separator)+E.newLine);W=ea}}});return O}c._regexsep=new RegExp(c.separator,"g");c._regexquot=new RegExp(c.quote,"g");var f=this,h=f.p.treeGrid?a(f).jqGrid("getRowData",null,!0,c.treeindent,c.visibleTreeNodes):f.addLocalData(!0),
g=h.length,b=f.p.colModel,k=b.length,l=f.p.colNames,m=0,q="",r,p="",v="",t="",u="",n=[],x="";a.jgrid.isFunction(c.loadIndicator)?c.loadIndicator.call(f,"show"):c.loadIndicator&&a(f).jqGrid("progressBar",{method:"show",loadtype:f.p.loadui,htmlcontent:a.jgrid.getRegional(f,"defaults.loadtext")});var w=[];a.each(b,function(B,E){E._expcol=!0;void 0===E.exportcol?E.hidden&&(E._expcol=!1):E._expcol=E.exportcol;if("cb"===E.name||"rn"===E.name||"subgrid"===E.name||"sc"===E.name)E._expcol=!1;E._expcol&&(n.push(a.jgrid.formatCellCsv(l[B],
c)),w.push(E.name))});c.includeLabels&&(u=n.join(c.separator)+c.newLine);c.collen=n.length;if(f.p.grouping){var A=f.p.groupingView._locgr?!0:!1;f.p.groupingView._locgr=!1;q+=d(h,c);f.p.groupingView._locgr=A}else for(;m<g;){var H=h[m];var F=[];for(A=r=0;A<k;A++)b[A]._expcol&&(F[r]=a.jgrid.formatCellCsv(a.jgrid.formatCell(a.jgrid.getAccessor(H,b[A].name),A,H,b[A],f,"csv",c.applyDefFmt,c.applyCustFmt),c),r++);q+=F.join(c.separator)+c.newLine;m++}h=null;F=Array(c.collen);if(c.includeCaption&&f.p.caption){for(m=
c.collen;--m;)F[m]="";F[0]=a.jgrid.formatCellCsv(f.p.caption,c);p+=F.join(c.separator)+c.newLine}if(c.includeGroupHeader&&a(f).jqGrid("isGroupHeaderOn"))for(k=f.p.groupHeader,A=0;A<k.length;A++){H=k[A].groupHeaders;m=0;F=[];for(b=0;b<w.length;b++){F[m]="";for(r=0;r<H.length;r++)H[r].startColumnName===w[b]&&(F[m]=a.jgrid.formatCellCsv(H[r].titleText,c));m++}v+=F.join(c.separator)+c.newLine}if(c.includeFooter&&f.p.footerrow)for(m=a(f).jqGrid("footerData","getlength"),r=0;r<m;r++){b=a(f).jqGrid("footerData",
"get",null,!1,r,!1);A=0;for(F=[];A<c.collen;)k=w[A],b.hasOwnProperty(k)&&F.push(a.jgrid.formatCellCsv(a.jgrid.stripHtml(b[k]),c)),A++;t+=F.join(c.separator)+c.newLine}if(c.includeHeader&&f.p.headerrow)for(m=a(f).jqGrid("headerData","getlength"),r=0;r<m;r++){b=a(f).jqGrid("headerData","get",null,!1,r,!1);A=0;for(F=[];A<c.collen;)k=w[A],b.hasOwnProperty(k)&&F.push(a.jgrid.formatCellCsv(a.jgrid.stripHtml(b[k]),c)),A++;x+=F.join(c.separator)+c.newLine}e=p+v+u+x+q+t;a.jgrid.isFunction(c.loadIndicator)?
c.loadIndicator.call(f,"hide"):c.loadIndicator&&a(f).jqGrid("progressBar",{method:"hide",loadtype:f.p.loadui});if(a.jgrid.isFunction(c.onBeforeExport)&&(e=c.onBeforeExport.call(f,e),!e))throw"Before export does not return data!";c.returnAsString||(-1!==c.mimetype.toUpperCase().indexOf("UTF-8")&&(e="\ufeff"+e),a.jgrid.saveAs(e,c.fileName,{type:c.mimetype}))});return e},exportToExcel:function(c){c=a.extend(!0,{includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,includeHeader:!0,fileName:"jqGridExport.xlsx",
mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",maxlength:40,onBeforeExport:null,customizeData:null,replaceStr:null,treeindent:" ",visibleTreeNodes:!1,loadIndicator:!0,applyDefFmt:!0,applyCustFmt:!0},c||{});this.each(function(){function e(ta){return ta.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")}function d(ta,ua){return a.jgrid.makeNode(l,"c",{attr:ta,children:[a.jgrid.makeNode(l,"v",{text:ua})]})}function f(ta,ua,fa){void 0===
fa&&(fa=68);return a.jgrid.makeNode(l,"c",{attr:{t:"inlineStr",r:ta,s:fa},children:{row:a.jgrid.makeNode(l,"is",{children:{row:a.jgrid.makeNode(l,"t",{text:ua})}})}})}function h(ta){function ua(Ba,la,Ca){var za=!1;if(0===la)za=Ca[Ba];else{var Ea=Ca[Ba].idx;if(0===Ea)za=Ca[Ba];else for(;0<=Ba;Ba--)if(Ca[Ba].idx===Ea-la){za=Ca[Ba];break}}return za}function fa(Ba,la,Ca,za){var Ea=ua(Ba,la,Ca),Fa,Xa=Ea.cnt,Qa,eb=Y(t.header);for(Qa=za;Qa<da;Qa++)if(r[Qa]._expcol){var Ya="{0}";a.each(Ea.summary,function(){if(this.nm===
r[Qa].name){r[Qa].summaryTpl&&(Ya=r[Qa].summaryTpl);Fa=this.v;"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?Fa=this.v/this.vd:this.v&&0<Xa&&(Fa=this.v/Xa));try{this.groupCount=Ea.cnt,this.groupIndex=Ea.dataIndex,this.groupValue=Ea.value}catch(jb){Fa=this.v}eb[this.nm]=a.jgrid.stripHtml(a.jgrid.template(Ya,Fa));return!1}})}return eb}function Y(Ba){for(var la={},Ca=0;Ca<Ba.length;Ca++)la[Ba[Ca]]="";return la}var G=g.p.groupingView,L=[],X=G.groupField.length,da=r.length,
Z=0;a.each(r,function(Ba,la){var Ca;for(Ca=0;Ca<X;Ca++)if(G.groupField[Ca]===la.name){L[Ca]=Ba;break}});var ea=a.makeArray(G.groupSummary),pa;ea.reverse();if("local"===g.p.datatype&&!g.p.loadonce){a(g).jqGrid("groupingSetup");for(var wa=a.jgrid.getMethod("groupingPrepare"),Aa=0;Aa<t.body.length;Aa++)wa.call(a(g),t.body[Aa],Aa)}a.each(G.groups,function(Ba,la){Z++;try{pa=Array.isArray(G.formatDisplayField)&&a.jgrid.isFunction(G.formatDisplayField[la.idx])?G.formatDisplayField[la.idx].call(g,la.displayValue,
la.value,g.p.colModel[L[la.idx]],la.idx,G):g.formatter("",la.displayValue,L[la.idx],la.value)}catch(Xa){pa=la.displayValue}var Ca=a.jgrid.isFunction(G.groupText[la.idx])?G.groupText[la.idx].call(g,pa,la.cnt,la.summary):a.jgrid.template(G.groupText[la.idx],pa,la.cnt,la.summary);"string"!==typeof Ca&&"number"!==typeof Ca&&(Ca=pa);var za="header"===G.groupSummaryPos[la.idx]?fa(Ba,0,G.groups,0):Y(t.header);var Ea=Object.keys(za);za[Ea[0]]=a.jgrid.stripHtml(Array(5*la.idx).join(" ")+Ca);B(za,!1,!1,!0);
if(X-1===la.idx){za=G.groups[Ba+1];Ea=void 0!==za?za.startRow:G.groups[Ba].startRow+G.groups[Ba].cnt;for(Ca=la.startRow;Ca<Ea&&ta[Ca-0];Ca++)B(ta[Ca-0],!1);if("header"!==G.groupSummaryPos[la.idx]){var Fa;if(void 0!==za){for(Fa=0;Fa<G.groupField.length&&za.dataIndex!==G.groupField[Fa];Fa++);Z=G.groupField.length-Fa}for(la=0;la<Z;la++)ea[la]&&(za=fa(Ba,la,G.groups,0),B(za,!1,!1,!0));Z=Fa}}})}var g=this,b=a.jgrid.excelStrings,k=0,l=a.parseXML(b["xl/worksheets/sheet1.xml"]),m=l.getElementsByTagName("sheetData")[0],
q=a.parseXML(b["xl/styles.xml"]);b={_rels:{".rels":a.parseXML(b["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":a.parseXML(b["xl/_rels/workbook.xml.rels"])},"workbook.xml":a.parseXML(b["xl/workbook.xml"]),"styles.xml":q,worksheets:{"sheet1.xml":l}},"[Content_Types].xml":a.parseXML(b["[Content_Types].xml"])};var r=g.p.colModel,p=0,v,t={body:g.p.treeGrid?a(g).jqGrid("getRowData",null,!0,c.treeindent,c.visibleTreeNodes):g.addLocalData(!0),header:[],footer:[],width:[],map:[],parser:[],labels:[],hidden:[],
mergecell:[]},u=a.jgrid.addExcelStyle({excel_header_style:""},{fontId:"2",applyAlignment:"1"},{horizontal:"center",vertical:"center"},q).excel_header_style;var n=0;for(v=r.length;n<v;n++)if(r[n]._expcol=!0,void 0===r[n].exportcol?r[n].hidden&&(r[n]._expcol=!1):r[n]._expcol=r[n].exportcol,void 0===r[n]._colspancell&&(r[n]._colspancell=!1),a.jgrid.isServiceCol(r[n].name)||!r[n]._expcol)t.hidden.push(r[n].name);else{t.header[p]=r[n].name;t.width[p]=5;t.map[p]=n;t.labels[p]=g.p.colNames[n];if(r[n].hasOwnProperty("exportoptions")){var x=
{},w={};r[n].exportoptions.excel_format&&(x=a.jgrid.addExcelStyle({excel_format:r[n].exportoptions.excel_format,excel_style:r[n].exportoptions.excel_style||""},{},{},q));r[n].exportoptions.excel_header_format&&(w=a.jgrid.addExcelStyle({excel_header_format:r[n].exportoptions.excel_header_format,excel_header_style:r[n].exportoptions.excel_header_style||""},{fontId:"2",applyAlignment:"1"},{horizontal:"center"},q));t.parser[n]=a.extend(x,w);r[n].exportoptions.replace_format&&(t.parser[n].replace_format=
r[n].exportoptions.replace_format);r[n].exportoptions.replace_header_format&&(t.parser[n].replace_header_format=r[n].exportoptions.replace_header_format)}else t.parser[n]={excel_parsers:!0};p++}if(c.includeFooter||g.p.footerrow)for(n=a(g).jqGrid("footerData","getlength"),q=0;q<n;q++){v=a(g).jqGrid("footerData","get",null,!1,q,!1);for(p in v)v.hasOwnProperty(p)&&(v[p]=a.jgrid.stripHtml(v[p]));t.footer.push(v)}a.jgrid.isFunction(c.customizeData)&&c.customizeData.call(g,t);var A=a.jgrid.isFunction(c.replaceStr)?
c.replaceStr:e,H,F,B=function(ta,ua,fa,Y){void 0===fa&&(fa=!1);void 0===Y&&(Y=!1);H=k+1;F=a.jgrid.makeNode(l,"row",{attr:{r:H}});for(var G,L=0;L<t.header.length;L++){var X=a.jgrid.excelCellPos(L)+""+H,da,Z=Array.isArray(ta)&&ua?t.labels[L]:a.jgrid.getAccessor(ta,t.header[L]);null==Z&&(Z="");ua||(Z=(G=0===L&&Y)||Y&&""===Z?Z:a.jgrid.formatCell(Z,t.map[L],ta,r[t.map[L]],g,"excel",c.applyDefFmt,c.applyCustFmt))&&("&nbsp;"===Z||"&#160;"===Z||1===Z.length&&160===Z.charCodeAt(0))&&(Z="");t.width[L]=Math.max(t.width[L],
Math.min(parseInt(Z.toString().length,10),c.maxlength));var ea=null;G=t.parser[t.map[L]];if(ua&&fa)G.replace_header_format&&(Z=G.replace_header_format(Z)),ea=void 0!==G.excel_header_style?"text"===G.excel_header_style?f(X,Z):55>=G.excel_header_style?f(X,Z,G.excel_header_style):d({r:X,s:G.excel_header_style},Z):f(X,Z,u),F.appendChild(ea);else if(!0!==G.excel_parsers||ea)void 0===G.excel_style||ua||ea||(G.replace_format&&(Z=G.replace_format(Z)),ea="text"===G.excel_style?f(X,Z):55>=G.excel_style?f(X,
Z,G.excel_style):d({r:X,s:G.excel_style},Z),F.appendChild(ea));else for(var pa=0,wa=a.jgrid.excelParsers.length;pa<wa;pa++)if(G=a.jgrid.excelParsers[pa],Z.match&&!Z.match(/^0\d+/)&&Z.match(G.match)){ea=Z;Z=Z.replace(/[^\d\.\-]/g,"");G.fmt&&(Z=G.fmt(Z));if(67===G.style)ea=d({t:"d",r:X,s:G.style},Z);else if(4===G.style)pa=ea,(Z=document.createElement("div")).innerHTML=pa,Z=Z.firstChild,Z="A"===Z.nodeName?[Z.href,Z.text]:"#text"===Z.nodeName?[Z.textContent,Z.textContent]:!1,ea=Z?a.jgrid.makeNode(l,"c",
{attr:{t:"str",r:X,s:G.style},children:[a.jgrid.makeNode(l,"f",{text:'HYPERLINK("'+Z[0]+'","'+Z[1]+'")'})]}):f(X,ea);else{if(a.inArray(G.style,["63","64","65","66"])&&15<Z.toString().length){G=ea.replace?A(ea):ea;ea=f(X,G);F.appendChild(ea);break}ea=d({r:X,s:G.style},Z)}F.appendChild(ea);break}ea||(Z.match&&(da=Z.match(/^-?([1-9]\d+)(\.(\d+))?$/)),"number"===typeof Z&&15>=Z.toString().length||da&&15>=da[1].length+(da[2]?da[3].length:0)?ea=d({t:"n",r:X},Z):(G=Z.replace?A(Z):Z,ea=f(X,G)),F.appendChild(ea))}m.appendChild(F);
k++};a.jgrid.isFunction(c.loadIndicator)?c.loadIndicator.call(g,"show"):c.loadIndicator&&a(g).jqGrid("progressBar",{method:"show",loadtype:g.p.loadui,htmlcontent:a.jgrid.getRegional(g,"defaults.loadtext")});a("sheets sheet",b.xl["workbook.xml"]).attr("name",c.sheetName);v=0;q=[];var E,R={},z;if(c.includeGroupHeader&&a(g).jqGrid("isGroupHeaderOn"))for(x=g.p.groupHeader,E=0;E<x.length;E++){var O=x[E].groupHeaders;var U=x[E].useColSpanStyle&&1===x.length,S=[],K=[],ba=[],T,W;v++;if(U)for(T=0;T<O.length;T++){w=
O[T].startColumnName;var qa=O[T].numberOfColumns;for(W=z=a.jgrid.getElemByAttrVal(r,"name",w,!0);W<z+O[T].numberOfColumns;W++)ba[r[W].name]=w,n=t.header.indexOf(r[W].name),-1!==n&&S.push(n)}for(n=0;n<t.header.length;n++){w=t.header[n];R[w]=U?t.labels[n]:"";qa=z=-1;for(T=0;T<O.length;T++)if(O[T].startColumnName===w){K.push(w);R[w]=O[T].titleText;qa=O[T].numberOfColumns;for(W=z=a.jgrid.getElemByAttrVal(r,"name",w,!0);W<z+O[T].numberOfColumns;W++)!0===r[W].hidden&&qa--;z=a.jgrid.excelCellPos(n)+v;qa=
a.jgrid.excelCellPos(n+qa-1)+v;q.push({ref:z+":"+qa})}-1===z&&-1===qa&&U&&-1===S.indexOf(n)&&(z=a.jgrid.excelCellPos(n)+v,qa=a.jgrid.excelCellPos(n)+(v+1),q.push({ref:z+":"+qa}))}if(K.length<O.length)for(T=0;T<t.hidden.length;T++)if(U=a.jgrid.inColumnHeader(t.hidden[T],O),0<=U){w=t.hidden[T];for(var va in ba)if(ba[va]===w&&R[va]){R[va]=O[U].titleText;n=t.header.indexOf(va);qa=O[U].numberOfColumns;for(W=z=a.jgrid.getElemByAttrVal(r,"name",w,!0);W<z+O[U].numberOfColumns;W++)!0===r[W].hidden&&qa--;z=
a.jgrid.excelCellPos(n)+v;qa=a.jgrid.excelCellPos(n+qa-1)+v;q.push({ref:z+":"+qa});break}}B(R,!0,!0)}if(c.includeLabels)if(g.p.colSpanHeader.length){v++;x=g.p.colSpanHeader;R={};for(n=0;n<t.header.length;n++)for(w=t.header[n],R[w]=t.labels[n],E=0;E<x.length;E++)O=x[E],O.startColumnName===w&&(R[w]=O.titleText,z=a.jgrid.excelCellPos(n)+v,qa=a.jgrid.excelCellPos(n+O.numberOfColumns-1)+v,q.push({ref:z+":"+qa}));B(R,!0,!0)}else B(t.header,!0,!0);t.mergecell.length&&(q=q.concat(t.mergecell));if(q.length)for(va=
a.jgrid.makeNode(l,"mergeCells",{attr:{count:q.length}}),a("worksheet",l).append(va),p=0;p<q.length;p++)va.appendChild(a.jgrid.makeNode(l,"mergeCell",{attr:q[p]}));if(c.includeHeader||g.p.headerrow)for(va=a(g).jqGrid("headerData","getlength"),n=0;n<va;n++){q=a(g).jqGrid("headerData","get",null,!1,n,!1);for(p in q)q.hasOwnProperty(p)&&(q[p]=a.jgrid.stripHtml(q[p]));a.isEmptyObject(q)||(B(q,!0),a("row",l).last().find("c").attr("s","2"))}if(g.p.grouping)p=g.p.groupingView._locgr?!0:!1,g.p.groupingView._locgr=
!1,h(t.body),g.p.groupingView._locgr=p;else for(p=0,va=t.body.length;p<va;p++)B(t.body[p],!1);if((c.includeFooter||g.p.footerrow)&&!a.isEmptyObject(t.footer))if(Array.isArray(t.footer))for(p=0;p<t.footer.length;p++)B(t.footer[p],!0),a("row",l).last().find("c").attr("s","2");else B(t.footer,!0),a("row",l).last().find("c").attr("s","2");va=a.jgrid.makeNode(l,"cols");a("worksheet",l).prepend(va);p=0;for(v=t.width.length;p<v;p++)va.appendChild(a.jgrid.makeNode(l,"col",{attr:{min:p+1,max:p+1,width:t.width[p],
customWidth:1}}));a.jgrid.isFunction(c.onBeforeExport)&&c.onBeforeExport.call(g,b,k);t=null;try{var ma=new JSZip,xa={type:"blob",mimeType:c.mimetype};a.jgrid.xmlToZip(ma,b);ma.generateAsync?ma.generateAsync(xa).then(function(ta){a.jgrid.saveAs(ta,c.fileName,{type:c.mimetype})}):a.jgrid.saveAs(ma.generate(xa),c.fileName,{type:c.mimetype})}catch(ta){throw ta;}finally{a.jgrid.isFunction(c.loadIndicator)?c.loadIndicator.call(g,"hide"):c.loadIndicator&&a(g).jqGrid("progressBar",{method:"hide",loadtype:g.p.loadui})}})},
exportToPdf:function(c){c=a.extend(!0,{title:null,orientation:"portrait",pageSize:"A4",description:null,onBeforeExport:null,download:"download",includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,includeHeader:!0,fileName:"jqGridExport.pdf",mimetype:"application/pdf",treeindent:"-",visibleTreeNodes:!1,centerTableOnPage:!1,loadIndicator:!0,applyDefFmt:!0,applyCustFmt:!0},c||{});return this.each(function(){function e(R){function z(fa,Y,G){var L=0,X=[];void 0===G&&(G=!1);for(var da=0;da<m.length;da++){var Z=
!(0===da&&G);var ea=fa[m[da]];b={text:Y&&Z?a.jgrid.formatCell(ea+"",r[L],l[q],W[r[L]],d,"pdf",c.applyDefFmt,c.applyCustFmt):ea,alignment:t[da],style:"tableBody"};X.push(b);L++}return X}function O(fa,Y,G){var L=!1;if(0===Y)L=G[fa];else{var X=G[fa].idx;if(0===X)L=G[fa];else for(;0<=fa;fa--)if(G[fa].idx===X-Y){L=G[fa];break}}return L}function U(fa,Y,G,L){var X=O(fa,Y,G),da,Z=X.cnt,ea,pa=S(m);for(ea=L;ea<qa;ea++)if(W[ea]._expcol){var wa="{0}";a.each(X.summary,function(){if(this.nm===W[ea].name){W[ea].summaryTpl&&
(wa=W[ea].summaryTpl);da=this.v;"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?da=this.v/this.vd:this.v&&0<Z&&(da=this.v/Z));try{this.groupCount=X.cnt,this.groupIndex=X.dataIndex,this.groupValue=X.value}catch(Aa){da=this.v}pa[this.nm]=a.jgrid.stripHtml(a.jgrid.template(wa,da));return!1}})}return pa}function S(fa){for(var Y={},G=0;G<fa.length;G++)Y[fa[G]]="";return Y}var K=d.p.groupingView,ba=[],T=K.groupField.length,W=d.p.colModel,qa=W.length,va=0;a.each(W,function(fa,
Y){var G;for(G=0;G<T;G++)if(K.groupField[G]===Y.name){ba[G]=fa;break}});var ma=a.makeArray(K.groupSummary),xa;ma.reverse();if("local"===d.p.datatype&&!d.p.loadonce){a(d).jqGrid("groupingSetup");for(var ta=a.jgrid.getMethod("groupingPrepare"),ua=0;ua<l.length;ua++)ta.call(a(d),l[ua],ua)}a.each(K.groups,function(fa,Y){va++;try{xa=Array.isArray(K.formatDisplayField)&&a.jgrid.isFunction(K.formatDisplayField[Y.idx])?K.formatDisplayField[Y.idx].call(d,Y.displayValue,Y.value,d.p.colModel[ba[Y.idx]],Y.idx,
K):d.formatter("",Y.displayValue,ba[Y.idx],Y.value)}catch(Z){xa=Y.displayValue}var G=a.jgrid.isFunction(K.groupText[Y.idx])?K.groupText[Y.idx].call(d,xa,Y.cnt,Y.summary):a.jgrid.template(K.groupText[Y.idx],xa,Y.cnt,Y.summary);"string"!==typeof G&&"number"!==typeof G&&(G=xa);var L="header"===K.groupSummaryPos[Y.idx]?U(fa,0,K.groups,0):S(m);var X=Object.keys(L);L[X[0]]=a.jgrid.stripHtml(Array(5*Y.idx).join(" ")+G);f.push(z(L,!0,!0));if(T-1===Y.idx){L=K.groups[fa+1];X=void 0!==L?L.startRow:K.groups[fa].startRow+
K.groups[fa].cnt;for(G=Y.startRow;G<X&&R[G-0];G++)f.push(z(R[G-0],!0));if("header"!==K.groupSummaryPos[Y.idx]){var da;if(void 0!==L){for(da=0;da<K.groupField.length&&L.dataIndex!==K.groupField[da];da++);va=K.groupField.length-da}for(Y=0;Y<va;Y++)ma[Y]&&(L=U(fa,Y,K.groups,0),f.push(z(L,!0,!0)));va=da}}})}var d=this,f=[],h=d.p.colModel,g,b={},k,l=d.p.treeGrid?a(d).jqGrid("getRowData",null,!0,c.treeindent,c.visibleTreeNodes):d.addLocalData(!0),m=[],q=0,r=[],p=[],v=[],t={};a.jgrid.isFunction(c.loadIndicator)?
c.loadIndicator.call(d,"show"):c.loadIndicator&&a(d).jqGrid("progressBar",{method:"show",loadtype:d.p.loadui,htmlcontent:a.jgrid.getRegional(d,"defaults.loadtext")});var u;var n=0;for(g=h.length;n<g;n++)h[n]._expcol=!0,void 0===h[n].exportcol?h[n].hidden&&(h[n]._expcol=!1):h[n]._expcol=h[n].exportcol,!a.jgrid.isServiceCol(h[n].name)&&h[n]._expcol&&(b={text:d.p.colNames[n],style:"tableHeader"},p.push(b),m[q]=h[n].name,r[q]=n,v.push(h[n].width),t[h[n].name]=h[n].align||"left",q++);if(c.includeGroupHeader&&
a(d).jqGrid("isGroupHeaderOn")){var x=d.p.groupHeader;for(q=0;q<x.length;q++){g=[];var w=x[q].groupHeaders,A=x[q].useColSpanStyle;for(k=0;k<h.length;k++){var H=!0;a.jgrid.isServiceCol(h[k].name)||!h[k]._expcol?H=!1:b=A?{text:d.p.colNames[k],style:"tableHeader",rowSpan:2,verticalAlign:"center"}:{text:"",style:"tableHeader"};for(u=0;u<w.length;u++)if(w[u].startColumnName===h[k].name){for(var F=w[u].numberOfColumns,B=k;B<k+w[u].numberOfColumns;B++)!0===h[B].hidden&&F--;b={text:w[u].titleText,colSpan:F,
style:"tableHeader"};!1===H&&0<F&&(H=!0,k+=w[u].numberOfColumns-F)}H&&g.push(b)}f.push(g)}}if(c.includeLabels)if(d.p.colSpanHeader.length){x=d.p.colSpanHeader;g=[];for(k=0;k<m.length;k++){b={text:d.p.colNames[k],style:"tableHeader",verticalAlign:"center"};for(u=0;u<x.length;u++)x[u].startColumnName===m[k]&&(b={text:x[u].titleText,colSpan:x[u].numberOfColumns,style:"tableHeader"});g.push(b);n++}f.push(g)}else f.push(p);if(c.includeHeader&&d.p.headerrow)for(u=a(d).jqGrid("headerData","getlength"),n=
0;n<u;n++){g=a(d).jqGrid("headerData","get",null,!1,n,!1);p=[];for(k=0;k<m.length;k++)b={text:a.jgrid.stripHtml(a.jgrid.getAccessor(g,m[k])),style:"tableFooter",alignment:t[m[k]]},p.push(b);f.push(p)}if(d.p.grouping)k=d.p.groupingView._locgr?!0:!1,d.p.groupingView._locgr=!1,e(l),d.p.groupingView._locgr=k;else for(q=0,g=l.length;q<g;q++){u=0;p=[];n=l[q];for(k=0;k<m.length;k++)b={text:a.jgrid.stripHtml(a.jgrid.formatCell(a.jgrid.getAccessor(n,m[k])+"",r[u],l[q],h[r[u]],d,"pdf",c.applyDefFmt,c.applyCustFmt)),
alignment:t[m[k]],style:"tableBody"},p.push(b),u++;f.push(p)}if(c.includeFooter&&d.p.footerrow)for(u=a(d).jqGrid("footerData","getlength"),n=0;n<u;n++){h=a(d).jqGrid("footerData","get",null,!1,n,!1);p=[];for(k=0;k<m.length;k++)b={text:a.jgrid.stripHtml(a.jgrid.getAccessor(h,m[k])),style:"tableFooter",alignment:t[m[k]]},p.push(b);f.push(p)}k={style:"tableExample",widths:v,table:{headerRows:null!=x?0:1,body:f}};c.centerTableOnPage&&(k={columns:[{width:"*",text:""},{style:"tableExample",width:"auto",
widths:v,table:{headerRows:null!=x?0:1,body:f},alignment:"center"},{width:"*",text:""}]});v={pageSize:c.pageSize,pageOrientation:c.orientation,content:[k],styles:{tableHeader:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc",alignment:"center"},tableBody:{fontSize:10},tableFooter:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc"},title:{alignment:"center",fontSize:15},description:{}},defaultStyle:{fontSize:10}};c.description&&v.content.unshift({text:c.description,style:"description",
margin:[0,0,0,12]});c.title&&v.content.unshift({text:c.title,style:"title",margin:[0,0,0,12]});a.jgrid.isFunction(c.onBeforeExport)&&c.onBeforeExport.call(d,v);try{var E=pdfMake.createPdf(v);E.getDataUrl(function(R){a.jgrid.isFunction(c.loadIndicator)?c.loadIndicator.call(d,"hide"):c.loadIndicator&&a(d).jqGrid("progressBar",{method:"hide",loadtype:d.p.loadui})});"open"===c.download?E.open():E.getBuffer(function(R){a.jgrid.saveAs(R,c.fileName,{type:c.mimetype})})}catch(R){throw R;}})},exportToHtml:function(c){c=
a.extend(!0,{title:"",onBeforeExport:null,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,includeHeader:!0,tableClass:"jqgridprint",autoPrint:!1,topText:"",bottomText:"",returnAsString:!1,treeindent:"&nbsp;",visibleTreeNodes:!1,loadIndicator:!0,applyDefFmt:!0,applyCustFmt:!0},c||{});var e;this.each(function(){function d(u){function n(K,ba,T){var W=!1;if(0===ba)W=T[K];else{var qa=T[K].idx;if(0===qa)W=T[K];else for(;0<=K;K--)if(T[K].idx===qa-ba){W=T[K];break}}return W}function x(K,ba,T,W){var qa=
n(K,ba,T),va,ma=qa.cnt,xa,ta=w(k.header);for(xa=W;xa<B;xa++)if(h[xa]._expcol){var ua="{0}";a.each(qa.summary,function(){if(this.nm===h[xa].name){h[xa].summaryTpl&&(ua=h[xa].summaryTpl);va=this.v;"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?va=this.v/this.vd:this.v&&0<ma&&(va=this.v/ma));try{this.groupCount=qa.cnt,this.groupIndex=qa.dataIndex,this.groupValue=qa.value}catch(fa){va=this.v}ta[this.nm]=a.jgrid.stripHtml(a.jgrid.template(ua,va));return!1}})}return ta}function w(K){for(var ba=
{},T=0;T<K.length;T++)ba[K[T]]="";return ba}var A=f.p.groupingView,H=[],F=A.groupField.length,B=h.length,E=0,R="";a.each(h,function(K,ba){var T;for(T=0;T<F;T++)if(A.groupField[T]===ba.name){H[T]=K;break}});var z=a.makeArray(A.groupSummary),O;z.reverse();if("local"===f.p.datatype&&!f.p.loadonce){a(f).jqGrid("groupingSetup");for(var U=a.jgrid.getMethod("groupingPrepare"),S=0;S<k.body.length;S++)U.call(a(f),k.body[S],S)}a.each(A.groups,function(K,ba){E++;try{O=Array.isArray(A.formatDisplayField)&&a.jgrid.isFunction(A.formatDisplayField[ba.idx])?
A.formatDisplayField[ba.idx].call(f,ba.displayValue,ba.value,f.p.colModel[H[ba.idx]],ba.idx,A):f.formatter("",ba.displayValue,H[ba.idx],ba.value)}catch(xa){O=ba.displayValue}var T=a.jgrid.isFunction(A.groupText[ba.idx])?A.groupText[ba.idx].call(f,O,ba.cnt,ba.summary):a.jgrid.template(A.groupText[ba.idx],O,ba.cnt,ba.summary);"string"!==typeof T&&"number"!==typeof T&&(T=O);var W=!1;if("header"===A.groupSummaryPos[ba.idx])var qa=x(K,0,A.groups,0);else qa=w(k.header),W=!0;var va=Object.keys(qa);qa[va[0]]=
Array(5*ba.idx).join(" ")+T;R+=r(qa,"td",!0,1===E,W);if(F-1===ba.idx){qa=A.groups[K+1];W=void 0!==qa?qa.startRow:A.groups[K].startRow+A.groups[K].cnt;for(T=ba.startRow;T<W&&u[T-0];T++)R+=r(u[T-0],"td",!0);if("header"!==A.groupSummaryPos[ba.idx]){var ma;if(void 0!==qa){for(ma=0;ma<A.groupField.length&&qa.dataIndex!==A.groupField[ma];ma++);E=A.groupField.length-ma}for(ba=0;ba<E;ba++)z[ba]&&(qa=x(K,ba,A.groups,0),R+=r(qa,"td",!0));E=ma}}});return R}var f=this,h=f.p.colModel,g=0,b,k={body:f.p.treeGrid?
a(f).jqGrid("getRowData",null,!0,c.treeindent,c.visibleTreeNodes):f.addLocalData(!0),header:[],footer:[],width:[],map:[],align:[]};var l=0;for(b=h.length;l<b;l++)h[l]._expcol=!0,void 0===h[l].exportcol?h[l].hidden&&(h[l]._expcol=!1):h[l]._expcol=h[l].exportcol,"cb"!==h[l].name&&"rn"!==h[l].name&&"subgrid"!==h[l].name&&"sc"!==h[l].name&&h[l]._expcol&&(k.header[g]=h[l].name,k.width[g]=h[l].width,k.map[g]=l,k.align[g]=h[l].align||"left",g++);var m=document.createElement("a"),q=function(u){m.href=u;u=
m.host;-1===u.indexOf("/")&&0!==m.pathname.indexOf("/")&&(u+="/");return m.protocol+"//"+u+m.pathname+m.search};g=function(u,n,x){for(var w="<tr>",A=0,H=u.length;A<H;A++)u=!0===x?" style=width:"+k.width[A]+"px;":"",w+="<"+n+u+">"+f.p.colNames[k.map[A]]+"</"+n+">";return w+"</tr>"};var r=function(u,n,x,w,A){for(var H="<tr>",F,B,E=0,R=k.header.length;E<R&&(B=A?' colspan= "'+k.header.length+'" style=text-align:left':!0===w?" style=width:"+k.width[E]+"px;text-align:"+k.align[E]+";":" style=text-align:"+
k.align[E]+";",F=k.header[E],u.hasOwnProperty(F)&&(H+="<"+n+B+">"+(x?a.jgrid.formatCell(a.jgrid.getAccessor(u,F),k.map[E],u,h[k.map[E]],f,"html",c.applyDefFmt,c.applyCustFmt):u[F])+"</"+n+">"),!A);E++);return H+"</tr>"};a.jgrid.isFunction(c.loadIndicator)?c.loadIndicator.call(f,"show"):c.loadIndicator&&a(f).jqGrid("progressBar",{method:"show",loadtype:f.p.loadui,htmlcontent:a.jgrid.getRegional(f,"defaults.loadtext")});l='<table class="'+c.tableClass+'">';c.includeLabels&&(l+="<thead>"+g(k.header,
"th",!0)+"</thead>");l+="<tbody>";if(c.includeHeader&&f.p.headerrow)for(g=a(f).jqGrid("footerData","getlength"),b=0;b<g;b++)for(b=0;b<g;b++){var p=a(f).jqGrid("headerData","get",null,!1,b,!1);l+=r(p,"td",!1)}if(f.p.grouping)g=f.p.groupingView._locgr?!0:!1,f.p.groupingView._locgr=!1,l+=d(k.body),f.p.groupingView._locgr=g;else for(g=0,b=k.body.length;g<b;g++)l+=r(k.body[g],"td",!0,0===g?!0:!1);if(c.includeFooter&&f.p.footerrow)for(g=a(f).jqGrid("footerData","getlength"),b=0;b<g;b++)k.footer[b]=a(f).jqGrid("footerData",
"get",null,!1,b,!1),l+=r(k.footer[b],"td",!1);l+="</tbody></table>";if(c.returnAsString)e=l;else{var v=window.open("","");v.document.close();var t=c.title?"<title>"+c.title+"</title>":"";a("style, link").each(function(){var u=t,n=a(this).clone()[0];"link"===n.nodeName.toLowerCase()&&(n.href=q(n.href));t=u+n.outerHTML});try{v.document.head.innerHTML=t}catch(u){a(v.document.head).html(t)}v.document.body.innerHTML=(c.title?"<h1>"+c.title+"</h1>":"")+"<div>"+(c.topText||"")+"</div>"+l+"<div>"+(c.bottomText||
"")+"</div>";a(v.document.body).addClass("html-view");a("img",v.document.body).each(function(u,n){n.setAttribute("src",q(n.getAttribute("src")))});a.jgrid.isFunction(c.onBeforeExport)&&c.onBeforeExport.call(f,v);v.chrome?c.autoPrint&&(v.print(),v.close()):setTimeout(function(){c.autoPrint&&(v.print(),v.close())},1E3)}a.jgrid.isFunction(c.loadIndicator)?c.loadIndicator.call(f,"hide"):c.loadIndicator&&a(f).jqGrid("progressBar",{method:"hide",loadtype:f.p.loadui})});return e}});a.extend(a.jgrid,{focusableElementsList:">a[href] >button:not([disabled]) >area[href] >input:not([disabled]) >select:not([disabled]) >textarea:not([disabled]) >iframe >object >embed >*[tabindex] >*[contenteditable]".split(" ")});
a.jgrid.extend({ariaBodyGrid:function(c){var e=a.extend({onEnterCell:null,onKeyCheck:null,customCellAction:null},c||{});return this.each(function(){function d(t,u){return!isNaN(t)&&!isNaN(u)&&0<=t&&0<=u&&b.rows.length&&t<b.rows.length&&u<b.p.colModel.length}function f(t,u){u=b.p.iRow+u;var n=b.p.iCol+t,x=b.rows.length;t=0!==t;if(!x)return!1;var w=b.p.colModel.length;t&&(0>n&&2<=u&&(n=w-1,u--),n>=w&&(n=0,u++));if(!t)if(1>u)n--,u=x-1,b.rows[u]&&0<=n&&!b.rows[u].cells[n]&&u--;else if(u>=x||!b.rows[u].cells[n])u=
1,n++;return d(u,n)?{row:u,col:n}:d(b.p.iRow,b.p.iCol)?{row:b.p.iRow,col:b.p.iCol}:!1}function h(t,u){var n=f(t,u);if(!n)return!1;for(;a(b.rows[n.row].cells[n.col]).is(":hidden");)if(b.p.iRow=n.row,b.p.iCol=n.col,n=f(t,u),b.p.iRow===n.row&&b.p.iCol===n.col)return!1;0!==u&&a(b).jqGrid("setSelection",b.rows[n.row].id,!1,null,!1);return n}function g(t){var u=b.p.page,n=b.p.lastpage;u+=t;0>=u&&(u=1);u>n&&(u=n);b.p.page!==u&&(b.p.page=u,b.grid.populate())}var b=this,k=a.jgrid.getMethod("getStyleUI"),l=
k(b.p.styleUI+".common","highlight",!0),m=a.jgrid.focusableElementsList.join();a(b).removeAttr("tabindex");a(b).on("jqGridAfterGridComplete.setAriaGrid",function(t){a("tbody",b).first().find(">tr:not(.jqgfirstrow)>td:not(:hidden, :has("+m+"))").attr("tabindex",-1);a("tbody",b).first().find(">tr:not(.jqgfirstrow)").removeAttr("tabindex");void 0!==b.p.iRow&&void 0!==b.p.iCol&&b.rows[b.p.iRow]&&a(b.rows[b.p.iRow].cells[b.p.iCol]).attr("tabindex",0).focus(function(){a(this).addClass(l)}).blur(function(){a(this).removeClass(l)})});
b.p.iRow=1;b.p.iCol=a.jgrid.getFirstVisibleCol(b);var q=0,r=0,p=a.jgrid.isFunction(e.customCellAction)?e.customCellAction:!1,v=a.jgrid.isFunction(e.onKeyCheck)?e.onKeyCheck:!1;a(b).on("keydown",function(t){if(!(b.p.navigationDisabled&&!0===b.p.navigationDisabled||t.target.id.startsWith("jqs_"+b.p.id)||v&&!v.call(b,b.rows[b.p.iRow].id,b.p.iRow,b.p.iCol,t))){switch(t.which||t.keyCode){case 38:var u=h(0,-1);q=u.row;r=u.col;t.preventDefault();break;case 40:u=h(0,1);q=u.row;r=u.col;t.preventDefault();
break;case 37:u=h(-1,0);q=u.row;r=u.col;t.preventDefault();break;case 39:u=h(1,0);q=u.row;r=u.col;t.preventDefault();break;case 36:q=t.ctrlKey?1:b.p.iRow;r=0;t.preventDefault();break;case 35:q=t.ctrlKey?b.rows.length-1:b.p.iRow;r=b.p.colModel.length-1;t.preventDefault();break;case 33:g(-1);r=b.p.iCol;q=b.p.iRow;t.preventDefault();break;case 34:g(1);r=b.p.iCol;q=b.p.iRow;q>b.rows.length-1&&(q=b.rows.length-1,b.p.iRow=b.rows.length-1);t.preventDefault();break;case 13:a.jgrid.isFunction(e.onEnterCell)&&
(e.onEnterCell.call(b,b.rows[b.p.iRow].id,b.p.iRow,b.p.iCol,t),t.preventDefault());return;case 113:try{a(b).jqGrid("editCell",b.p.iRow,b.p.iCol,!0,t)}catch(n){}break;default:p&&p.call(b,b.rows[b.p.iRow].id,b.p.iRow,b.p.iCol,t);return}setTimeout(function(){a(b).jqGrid("focusBodyCell",q,r,k,l)},50)}});a(b).on("jqGridBeforeSelectRow.ariaGridClick",function(){return!1});a(b).on("jqGridCellSelect.ariaGridClick",function(t,u,n,x,w){t=w.target;0<b.p.iRow&&0<=b.p.iCol&&a(b.rows[b.p.iRow].cells[b.p.iCol]).attr("tabindex",
-1);if(a(t).is("td")||a(t).is("th")||t.id.startsWith("jqs_"+b.p.id))b.p.iCol=t.cellIndex,u=a(t).closest("tr.jqgrow"),b.p.iRow=u[0].rowIndex,a(t).attr("tabindex",0).addClass(l).focus().blur(function(){a(this).removeClass(l)})});b.p.ariaBody=!0})},excelLikeGrid:function(c){var e=a.extend({beforeDeleteCell:null,customCellAction:null,customUndoFunction:null,specialChars:'~!@#$%^&*()_+{}:"|<>?,./;\\[]'.split(""),addonChars:!1,onKeyCheck:null},c||{});return this.each(function(){var d=this,f=a.jgrid.getMethod("getStyleUI"),
h=f(d.p.styleUI+".common","highlight",!0);d.p.F2key=!1;var g={isValidCell:function(t,u){return!isNaN(t)&&!isNaN(u)&&0<=t&&0<=u&&d.rows.length&&t<d.rows.length&&u<d.p.colModel.length},getNextCell:function(t,u){u=d.p.iRow+u;var n=d.p.iCol+t;t=0!==t;var x=d.p.frozenColumns?d.p.frozenColCount+1:0;if(!d.rows.length)return!1;var w=d.p.colModel.length;t&&(n<x&&(n=x),n===w&&(n=w));t||d.rows[u]&&0<=n&&!d.rows[u].cells[n]&&u--;return this.isValidCell(u,n)?{row:u,col:n}:this.isValidCell(d.p.iRow,d.p.iCol)?{row:d.p.iRow,
col:d.p.iCol}:!1},getNextVisibleCell:function(t,u){var n=this.getNextCell(t,u);if(!n)return!1;for(;a(d.rows[n.row].cells[n.col]).is(":hidden");)if(d.p.iRow=n.row,d.p.iCol=n.col,n=this.getNextCell(t,u),d.p.iRow===n.row&&d.p.iCol===n.col)return!1;0!==u&&a(d).jqGrid("setSelection",d.rows[n.row].id,!1,null,!1);return n},movePage:function(t){var u=d.p.page,n=d.p.lastpage;u+=t;0>=u&&(u=1);u>n&&(u=n);d.p.page!==u&&(d.p.page=u,d.grid.populate())}},b=a.jgrid.focusableElementsList.join();a(d).removeAttr("tabindex");
a(d).on("jqGridAfterGridComplete.setAriaGrid",function(t){a("tbody",d).first().find(">tr:not(.jqgfirstrow)>td:not(:hidden, :has("+b+"))").attr("tabindex",-1);a("tbody",d).first().find(">tr:not(.jqgfirstrow)").removeAttr("tabindex");void 0!==d.p.iRow&&void 0!==d.p.iCol&&d.rows[d.p.iRow]&&a(d.rows[d.p.iRow].cells[d.p.iCol]).attr("tabindex",0).focus(function(){a(this).addClass(h)}).blur(function(){a(this).removeClass(h)})});d.p.iRow=1;d.p.iCol=a.jgrid.getFirstVisibleCol(d);d.p.ariaBody=!0;var k=0,l=
0,m=a.jgrid.isFunction(e.customCellAction)?e.customCellAction:!1,q=a.jgrid.isFunction(e.beforeDeleteCell)?e.beforeDeleteCell:!1,r=new Set(e.specialChars),p=!1;d.addEventListener("paste",function(t){p&&(t=(t.clipboardData||window.clipboardData).getData("text"),a(d).jqGrid("saveCell",d.p.iRow,d.p.iCol,t),p=!1)});var v=a.jgrid.isFunction(e.onKeyCheck)?e.onKeyCheck:!1;a(d).on("keydown",function(t){if(!(d.p.navigationDisabled&&!0===d.p.navigationDisabled||t.target.id.startsWith("jqs_"+d.p.id)||v&&!v.call(d,
d.rows[d.p.iRow].id,d.p.iRow,d.p.iCol,t,g))){var u=t.which||t.keyCode,n=t.ctrlKey?t.ctrlKey:17===u?!0:!1;switch(u){case 38:u=g.getNextVisibleCell(0,-1);k=u.row;l=u.col;t.preventDefault();break;case 40:case 13:u=g.getNextVisibleCell(0,1);k=u.row;l=u.col;t.preventDefault();break;case 37:u=g.getNextVisibleCell(-1,0);k=u.row;l=u.col;t.preventDefault();break;case 39:u=g.getNextVisibleCell(1,0);k=u.row;l=u.col;t.preventDefault();break;case 36:k=t.ctrlKey?1:d.p.iRow;l=d.p.frozenColumns?d.p.frozenColCount+
1:0;t.preventDefault();break;case 35:k=t.ctrlKey?d.rows.length-1:d.p.iRow;l=d.p.colModel.length-1;t.preventDefault();break;case 33:g.movePage(-1);l=d.p.iCol;k=d.p.iRow;t.preventDefault();break;case 34:g.movePage(1);l=d.p.iCol;k=d.p.iRow;k>d.rows.length-1&&(k=d.rows.length-1,d.p.iRow=d.rows.length-1);t.preventDefault();break;case 9:u=t.shiftKey?g.getNextVisibleCell(-1,0):g.getNextVisibleCell(1,0);k=u.row;l=u.col;t.preventDefault();break;case 113:try{a(d).jqGrid("editCell",d.p.iRow,d.p.iCol,!0,t,!1),
d.p.F2key=!0}catch(w){}break;case 8:case 46:u=!0;q&&(u=q.call(d,d.rows[d.p.iRow].id,d.p.iRow,d.p.iCol,t));!0===u&&a(d).jqGrid("saveCell",d.p.iRow,d.p.iCol,"");break;case 86:if(n)return p=!0;break;case 90:if(n)return u=!0,a.jgrid.isFunction(e.customUndoFunction)&&(u=e.customUndoFunction.call(d,d.rows[d.p.iRow].id,d.p.iRow,d.p.iCol,t)),u&&d.p.savedValues&&a(d).jqGrid("getCell",d.rows[d.p.iRow].id,d.p.colModel[d.p.iCol].name,!1)===d.p.savedValues.newvalue&&d.p.iRow===d.p.savedValues.indexRow&&a(d).jqGrid("saveCell",
d.p.iRow,d.p.iCol,d.p.savedValues.oldvalue),!0;break;default:u=/^[a-z]$/i.test(t.key);n=/^[0-9]$/i.test(t.key);var x=!1;e.addonChars&&(x=e.addonChars.test(t.key));(u||n||r.has(t.key)||x)&&a(d).jqGrid("editCell",d.p.iRow,d.p.iCol,!0,t,!0);m&&m.call(d,d.rows[d.p.iRow].id,d.p.iRow,d.p.iCol,t);return}setTimeout(function(){a(d).jqGrid("focusBodyCell",k,l,f,h)},50)}});a(d).on("jqGridBeforeSelectRow.ariaGridClick",function(){return!1});a(d).on("jqGridCellSelect.ariaGridClick",function(t,u,n,x,w){t=w.target;
0<d.p.iRow&&0<=d.p.iCol&&a(d.rows[d.p.iRow].cells[d.p.iCol]).attr("tabindex",-1);if(a(t).is("td")||a(t).is("th")||t.id.startsWith("jqs_"+d.p.id))d.p.iCol=t.cellIndex,d.p.savedRow.length&&a(d).jqGrid("saveCell",d.p.savedRow[0].id,d.p.savedRow[0].ic),u=a(t).closest("tr.jqgrow"),d.p.iRow=u[0].rowIndex,a(t).attr("tabindex",0).addClass(h).focus().blur(function(){a(this).removeClass(h)})}).on("jqGridDblClickRow.ariaGridDblClick",function(t,u,n,x,w){a(d).jqGrid("editCell",n,x,!0,w,!1);d.p.F2key=!0})})},
focusBodyCell:function(c,e,d,f){return this.each(function(){var h=d?d:a.jgrid.getMethod("getStyleUI"),g=f?f:h(this.p.styleUI+".common","highlight",!0);h=a.jgrid.focusableElementsList.join();var b;void 0!==c&&void 0!==e?!isNaN(this.p.iRow)&&!isNaN(this.p.iCol)&&0<=this.p.iCol&&((b=a(h,this.rows[this.p.iRow].cells[this.p.iCol])[0])?a(b).attr("tabindex",-1):a(this.rows[this.p.iRow].cells[this.p.iCol]).attr("tabindex",-1)):(c=this.p.iRow,e=this.p.iCol);c=parseInt(c,10);e=parseInt(e,10);0<c&&0<=e&&((b=
a(h,this.rows[c].cells[e])[0])?a(b).attr("tabindex",0).addClass(g).focus().blur(function(){a(this).removeClass(g)}):a(this.rows[c].cells[e]).attr("tabindex",0).addClass(g).focus().blur(function(){a(this).removeClass(g)}),this.p.iRow=c,this.p.iCol=e)})},resetAriaBody:function(){return this.each(function(){var c=this,e=!1;c.p.ariaBody=!1;a(c).attr("tabindex","0").off("keydown").off("jqGridBeforeSelectRow.ariaGridClick").off("jqGridCellSelect.ariaGridClick").off("jqGridAfterGridComplete.setAriaGrid");
var d=a.jgrid.focusableElementsList.join();a("tbody",c).first().find(">tr:not(.jqgfirstrow)>td:not(:hidden, :has("+d+"))").removeAttr("tabindex").off("focus");a("tbody",c).first().find(">tr:not(.jqgfirstrow)").attr("tabindex",-1);try{c.removeEventListener("paste",function(f){e&&(f=(f.clipboardData||window.clipboardData).getData("text"),a(c).jqGrid("saveCell",c.p.iRow,c.p.iCol,f),e=!1)},!0)}catch(f){}})},ariaHeaderGrid:function(c){var e=a.extend({onHeaderKeyCheck:null},c||{});return this.each(function(){var d=
this,f=a.jgrid.getMethod("getStyleUI")(d.p.styleUI+".common","highlight",!0),h=a("#gbox_"+d.p.id).find(".ui-jqgrid-hbox>table").first(),g=a.jgrid.isFunction(e.onHeaderKeyCheck)?e.onHeaderKeyCheck:!1;a("tr.ui-jqgrid-labels",h).on("keydown",function(b){var k=d.p.selHeadInd,l=b.which||b.keyCode,m=d.grid.headers.length;if(!g||g.call(d,k,b))switch(l){case 37:if(0<=k-1){for(k--;a(d.grid.headers[k].el).is(":hidden")&&0<=k-1&&!(k--,0>k););0<=k&&(a(d.grid.headers[k].el).focus(),a(d.grid.headers[d.p.selHeadInd].el).attr("tabindex",
"-1"),d.p.selHeadInd=k,b.preventDefault())}break;case 39:if(k+1<m){for(k++;a(d.grid.headers[k].el).is(":hidden")&&k+1<m&&!(k++,k>m-1););k<m&&(a(d.grid.headers[k].el).focus(),a(d.grid.headers[d.p.selHeadInd].el).attr("tabindex","-1"),d.p.selHeadInd=k,b.preventDefault())}break;case 13:a(d.grid.headers[k].el).find("div").first().trigger("click"),b.preventDefault()}});a("tr.ui-jqgrid-labels>th:not(:hidden)",h).attr("tabindex",-1).focus(function(){a(this).addClass(f).attr("tabindex","0")}).blur(function(){a(this).removeClass(f)});
d.p.selHeadInd=a.jgrid.getFirstVisibleCol(d);a(d.grid.headers[d.p.selHeadInd].el).attr("tabindex","0")})},focusHeaderCell:function(c){return this.each(function(){void 0===c&&(c=this.p.selHeadInd);0<=c&&c<this.p.colModel.length&&(a(this.grid.headers[this.p.selHeadInd].el).attr("tabindex","-1"),a(this.grid.headers[c].el).focus(),this.p.selHeadInd=c)})},resetAriaHeader:function(){return this.each(function(){var c=a("#gbox_"+this.p.id).find(".ui-jqgrid-hbox>table").first();a("tr.ui-jqgrid-labels",c).off("keydown");
a("tr.ui-jqgrid-labels>th:not(:hidden)",c).removeAttr("tabindex").off("focus blur")})},ariaPagerGrid:function(){return this.each(function(){var c=this,e=a.jgrid.getMethod("getStyleUI"),d=e(c.p.styleUI+".common","highlight",!0),f="."+e(c.p.styleUI+".common","disabled",!0),h=a(".ui-pg-button",c.p.pager),g=h.length;h.attr("tabindex","-1").focus(function(){a(this).addClass(d)}).blur(function(){a(this).removeClass(d)});c.p.navIndex=0;setTimeout(function(){var b=h.not(f).first().attr("tabindex","0");c.p.navIndex=
b[0]&&b[0].cellIndex?b[0].cellIndex-1:0},100);a(c.p.pager).find("table.ui-pager-table tr").first().on("keydown",function(b){var k=c.p.navIndex;switch(b.which||b.keyCode){case 37:if(0<=k-1){for(k--;a(h[k]).is(f)&&0<=k-1&&!(k--,0>k););0<=k&&(a(h[c.p.navIndex]).attr("tabindex","-1"),a(h[k]).attr("tabindex","0").focus(),c.p.navIndex=k);b.preventDefault()}break;case 39:if(k+1<g){for(k++;a(h[k]).is(f)&&k+1<g+1&&!(k++,k>g-1););k<g&&(a(h[c.p.navIndex]).attr("tabindex","-1"),a(h[k]).attr("tabindex","0").focus(),
c.p.navIndex=k);b.preventDefault()}break;case 13:a(b.originalEvent.srcElement).hasClass("ui-pg-input")||(a(h[k]).trigger("click"),b.preventDefault())}})})},focusPagerCell:function(c){return this.each(function(){var e=a(".ui-pg-button",this.p.pager),d=e.length;void 0===c&&(c=this.p.navIndex);0<=c&&c<d&&(a(e[this.p.navIndex]).attr("tabindex","-1"),a(e[c]).attr("tabindex","0").focus(),this.p.navIndex=c)})},resetAriaPager:function(){return this.each(function(){a(".ui-pg-button",this.p.pager).removeAttr("tabindex").off("focus");
a(this.p.pager).find("table.ui-pager-table tr").first().off("keydown")})},setAriaGrid:function(c){var e=a.extend({header:!0,body:!0,pager:!0,onEnterCell:null,customCellAction:null,excel:!1},c||{});return this.each(function(){e.header&&a(this).jqGrid("ariaHeaderGrid",e);e.body&&(e.excel?a(this).jqGrid("excelLikeGrid",e):a(this).jqGrid("ariaBodyGrid",e));e.pager&&a(this).jqGrid("ariaPagerGrid")})},resetAriaGrid:function(c){var e=a.extend({header:!0,body:!0,pager:!0},c||{});return this.each(function(){e.body&&
a(this).jqGrid("resetAriaBody");e.header&&a(this).jqGrid("resetAriaHeader");e.pager&&a(this).jqGrid("resetAriaPager")})}});a.jgrid.extend({transposeSetup:function(c,e){var d=[],f=[],h=!1,g=a.extend({},e||{});this.each(function(){var b=Object.keys(c[g.baseindex]);g.excludeSrcCols.length&&(b=b.filter(function(r){return!g.excludeSrcCols.includes(r)}));for(var k=0;k<b.length;k++){var l={};var m=0;l.col_name=b[k];h||d.push({name:"col_name"});m++;for(var q=0;q<c.length;q++)l[g.nameprefix+m]=c[q][b[k]],
h||d.push({name:g.nameprefix+m,label:g.labelprefix+m}),m++;h=!0;f.push(l)}});return{colModel:d,rows:f}},jqTranspose:function(c,e,d,f){e=a.extend({nameprefix:"col",labelprefix:"value ",baseindex:0,beforeCreateGrid:null,RowAsHeader:0,loadMsg:!1,excludeSrcCols:[]},e||{});return this.each(function(){function h(k,l){Array.isArray(k)||(k=[]);var m=jQuery(g).jqGrid("transposeSetup",k,e);a.jgrid.isFunction(e.beforeCreateGrid)&&e.beforeCreateGrid.call(g,m,k);if(!1!==l.RowAsHeader&&0<=l.RowAsHeader&&m.rows.length&&
l.RowAsHeader<m.rows.length){k=m.rows[l.RowAsHeader];var q=0,r;for(r in k)Object.prototype.hasOwnProperty.call(k,r)&&(m.colModel[q].label=k[r]),q++;m.rows.splice(l.RowAsHeader,1)}l=a.jgrid.from.call(g,m.rows);jQuery(g).jqGrid(a.extend(!0,{datastr:l.select(),datatype:"jsonstring",colModel:m.colModel,jsonReader:{repeatitems:!1},viewrecords:!0},d||{}));e.loadMsg&&a(".loading_pivot").remove()}var g=this,b=d&&d.regional?d.regional:"en";e.loadMsg&&a("<div class='loading_pivot ui-state-default ui-state-active row'>"+
a.jgrid.getRegional(g,"regional."+b+".defaults.loadtext")+"</div>").insertBefore(g).show();"string"===typeof c?a.ajax(a.extend({url:c,dataType:"json",success:function(k){h(a.jgrid.getAccessor(k,f&&f.reader?f.reader:"rows"),e)}},f||{})):h(c,e)})}});a.jgrid.extend({setupFrozenRows:function(c){var e=a.extend({first:0,last:0,rowids:[],classes:"frozen-row-class"},c||{});return this.each(function(){if(!0!==this.p.subGrid&&!0!==this.p.treeGrid&&!this.p.scroll&&!0!==this.p.grouping){var d,f=0,h;if(e.rowids&&
0<e.rowids.length){for(h=0;h<e.rowids.length;h++)for(d=this.rows.length;d--;)if(this.rows[d].id===e.rowids[h]+""){a(this.rows[d]).insertBefore(this.rows[h+1]);break}h=e.rowids.length}else if(0<e.first)h=e.first;else if(0<e.last){d=this.rows.length;h=e.last;for(var g=0;g<e.last;g++)a(this.rows[d-1]).insertBefore(this.rows[1])}else return;for(g=0;g<h;g++)d=this.rows[g+1],d.classList.contains("jqgrow")&&a(d).addClass(e.classes).css("top",f+"px"),f+=a(d).outerHeight();this.p.frozenRows=!0}})},setFrozenRows:function(c){return this.each(function(){0<
this.p.records&&a(this).jqGrid("setupFrozenRows",c);a(this).on("jqGridAfterGridComplete.setFrozenRows",function(){a(this).jqGrid("setupFrozenRows",c)})})},destroyFrozenRows:function(c){var e=a.extend({classes:"frozen-row-class",rowsToScan:5},c||{});return this.each(function(){for(let d=0;d<e.rowsToScan;d++)this.rows[d+1]&&this.rows[d+1].classList.contains(e.classes)&&a(this.rows[d+1]).removeClass(e.classes).css("top","");a(this).off("jqGridAfterGridComplete.setFrozenRows");this.p.frozenRows=!1})}});
a.jgrid.extend({dbInit:function(c){return this.each(function(){switch(c){case "indexeddb":a(this).jqGrid("_initIndexedDB_")}})},_initIndexedDB_:function(){this.each(function(){var c=this;indexedDB.databases().then(function(e){e=indexedDB.open(c.p.dbconfig.dbname);e.onupgradeneeded=d=>{console.info("Database created: "+c.p.dbconfig.dbname)};e.onsuccess=function(d){async function f(k){var l=c.p.dbconfig;if("string"===typeof l.dataUrl){try{var m=await (await fetch(l.dataUrl,l.fetchOptions)).json();null!==
l.reader&&(m=a.jgrid.getAccessor(m,l.reader))}catch(q){console.log("Error:"+q);return}a.jgrid.isFunction(l.beforeInsertData)&&(m=l.beforeInsertData.call(c,m))}else Array.isArray(l.dataUrl)&&(m=l.dataUrl);c.p.dbconfig.dbversion=g+1;l=indexedDB.open(l.dbname,g+1);l.onupgradeneeded=function(q){var r=q.target.result;if(!k){r=r.createObjectStore(c.p.dbconfig.dbtable,{keyPath:b.name});for(let v=0;v<c.p.colModel.length;v++){let t=c.p.colModel[v];t.name===b.name?r.createIndex(t.name,t.name,{unique:!0}):r.createIndex(t.name,
t.name,{unique:!1})}}q=q.target.transaction.objectStore(c.p.dbconfig.dbtable);q.transaction.oncomplete=function(v){};q.transaction.onerror=function(v){a.jgrid.info_dialog("Error",v.target.error.name+" : "+v.target.error.message,"Close")};for(var p of m)c.p.dbconfig.isKeyInData||(p[b.name]=Math.random().toString(16).slice(2)),q.put(p);c.p.dbconfig.ready_req=!0;c.grid.populate()};l.onerror=q=>{a.jgrid.info_dialog("Error",q.target.error.name+" : "+q.target.error.message,"Close")}}const h=d.target.result;
var g=parseInt(h.version),b=a.jgrid.getElemByAttrVal(c.p.colModel,"key",!0);if(a.isEmptyObject(b))a.jgrid.info_dialog("Warning","Missed key: No uniquie key is set in colModel. Creating table fail","Close");else if(h.objectStoreNames.contains(c.p.dbconfig.dbtable))if(c.p.dbconfig.loadIfExists||c.p.dbconfig.deleteIfExists){const k=h.transaction(c.p.dbconfig.dbtable,"readwrite").objectStore(c.p.dbconfig.dbtable),l=k.count();l.onsuccess=()=>{if(0<l.result)if(c.p.dbconfig.deleteIfExists){const m=k.clear();
m.onsuccess=q=>{console.log("All records are cleared");h.close();f(!0)};m.onerror=q=>{a.jgrid.info_dialog("Error",q.target.error.name+" : "+q.target.error.message,"Close")}}else c.p.dbconfig.loadIfExists?(h.close(),f(!0)):(h.close(),c.p.dbconfig.ready_req=!0,c.grid.populate());else h.close(),f(!0)}}else h.close(),c.p.dbconfig.ready_req=!0,c.grid.populate();else h.close(),f(!1)};e.onerror=d=>{a.jgrid.info_dialog("Error",d.target.error.name+" : "+d.target.error.message,"Close")}})})},updateStorageRecord:async function(c,
e){let d=this[0],f=d.p.dbconfig,h=d.p.datatype;return new Promise(function(g,b){Array.isArray(c)||(c=[c]);e||(e=d.p.keyName);c=a.jgrid.normalizeDbData.call(d,c,d.p.colModel);switch(h){case "indexeddb":const k=window.indexedDB.open(f.dbname);k.onsuccess=l=>{l=k.result.transaction(f.dbtable,"readwrite");l.oncomplete=q=>{g(q);console.log("Transaction completed succefully")};l.onerror=q=>{b(q);try{a.jgrid.info_dialog.call("Error",q.target.error,"Close",{styleUI:d.p.styleUI})}catch(r){console.log(q.target.error)}};
const m=l.objectStore(f.dbtable);for(let q=0;q<c.length;q++){if(!c[q].hasOwnProperty(e)||""===c[q][e]){l.abort();break}const r=m.openCursor();r.onsuccess=p=>{if(p=p.target.result){var v=p.value;v[e]===c[q][e]?(delete c[q].oper,v=Object.assign(v,c[q]),p.update(v)):p.continue()}};r.onerror=p=>{console.log(p.target.error)}}}}})},addStorageRecord:async function(c,e){let d=this[0],f=d.p.dbconfig,h=d.p.datatype;return new Promise(function(g,b){Array.isArray(c)||(c=[c]);e||(e=d.p.keyName);c=a.jgrid.normalizeDbData.call(d,
c,d.p.colModel);switch(h){case "indexeddb":const k=window.indexedDB.open(f.dbname);k.onsuccess=l=>{l=k.result.transaction(f.dbtable,"readwrite");l.oncomplete=m=>{g(m);console.log("Transaction completed succefully")};l.onerror=m=>{b(m);try{a.jgrid.info_dialog.call("Error",m.target.error,"Close",{styleUI:d.p.styleUI})}catch(q){console.log(m.target.error)}};l=l.objectStore(f.dbtable);for(let m=0;m<c.length;m++)c[m].hasOwnProperty(e)&&""!==c[m][e]||(c[m][e]=Math.random().toString(16).slice(2)),l.add(c[m]).onsuccess=
q=>{}}}})},deleteStorageRecord:async function(c,e){let d=this[0],f=d.p.dbconfig,h=d.p.datatype;return new Promise(function(g,b){Array.isArray(c)||(c=c.split(","));e||(e=d.p.keyName);switch(h){case "indexeddb":var k=[],l={};for(let q=0;q<c.length;q++)l[e]=c[q],k.push(l);k=a.jgrid.normalizeDbData.call(d,k,d.p.colModel);const m=window.indexedDB.open(f.dbname);m.onsuccess=q=>{q=m.result.transaction(f.dbtable,"readwrite");q.oncomplete=r=>{g(r);console.log("Transaction completed succefully")};q.onerror=
r=>{b(r);try{a.jgrid.info_dialog.call("Error",r.target.error,"Close",{styleUI:d.p.styleUI})}catch(p){console.log(r.target.error)}};q=q.objectStore(f.dbtable);for(let r=0;r<c.length;r++)q.delete(k[r][e]).onsuccess=p=>{console.log("Deleted record: "+c[r])}}}})}});a.extend(a.jgrid,{deserializeRow:function(c,e=","){const d=[];let f=0,h=0,g=!1;for(;;){if(f===c.length){d.push(c.slice(h,f));break}const b=c[f];b!==e||g||(d.push(c.slice(h,f).replace(/^"|"$/g,"").replace(/""/g,'"').replace(/\\n/g,"\n")),h=
f+1);'"'===b&&('"'===c[f+1]?f+=1:g=!g);f+=1}return d},CSVtoObject:function(c,e,d=",",f){(f=c.length)&&""==c[f-1]&&c.pop();return c.map(h=>{const g=a.jgrid.deserializeRow(h,d);return e.reduce((b,k,l)=>{b[k]=g[l];return b},{})})},Permissions:async function(){navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1}).then(c=>{c&&"denied"===c.state&&(c=a.jgrid.getRegional(this,"clipboard.errors"),a.jgrid.toast({text:c.enb_prm,autoClose:!1,styleUI:this.p.styleUI,type:"warning"}))}).catch(c=>
{console.log("clipboard-read permission not supported for this browser.")})},copyText:async function(c,e){try{if(await navigator.clipboard.writeText(c),e.show_info_after_copy){let d=a.jgrid.getRegional(this,"clipboard.msg");a.jgrid.toast({text:d.text_c,styleUI:this.p.styleUI,type:"info",position:e.toastPosition})}}catch(d){c=a.jgrid.getRegional(this,"clipboard.errors"),a.jgrid.toast({text:c.copy_err+d,autoCloseTime:4500,styleUI:this.p.styleUI,type:"error"})}},getClipboardContents:async function(){try{return await navigator.clipboard.readText()}catch(c){let e=
a.jgrid.getRegional(this,"clipboard.errors");a.jgrid.toast({text:e.read_err+c,styleUI:this.p.styleUI,autoCloseTime:4500,type:"error"})}},copyRows:function(c,e,d){for(var f=[],h=[],g=!1,b=a(c).parents("table")[0],k=0;k<c.length;k++){var l=c[k],m=[];if(l.classList.contains("jqgrow")){for(var q=0;q<l.cells.length;q++)if(l.cells[q].classList.contains("selected-cell"))if(!1===g&&h.push(e[q].name),!0===d.copy_formated_data)m.push(l.cells[q].innerText);else try{m.push(a.unformat.call(b,a(l.cells[q]),{rowId:l.id,
colModel:e[q]},q))}catch(r){m.push(a.jgrid.htmlDecode(l.cells[q].innerHTML))}h.length&&(g=!0);m.length&&f.push(m.join(d.copy_delimiter))}}d.copy_header_included&&h.length&&f.unshift(h.join(d.copy_delimiter));a.jgrid.isFunction(d.beforeCopyData)&&d.beforeCopyData.call(this,f,d);a.jgrid.copyText.call(b,f.join(d.copy_newline),d);d.startCellIndex=null;d.startRowIndex=null;a.jgrid.isFunction(d.afterCopyData)&&d.afterCopyData.call(this,f,d)},pasteRows:function(c,e){if(null===c.startCellIndex||null===c.startRowIndex){let h=
a.jgrid.getRegional(this,"clipboard.msg");a.jgrid.toast({text:h.select_pos,position:"middle center",autoClose:!1,styleUI:this.p.styleUI,type:"warning"})}else{var d=this.p.colModel,f=this.p.id;a.jgrid.getClipboardContents.call(this).then(h=>{if(""===h||null==h)h=a.jgrid.getRegional(this,"clipboard.errors"),a.jgrid.toast({text:h.get_data_err,styleUI:this.p.styleUI,autoCloseTime:4500,type:"error"});else{var g=c.paste_autodetect_delim?a.jgrid.guessDelimiters(h):c.paste_delimiter,b=[];a.jgrid.isFunction(c.beforePasteData)&&
c.beforePasteData.call(this,h,g);h=h.split(c.paste_newline);if(c.paste_header_included){var k=h[0].split(g).length;k+=c.startCellIndex;k>d.length&&(k=d.length);for(var l=c.startCellIndex;l<k;l++)b.push(d[l].name)}else b=a.jgrid.deserializeRow(h.shift(),g);a.jgrid.isLocalStorage()&&localStorage.removeItem(f+"_restore");g=a.jgrid.CSVtoObject(h,b,g,c.paste_newline);a("#"+f).jqGrid("updateRowsByIndex",c.startRowIndex,g,c,e);a.jgrid.isFunction(c.afterPasteData)&&c.afterPasteData.call(this,h)}})}},undoPaste:function(c){if(a.jgrid.isLocalStorage()){var e=
localStorage.getItem(c+"_restore");if(e&&(e=JSON.parse(e),Array.isArray(e)))for(let f=0;f<e.length;f++)a("#"+c).jqGrid("setRowData",e[f]._id_,e[f]);var d=a("#"+c);d.find("tr.frompaste").each(function(f,h){d.jqGrid("delRowData",h.id)})}},guessDelimiters:function(c,e=["\t",",",";","|"]){e=e.map(d=>c.indexOf(d)).reduce((d,f)=>-1===d||-1!==f&&f<d?f:d);return c[e]||"\t"},repeatRow:function(c){var e=[],d=!1,f=this.rows,h=this.p.colModel,g=[],b={},k=[];const l=a.jgrid.getRegional(this,"clipboard.errors");
for(var m=0;m<f.length;m++){var q=null;var r=f[m];if(r.classList.contains("jqgrow")){for(var p=0;p<r.cells.length;p++)if(r.cells[p].classList.contains("selected-cell"))if(!1===d){e.push(h[p].name);try{b[h[p].name]=a.unformat.call(this,a(r.cells[p]),{rowId:r.id,colModel:h[p]},p)}catch(v){b[h[p].name]=a.jgrid.htmlDecode(r.cells[p].innerHTML)}}else q=r.id;e.length&&(d=!0)}null!==q&&(r=a(this).jqGrid("getRowData",q),r._id_=q,k.push(r),g.push(q))}a.jgrid.isLocalStorage()?(localStorage.removeItem(this.id+
"_restore"),localStorage.setItem(this.id+"_restore",JSON.stringify(k))):a.jgrid.toast({text:l.local_stor_err,autoCloseTime:4500,styleUI:this.p.styleUI,type:"warning"});for(e=0;e<g.length;e++)a(this).jqGrid("setRowData",g[e],b);c.startCellIndex=null;c.startRowIndex=null},repeatCol:function(c){var e=[],d=!1,f=this.rows,h=this.p.colModel,g,b=[],k=[],l=[];const m=a.jgrid.getRegional(this,"clipboard.errors");for(var q=0;q<f.length;q++){var r=g=null;var p=f[q];if(p.classList.contains("jqgrow")){for(var v=
0;v<p.cells.length;v++)if(p.cells[v].classList.contains("selected-cell")){!1===d&&e.push(h[v].name);if(null===r)try{k.push(a.unformat.call(this,a(p.cells[v]),{rowId:p.id,colModel:h[v]},v))}catch(t){k.push(a.jgrid.htmlDecode(p.cells[v].innerHTML))}r=!0;g=p.id}e.length&&(d=!0)}null!==g&&(r=a(this).jqGrid("getRowData",g),r._id_=g,l.push(r),b.push(g))}e.shift();a.jgrid.isLocalStorage()?(localStorage.removeItem(this.id+"_restore"),localStorage.setItem(this.id+"_restore",JSON.stringify(l))):a.jgrid.toast({text:m.local_stor_err,
autoCloseTime:4500,styleUI:this.p.styleUI,type:"warning"});for(f=0;f<b.length;f++){d={};for(h=0;h<e.length;h++)d[e[h]]=k[f];a(this).jqGrid("setRowData",b[f],d)}c.startCellIndex=null;c.startRowIndex=null}});a.jgrid.extend({bindSelection:function(c){return this.each(function(){var e=function(g,b){var k=g.parent(),l=g.index();k=k.index();if(k<c.startRowIndex){var m=k;k=c.startRowIndex}else m=c.startRowIndex;l<c.startCellIndex?(g=l,l=c.startCellIndex):g=c.startCellIndex;for(;m<=k;m++)for(var q=b.find("tr").eq(m).find("td"),
r=g;r<=l;r++)q.eq(r).addClass(d)},d="selected-cell",f=a("#"+a.jgrid.jqID(this.p.id)),h=this;f.find("td").on("mousedown.jqgselect",function(g){if(3===g.which){var b=a("#gbox_"+h.id)[0].getBoundingClientRect();a("#"+h.p.id+"_copypaste").css({left:g.clientX-b.left,top:g.clientY-b.top}).show();return!1}c.isMouseDown=!0;b=a(this);f.find("."+d).removeClass(d);g.shiftKey?e(b,f):(b.addClass(d),c.startCellIndex=b.index(),c.startRowIndex=b.parent().index());return!1}).on("mouseover.jqgselect",function(){c.isMouseDown&&
(f.find("."+d).removeClass(d),e(a(this),f))}).on("selectstart.jqgselect",function(){return!1})})},startClipboard:function(c){var e=a.extend({copy_delimiter:"\t",copy_newline:"\n",copy_header_included:!0,copy_formated_data:!0,show_info_after_copy:!0,paste_delimiter:"\t",paste_newline:"\n",paste_autodetect_delim:!0,paste_header_included:!1,paste_skip_formatter:!0,show_info_after_paste:!0,beforeCopyData:null,afterCopyData:null,beforePasteData:null,afterPasteData:null,menuConfig:{copy:!0,paste:!0,paste_add:!0,
row_vertical:!0,row_horizontal:!0,undo:!0,cancel:!0},toastPosition:"top center",userMenus:[],startCellIndex:null,startRowIndex:null,isMouseDown:!1},c||{});return this.each(function(){if(!this.p.isClipboard){var d=this,f='<ul id="'+this.id+'_copypaste" class="ui-search-menu modal-content column-menu ui-menu jqgrid-caption-menu '+a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].colmenu.menu_widget+'" role="menu" tabindex="0"></ul>';a("#gbox_"+this.id).append(f);var h=a.jgrid.getRegional(this,"clipboard.menus"),
g=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].clipboard,b=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common.icon_base,k=[];f=[];k.copy={id:"copy_act",icon:b+" "+g.icon_copy,title:h.copy_act,click:function(){a.jgrid.copyRows(this.rows,this.p.colModel,e)}};k.paste={id:"paste_act",icon:b+" "+g.icon_paste,title:h.paste_act,click:function(){a.jgrid.pasteRows.call(this,e,!1)}};k.paste_add={id:"paste_act_add",icon:b+" "+g.icon_paste_add,title:h.paste_act_add,click:function(){a.jgrid.pasteRows.call(this,
e,!0)}};k.row_vertical={id:"repeat_act_row",icon:b+" "+g.icon_repeat_row,title:h.repeat_act_row,click:function(){a.jgrid.repeatRow.call(this,e)}};k.row_horizontal={id:"repeat_act_col",icon:b+" "+g.icon_repeat_col,title:h.repeat_act_col,click:function(){a.jgrid.repeatCol.call(this,e)}};k.undo={id:"undo_act",icon:b+" "+g.icon_undo,title:h.undo_act,click:function(){a.jgrid.undoPaste(this.id,e)}};k.cancel={id:"cancel_act",icon:b+" "+g.icon_cancel,title:h.cancel_act,click:function(){a("#"+d.p.id+"_copypaste").hide()}};
h=0;for(var l in e.menuConfig)Object.hasOwn(e.menuConfig,l)&&!0===e.menuConfig[l]&&(h++,1<h&&f.push({divider:!0}),f.push(k[l]));if(Array.isArray(e.userMenus))for(l=0;l<e.userMenus.length;l++)f.push(e.userMenus[l]);a(this).jqGrid("menubarAdd",f,"_copypaste");a(this).on("jqGridAfterGridComplete.setBindSelections",function(){a(this).jqGrid("bindSelection",e);e.startCellIndex=e.startRowIndex=null});a(this).on("jqGridRightClickRow.setBindSelections",function(){return!1});a(document).on("mouseup.jqgclipme",
function(){e.isMouseDown=!1});a("body").on("click.jqgclipme",function(m){if(!a(m.target).closest(".ui-jqgrid-menubar").length)try{a("#"+d.p.id+"_copypaste").hide()}catch(q){}});a.jgrid.Permissions.call(this);d.p.isClipboard=!0;a(this).jqGrid("bindSelection",e);e.startCellIndex=e.startRowIndex=null}})},stopClipboard:function(){return this.each(function(){a("#"+this.p.id+"_copypaste").remove();a("body").off("click.jqgclipme");a(document).off("mouseup.jqgclipme");a(this).off("jqGridAfterGridComplete.setBindSelections").off("jqGridAfterGridComplete.setBindSelections").find("td").removeClass("selected-cell").off("mousedown.jqgselect").off("mouseover.jqgselect").off("selectstart.jqgselect");
this.p.isClipboard=!1})},updateRowsByIndex:function(c,e,d,f){var h=!0;this.each(function(){const g=a.jgrid.getRegional(this,"clipboard.errors"),b=a.jgrid.getRegional(this,"clipboard.msg");if(Array.isArray(e))if(c=parseInt(c,10),0>c)h=!1,a.jgrid.toast({text:g.start_ind_err,styleUI:this.p.styleUI,autoCloseTime:4500,type:"error"});else{for(var k=e.length,l=0,m,q,r=[],p=0,v=0;l<k;){m=e[l];if((q=this.rows[c])&&!0!==f){let t=a(this).jqGrid("getRowData",q.id);a.isEmptyObject(t)||(t._id_=q.id,e[l]._id_=q.id,
r.push(t),a(this).jqGrid("setRowData",q.id,m,void 0,!1,d.paste_skip_formatter),v++)}else a(this).jqGrid("addRowData",null,m,"last",null,"frompaste"),p++;l++;c++}r.length&&(a.jgrid.isLocalStorage()?localStorage.setItem(this.id+"_restore",JSON.stringify(r)):a.jgrid.toast({text:g.local_stor_err,autoCloseTime:4500,styleUI:this.p.styleUI,type:"warning"}));d.show_info_after_paste&&a.jgrid.info_dialog(b.info_cap,"<div>"+b.total_row+k+"</div><div>"+b.insert_row+p+"</div><div>"+b.update_row+v+"</div>","",
{styleUI:this.p.styleUI,autoClose:!0,autoCloseTime:4500})}else h=!1,a.jgrid.toast({text:g.not_array_err,autoCloseTime:3500,styleUI:this.p.styleUI,type:"error"})});return h}});jQuery.the=function(c,e,d){if(1<arguments.length&&(null===e||"object"!==typeof e)){d=jQuery.extend({},d);null===e&&(d.expires=-1);if("number"===typeof d.expires){var f=d.expires,h=d.expires=new Date;h.setDate(h.getDate()+f)}return document.cookie=[encodeURIComponent(c),"=",d.raw?""+e:encodeURIComponent(""+e),d.expires?"; expires="+
d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=e||{};h=d.raw?function(g){return g}:decodeURIComponent;return(f=RegExp("(?:^|; )"+encodeURIComponent(c)+"=([^;]*)").exec(document.cookie))?h(f[1]):null};jQuery.jgrid=jQuery.jgrid||{};jQuery.extend(jQuery.jgrid,{_m_:function(){return"This is trial! Contact TriRand".split("")},_on_:function(){var c=jQuery.the("Gs37q12Saq");if(c){c=(new Date(parseInt(c,10)+2592E6)).getTime();var e=
(new Date).getTime();c<=e&&(c=jQuery.jgrid.mobile._m_().join(""),alert(c))}else jQuery.the("Gs37q12Saq",(new Date).getTime())}});jQuery.jgrid._on_()});
